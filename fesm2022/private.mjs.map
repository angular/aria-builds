{"version":3,"file":"private.mjs","sources":["../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/menu/menu.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/behaviors/signal-like/signal-like.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/behaviors/expansion/expansion.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/behaviors/label/label.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tabs/tabs.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/toolbar/toolbar.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/toolbar/toolbar-widget.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/toolbar/toolbar-widget-group.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/accordion/accordion.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tree/tree.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tree/combobox-tree.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/deferred-content/deferred-content.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, Signal, signal} from '@angular/core';\nimport {KeyboardEventManager} from '../behaviors/event-manager';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\n\n/** The inputs for the MenuBarPattern class. */\nexport interface MenuBarInputs<V> extends ListInputs<MenuItemPattern<V>, V> {\n  /** The menu items contained in the menu. */\n  items: SignalLike<MenuItemPattern<V>[]>;\n\n  /** Callback function triggered when a menu item is selected. */\n  onSelect?: (value: V) => void;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n}\n\n/** The inputs for the MenuPattern class. */\nexport interface MenuInputs<V> extends Omit<ListInputs<MenuItemPattern<V>, V>, 'values'> {\n  /** The unique ID of the menu. */\n  id: SignalLike<string>;\n\n  /** The menu items contained in the menu. */\n  items: SignalLike<MenuItemPattern<V>[]>;\n\n  /** A reference to the parent menu or menu trigger. */\n  parent: SignalLike<MenuTriggerPattern<V> | MenuItemPattern<V> | undefined>;\n\n  /** Callback function triggered when a menu item is selected. */\n  onSelect?: (value: V) => void;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n\n  /** The delay in milliseconds before expanding sub-menus on hover. */\n  expansionDelay: SignalLike<number>;\n}\n\n/** The inputs for the MenuTriggerPattern class. */\nexport interface MenuTriggerInputs<V> {\n  /** A reference to the menu trigger element. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  /** A reference to the menu associated with the trigger. */\n  menu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n\n  /** Whether the menu trigger is disabled. */\n  disabled: SignalLike<boolean>;\n}\n\n/** The inputs for the MenuItemPattern class. */\nexport interface MenuItemInputs<V> extends Omit<ListItem<V>, 'index' | 'selectable'> {\n  /** A reference to the parent menu or menu trigger. */\n  parent: SignalLike<MenuPattern<V> | MenuBarPattern<V> | undefined>;\n\n  /** A reference to the submenu associated with the menu item. */\n  submenu: SignalLike<MenuPattern<V> | undefined>;\n}\n\n/** The menu ui pattern class. */\nexport class MenuPattern<V> {\n  /** The unique ID of the menu. */\n  id: SignalLike<string>;\n\n  /** The role of the menu. */\n  role = () => 'menu';\n\n  /** Whether the menu is disabled. */\n  disabled = () => this.inputs.disabled();\n\n  /** Whether the menu is visible. */\n  visible = computed(() => (this.inputs.parent() ? !!this.inputs.parent()?.expanded() : true));\n\n  /** Controls list behavior for the menu items. */\n  listBehavior: List<MenuItemPattern<V>, V>;\n\n  /** Whether the menu or any of its child elements are currently focused. */\n  isFocused = signal(false);\n\n  /** Whether the menu has received focus. */\n  hasBeenFocused = signal(false);\n\n  /** Whether the menu trigger has been hovered. */\n  hasBeenHovered = signal(false);\n\n  /** Timeout used to open sub-menus on hover. */\n  _openTimeout: any;\n\n  /** Timeout used to close sub-menus on hover out. */\n  _closeTimeout: any;\n\n  /** The tab index of the menu. */\n  tabIndex = () => this.listBehavior.tabIndex();\n\n  /** Whether the menu should be focused on mouse over. */\n  shouldFocus = computed(() => {\n    const root = this.root();\n\n    if (root instanceof MenuTriggerPattern) {\n      return true;\n    }\n\n    if (root instanceof MenuBarPattern || root instanceof MenuPattern) {\n      return root.isFocused();\n    }\n\n    return false;\n  });\n\n  /** The key used to expand sub-menus. */\n  private _expandKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key used to collapse sub-menus. */\n  private _collapseKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** The regexp used to decide if a key should trigger typeahead. */\n  typeaheadRegexp = /^.$/;\n\n  /** The root of the menu. */\n  root: Signal<MenuTriggerPattern<V> | MenuBarPattern<V> | MenuPattern<V> | undefined> = computed(\n    () => {\n      const parent = this.inputs.parent();\n\n      if (!parent) {\n        return this;\n      }\n\n      if (parent instanceof MenuTriggerPattern) {\n        return parent;\n      }\n\n      const grandparent = parent.inputs.parent();\n\n      if (grandparent instanceof MenuBarPattern) {\n        return grandparent;\n      }\n\n      return grandparent?.root();\n    },\n  );\n\n  /** Handles keyboard events for the menu. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on('ArrowDown', () => this.next())\n      .on('ArrowUp', () => this.prev())\n      .on('Home', () => this.first())\n      .on('End', () => this.last())\n      .on('Enter', () => this.trigger())\n      .on('Escape', () => this.closeAll())\n      .on(this._expandKey, () => this.expand())\n      .on(this._collapseKey, () => this.collapse())\n      .on(this.dynamicSpaceKey, () => this.trigger())\n      .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n  });\n\n  constructor(readonly inputs: MenuInputs<V>) {\n    this.id = inputs.id;\n    this.listBehavior = new List<MenuItemPattern<V>, V>({\n      ...inputs,\n      values: signal([]),\n    });\n  }\n\n  /** Sets the default state for the menu. */\n  setDefaultState() {\n    if (!this.inputs.parent()) {\n      this.listBehavior.goto(this.inputs.items()[0], {focusElement: false});\n    }\n  }\n\n  /** Handles keyboard events for the menu. */\n  onKeydown(event: KeyboardEvent) {\n    this.keydownManager().handle(event);\n  }\n\n  /** Handles mouseover events for the menu. */\n  onMouseOver(event: MouseEvent) {\n    if (!this.visible()) {\n      return;\n    }\n\n    this.hasBeenHovered.set(true);\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (!item) {\n      return;\n    }\n\n    const parent = this.inputs.parent();\n    const activeItem = this?.inputs.activeItem();\n\n    if (parent instanceof MenuItemPattern) {\n      const grandparent = parent.inputs.parent();\n      if (grandparent instanceof MenuPattern) {\n        grandparent._clearTimeouts();\n        grandparent.listBehavior.goto(parent, {focusElement: false});\n      }\n    }\n\n    if (activeItem && activeItem !== item) {\n      this._closeItem(activeItem);\n    }\n\n    if (item.expanded()) {\n      this._clearCloseTimeout();\n    }\n\n    this._openItem(item);\n    this.listBehavior.goto(item, {focusElement: this.shouldFocus()});\n  }\n\n  /** Closes the specified menu item after a delay. */\n  private _closeItem(item: MenuItemPattern<V>) {\n    this._clearOpenTimeout();\n\n    if (!this._closeTimeout) {\n      this._closeTimeout = setTimeout(() => {\n        item.close();\n        this._closeTimeout = undefined;\n      }, this.inputs.expansionDelay());\n    }\n  }\n\n  /** Opens the specified menu item after a delay. */\n  private _openItem(item: MenuItemPattern<V>) {\n    this._clearOpenTimeout();\n\n    this._openTimeout = setTimeout(() => {\n      item.open();\n      this._openTimeout = undefined;\n    }, this.inputs.expansionDelay());\n  }\n\n  /** Handles mouseout events for the menu. */\n  onMouseOut(event: MouseEvent) {\n    this._clearOpenTimeout();\n\n    if (this.isFocused()) {\n      return;\n    }\n\n    const root = this.root();\n    const parent = this.inputs.parent();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!root || !parent || parent instanceof MenuTriggerPattern) {\n      return;\n    }\n\n    const grandparent = parent.inputs.parent();\n\n    if (!grandparent || grandparent instanceof MenuBarPattern) {\n      return;\n    }\n\n    if (!grandparent.inputs.element()?.contains(relatedTarget)) {\n      parent.close();\n    }\n  }\n\n  /** Handles click events for the menu. */\n  onClick(event: MouseEvent) {\n    const relatedTarget = event.target as Node | null;\n    const item = this.inputs.items().find(i => i.element()?.contains(relatedTarget));\n\n    if (item) {\n      item.open();\n      this.listBehavior.goto(item);\n      this.submit(item);\n    }\n  }\n\n  /** Handles focusin events for the menu. */\n  onFocusIn() {\n    this.isFocused.set(true);\n    this.hasBeenFocused.set(true);\n  }\n\n  /** Handles the focusout event for the menu. */\n  onFocusOut(event: FocusEvent) {\n    const parent = this.inputs.parent();\n    const parentEl = parent?.inputs.element();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!relatedTarget) {\n      this.isFocused.set(false);\n      this.inputs.parent()?.close({refocus: true});\n    }\n\n    if (parent instanceof MenuItemPattern) {\n      const grandparent = parent.inputs.parent();\n      const siblings = grandparent?.inputs.items().filter(i => i !== parent);\n      const item = siblings?.find(i => i.element()?.contains(relatedTarget));\n\n      if (item) {\n        return;\n      }\n    }\n\n    if (\n      this.visible() &&\n      !parentEl?.contains(relatedTarget) &&\n      !this.inputs.element()?.contains(relatedTarget)\n    ) {\n      this.isFocused.set(false);\n      this.inputs.parent()?.close();\n    }\n  }\n\n  /** Focuses the previous menu item. */\n  prev() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.prev();\n  }\n\n  /** Focuses the next menu item. */\n  next() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.next();\n  }\n\n  /** Focuses the first menu item. */\n  first() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.first();\n  }\n\n  /** Focuses the last menu item. */\n  last() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.last();\n  }\n\n  /** Triggers the active menu item. */\n  trigger() {\n    this.inputs.activeItem()?.hasPopup()\n      ? this.inputs.activeItem()?.open({first: true})\n      : this.submit();\n  }\n\n  /** Submits the menu. */\n  submit(item = this.inputs.activeItem()) {\n    const root = this.root();\n\n    if (item && !item.disabled()) {\n      const isMenu = root instanceof MenuPattern;\n      const isMenuBar = root instanceof MenuBarPattern;\n      const isMenuTrigger = root instanceof MenuTriggerPattern;\n\n      if (!item.submenu() && isMenuTrigger) {\n        root.close({refocus: true});\n      }\n\n      if (!item.submenu() && isMenuBar) {\n        root.close();\n        root?.inputs.onSelect?.(item.value());\n      }\n\n      if (!item.submenu() && isMenu) {\n        root.inputs.activeItem()?.close({refocus: true});\n        root?.inputs.onSelect?.(item.value());\n      }\n    }\n  }\n\n  /** Collapses the current menu or focuses the previous item in the menubar. */\n  collapse() {\n    const root = this.root();\n    const parent = this.inputs.parent();\n\n    if (parent instanceof MenuItemPattern && !(parent.inputs.parent() instanceof MenuBarPattern)) {\n      parent.close({refocus: true});\n    } else if (root instanceof MenuBarPattern) {\n      root.prev();\n    }\n  }\n\n  /** Expands the current menu or focuses the next item in the menubar. */\n  expand() {\n    const root = this.root();\n    const activeItem = this.inputs.activeItem();\n\n    if (activeItem?.submenu()) {\n      activeItem.open({first: true});\n    } else if (root instanceof MenuBarPattern) {\n      root.next();\n    }\n  }\n\n  /** Closes the menu. */\n  close() {\n    this.inputs.parent()?.close();\n  }\n\n  /** Closes the menu and all parent menus. */\n  closeAll() {\n    const root = this.root();\n\n    if (root instanceof MenuTriggerPattern) {\n      root.close({refocus: true});\n    }\n\n    if (root instanceof MenuBarPattern) {\n      root.close();\n    }\n\n    if (root instanceof MenuPattern) {\n      root.inputs.activeItem()?.close({refocus: true});\n    }\n  }\n\n  /** Clears any open or close timeouts for sub-menus. */\n  _clearTimeouts() {\n    this._clearOpenTimeout();\n    this._clearCloseTimeout();\n  }\n\n  /** Clears the open timeout. */\n  _clearOpenTimeout() {\n    if (this._openTimeout) {\n      clearTimeout(this._openTimeout);\n      this._openTimeout = undefined;\n    }\n  }\n\n  /** Clears the close timeout. */\n  _clearCloseTimeout() {\n    if (this._closeTimeout) {\n      clearTimeout(this._closeTimeout);\n      this._closeTimeout = undefined;\n    }\n  }\n}\n\n/** The menubar ui pattern class. */\nexport class MenuBarPattern<V> {\n  /** Controls list behavior for the menu items. */\n  listBehavior: List<MenuItemPattern<V>, V>;\n\n  /** The tab index of the menu. */\n  tabIndex = () => this.listBehavior.tabIndex();\n\n  /** The key used to navigate to the next item. */\n  private _nextKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key used to navigate to the previous item. */\n  private _previousKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** The regexp used to decide if a key should trigger typeahead. */\n  typeaheadRegexp = /^.$/;\n\n  /** Whether the menubar or any of its children are currently focused. */\n  isFocused = signal(false);\n\n  /** Whether the menubar has been focused. */\n  hasBeenFocused = signal(false);\n\n  /** Whether the menubar is disabled. */\n  disabled = () => this.inputs.disabled();\n\n  /** Handles keyboard events for the menu. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on(this._nextKey, () => this.next())\n      .on(this._previousKey, () => this.prev())\n      .on('End', () => this.listBehavior.last())\n      .on('Home', () => this.listBehavior.first())\n      .on('Enter', () => this.inputs.activeItem()?.open({first: true}))\n      .on('ArrowUp', () => this.inputs.activeItem()?.open({last: true}))\n      .on('ArrowDown', () => this.inputs.activeItem()?.open({first: true}))\n      .on(this.dynamicSpaceKey, () => this.inputs.activeItem()?.open({first: true}))\n      .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n  });\n\n  constructor(readonly inputs: MenuBarInputs<V>) {\n    this.listBehavior = new List<MenuItemPattern<V>, V>(inputs);\n  }\n\n  /** Sets the default state for the menubar. */\n  setDefaultState() {\n    this.inputs.activeItem.set(this.inputs.items()[0]);\n  }\n\n  /** Handles keyboard events for the menu. */\n  onKeydown(event: KeyboardEvent) {\n    this.keydownManager().handle(event);\n  }\n\n  /** Handles click events for the menu bar. */\n  onClick(event: MouseEvent) {\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (!item) {\n      return;\n    }\n\n    this.goto(item);\n    item.expanded() ? item.close() : item.open();\n  }\n\n  /** Handles mouseover events for the menu bar. */\n  onMouseOver(event: MouseEvent) {\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (item) {\n      this.goto(item, {focusElement: this.isFocused()});\n    }\n  }\n\n  /** Handles focusin events for the menu bar. */\n  onFocusIn() {\n    this.isFocused.set(true);\n    this.hasBeenFocused.set(true);\n  }\n\n  /** Handles focusout events for the menu bar. */\n  onFocusOut(event: FocusEvent) {\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!this.inputs.element()?.contains(relatedTarget)) {\n      this.isFocused.set(false);\n      this.close();\n    }\n  }\n\n  /** Goes to and optionally focuses the specified menu item. */\n  goto(item: MenuItemPattern<V>, opts?: {focusElement?: boolean}) {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.goto(item, opts);\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open();\n    }\n\n    if (item === prevItem) {\n      if (item.expanded() && item.submenu()?.inputs.activeItem()) {\n        item.submenu()?.inputs.activeItem()?.close();\n        item.submenu()?.listBehavior.unfocus();\n      }\n    }\n  }\n\n  /** Focuses the next menu item. */\n  next() {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.next();\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open({first: true});\n    }\n  }\n\n  /** Focuses the previous menu item. */\n  prev() {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.prev();\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open({first: true});\n    }\n  }\n\n  /** Closes the menubar and refocuses the root menu bar item. */\n  close() {\n    this.inputs.activeItem()?.close({refocus: this.isFocused()});\n  }\n}\n\n/** The menu trigger ui pattern class. */\nexport class MenuTriggerPattern<V> {\n  /** Whether the menu is expanded. */\n  expanded = signal(false);\n\n  /** Whether the menu trigger has received focus. */\n  hasBeenFocused = signal(false);\n\n  /** The role of the menu trigger. */\n  role = () => 'button';\n\n  /** Whether the menu trigger has a popup. */\n  hasPopup = () => true;\n\n  /** The menu associated with the trigger. */\n  menu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** The tab index of the menu trigger. */\n  tabIndex = computed(() => (this.expanded() && this.menu()?.inputs.activeItem() ? -1 : 0));\n\n  /** Whether the menu trigger is disabled. */\n  disabled = () => this.inputs.disabled();\n\n  /** Handles keyboard events for the menu trigger. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on(' ', () => this.open({first: true}))\n      .on('Enter', () => this.open({first: true}))\n      .on('ArrowDown', () => this.open({first: true}))\n      .on('ArrowUp', () => this.open({last: true}))\n      .on('Escape', () => this.close({refocus: true}));\n  });\n\n  constructor(readonly inputs: MenuTriggerInputs<V>) {\n    this.menu = this.inputs.menu;\n  }\n\n  /** Handles keyboard events for the menu trigger. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.inputs.disabled()) {\n      this.keydownManager().handle(event);\n    }\n  }\n\n  /** Handles click events for the menu trigger. */\n  onClick() {\n    if (!this.inputs.disabled()) {\n      this.expanded() ? this.close() : this.open({first: true});\n    }\n  }\n\n  /** Handles focusin events for the menu trigger. */\n  onFocusIn() {\n    this.hasBeenFocused.set(true);\n  }\n\n  /** Handles focusout events for the menu trigger. */\n  onFocusOut(event: FocusEvent) {\n    const element = this.inputs.element();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (\n      this.expanded() &&\n      !element?.contains(relatedTarget) &&\n      !this.inputs.menu()?.inputs.element()?.contains(relatedTarget)\n    ) {\n      this.close();\n    }\n  }\n\n  /** Opens the menu. */\n  open(opts?: {first?: boolean; last?: boolean}) {\n    this.expanded.set(true);\n\n    if (opts?.first) {\n      this.inputs.menu()?.first();\n    } else if (opts?.last) {\n      this.inputs.menu()?.last();\n    }\n  }\n\n  /** Closes the menu. */\n  close(opts: {refocus?: boolean} = {}) {\n    this.expanded.set(false);\n    this.menu()?.listBehavior.unfocus();\n\n    if (opts.refocus) {\n      this.inputs.element()?.focus();\n    }\n\n    let menuitems = this.inputs.menu()?.inputs.items() ?? [];\n\n    while (menuitems.length) {\n      const menuitem = menuitems.pop();\n      menuitem?._expanded.set(false);\n      menuitem?.inputs.parent()?.listBehavior.unfocus();\n      menuitems = menuitems.concat(menuitem?.submenu()?.inputs.items() ?? []);\n    }\n  }\n}\n\n/** The menu item ui pattern class. */\nexport class MenuItemPattern<V> implements ListItem<V> {\n  /** The value of the menu item. */\n  value: SignalLike<V>;\n\n  /** The unique ID of the menu item. */\n  id: SignalLike<string>;\n\n  /** Whether the menu item is disabled. */\n  disabled = () => this.inputs.parent()?.disabled() || this.inputs.disabled();\n\n  /** The search term for the menu item. */\n  searchTerm: SignalLike<string>;\n\n  /** The element of the menu item. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  /** Whether the menu item is active. */\n  active = computed(() => this.inputs.parent()?.inputs.activeItem() === this);\n\n  /** Whether the menu item has received focus. */\n  hasBeenFocused = signal(false);\n\n  /** The tab index of the menu item. */\n  tabIndex = computed(() => {\n    if (this.submenu() && this.submenu()?.inputs.activeItem()) {\n      return -1;\n    }\n    return this.inputs.parent()?.listBehavior.getItemTabindex(this) ?? -1;\n  });\n\n  /** The position of the menu item in the menu. */\n  index = computed(() => this.inputs.parent()?.inputs.items().indexOf(this) ?? -1);\n\n  /** Whether the menu item is expanded. */\n  expanded = computed(() => (this.submenu() ? this._expanded() : null));\n\n  /** Whether the menu item is expanded. */\n  _expanded = signal(false);\n\n  /** The ID of the menu that the menu item controls. */\n  controls = signal<string | undefined>(undefined);\n\n  /** The role of the menu item. */\n  role = () => 'menuitem';\n\n  /** Whether the menu item has a popup. */\n  hasPopup = computed(() => !!this.submenu());\n\n  /** The submenu associated with the menu item. */\n  submenu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** Whether the menu item is selectable. */\n  selectable: SignalLike<boolean>;\n\n  constructor(readonly inputs: MenuItemInputs<V>) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.element = inputs.element;\n    this.submenu = this.inputs.submenu;\n    this.searchTerm = inputs.searchTerm;\n    this.selectable = computed(() => !this.submenu());\n  }\n\n  /** Opens the submenu. */\n  open(opts?: {first?: boolean; last?: boolean}) {\n    if (this.disabled()) {\n      return;\n    }\n\n    this._expanded.set(true);\n\n    if (opts?.first) {\n      this.submenu()?.first();\n    }\n    if (opts?.last) {\n      this.submenu()?.last();\n    }\n  }\n\n  /** Closes the submenu. */\n  close(opts: {refocus?: boolean} = {}) {\n    this._expanded.set(false);\n\n    if (opts.refocus) {\n      this.inputs.parent()?.listBehavior.goto(this);\n    }\n\n    let menuitems = this.inputs.submenu()?.inputs.items() ?? [];\n\n    while (menuitems.length) {\n      const menuitem = menuitems.pop();\n      menuitem?._expanded.set(false);\n      menuitem?.inputs.parent()?.listBehavior.unfocus();\n      menuitems = menuitems.concat(menuitem?.submenu()?.inputs.items() ?? []);\n\n      const parent = menuitem?.inputs.parent();\n\n      if (parent instanceof MenuPattern) {\n        parent._clearTimeouts();\n      }\n    }\n  }\n\n  /** Handles focusin events for the menu item. */\n  onFocusIn() {\n    this.hasBeenFocused.set(true);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nexport type SignalLike<T> = () => T;\n\nexport interface WritableSignalLike<T> extends SignalLike<T> {\n  set(value: T): void;\n  update(updateFn: (value: T) => T): void;\n}\n\n/** Converts a getter setter style signal to a WritableSignalLike. */\nexport function convertGetterSetterToWritableSignalLike<T>(\n  getter: () => T,\n  setter: (v: T) => void,\n): WritableSignalLike<T> {\n  // tslint:disable-next-line:ban Have to use `Object.assign` to preserve the getter function.\n  return Object.assign(getter, {\n    set: setter,\n    update: (updateCallback: (v: T) => T) => setter(updateCallback(getter())),\n  });\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {SignalLike, WritableSignalLike} from '../signal-like/signal-like';\n\n/** Represents an item that can be expanded or collapsed. */\nexport interface ExpansionItem {\n  /** Whether the item is expandable. */\n  expandable: SignalLike<boolean>;\n\n  /** Whether the item is expanded. */\n  expanded: WritableSignalLike<boolean>;\n\n  /** Whether the expansion is disabled. */\n  disabled: SignalLike<boolean>;\n}\n\n/** Represents the required inputs for an expansion behavior. */\nexport interface ListExpansionInputs {\n  /** Whether multiple items can be expanded at once. */\n  multiExpandable: SignalLike<boolean>;\n\n  /** An array of expansion items. */\n  items: SignalLike<ExpansionItem[]>;\n\n  /** Whether all expansions are disabled. */\n  disabled: SignalLike<boolean>;\n}\n\n/** Manages the expansion state of a list of items. */\nexport class ListExpansion {\n  constructor(readonly inputs: ListExpansionInputs) {}\n\n  /** Opens the specified item. */\n  open(item: ExpansionItem): boolean {\n    if (!this.isExpandable(item)) return false;\n    if (item.expanded()) return false;\n    if (!this.inputs.multiExpandable()) {\n      this.closeAll();\n    }\n    item.expanded.set(true);\n    return true;\n  }\n\n  /** Closes the specified item. */\n  close(item: ExpansionItem): boolean {\n    if (!this.isExpandable(item)) return false;\n\n    item.expanded.set(false);\n    return true;\n  }\n\n  /** Toggles the expansion state of the specified item. */\n  toggle(item: ExpansionItem): boolean {\n    return item.expanded() ? this.close(item) : this.open(item);\n  }\n\n  /** Opens all focusable items in the list. */\n  openAll(): void {\n    if (this.inputs.multiExpandable()) {\n      for (const item of this.inputs.items()) {\n        this.open(item);\n      }\n    }\n  }\n\n  /** Closes all focusable items in the list. */\n  closeAll(): void {\n    for (const item of this.inputs.items()) {\n      this.close(item);\n    }\n  }\n\n  /** Checks whether the specified item is expandable / collapsible. */\n  isExpandable(item: ExpansionItem) {\n    return !this.inputs.disabled() && !item.disabled() && item.expandable();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../signal-like/signal-like';\n\n/** Represents the required inputs for the label control. */\nexport interface LabelControlInputs {\n  /** The default `aria-labelledby` ids. */\n  defaultLabelledBy: SignalLike<string[]>;\n}\n\n/** Represents the optional inputs for the label control. */\nexport interface LabelControlOptionalInputs {\n  /** The `aria-label`. */\n  label?: SignalLike<string | undefined>;\n\n  /** The user-provided `aria-labelledby` ids. */\n  labelledBy?: SignalLike<string[]>;\n}\n\n/** Controls label and description of an element. */\nexport class LabelControl {\n  /** The `aria-label`. */\n  readonly label = computed(() => this.inputs.label?.());\n\n  /** The `aria-labelledby` ids. */\n  readonly labelledBy = computed(() => {\n    const label = this.label();\n    const labelledBy = this.inputs.labelledBy?.();\n    const defaultLabelledBy = this.inputs.defaultLabelledBy();\n\n    if (labelledBy && labelledBy.length > 0) {\n      return labelledBy;\n    }\n\n    // If an aria-label is provided by developers, do not set aria-labelledby with the\n    // defaultLabelledBy value because if both attributes are set, aria-labelledby will be used.\n    if (label) {\n      return [];\n    }\n\n    return defaultLabelledBy;\n  });\n\n  constructor(readonly inputs: LabelControlInputs & LabelControlOptionalInputs) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal, WritableSignal} from '@angular/core';\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {ExpansionItem, ListExpansionInputs, ListExpansion} from '../behaviors/expansion/expansion';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\nimport {LabelControl, LabelControlOptionalInputs} from '../behaviors/label/label';\nimport {ListFocus} from '../behaviors/list-focus/list-focus';\nimport {\n  ListNavigationItem,\n  ListNavigation,\n  ListNavigationInputs,\n} from '../behaviors/list-navigation/list-navigation';\n\n/** The required inputs to tabs. */\nexport interface TabInputs\n  extends Omit<ListNavigationItem, 'index'>, Omit<ExpansionItem, 'expandable'> {\n  /** The parent tablist that controls the tab. */\n  tablist: SignalLike<TabListPattern>;\n\n  /** The remote tabpanel controlled by the tab. */\n  tabpanel: SignalLike<TabPanelPattern | undefined>;\n\n  /** The remote tabpanel unique identifier. */\n  value: SignalLike<string>;\n}\n\n/** A tab in a tablist. */\nexport class TabPattern {\n  /** A global unique identifier for the tab. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The index of the tab. */\n  readonly index = computed(() => this.inputs.tablist().inputs.items().indexOf(this));\n\n  /** The remote tabpanel unique identifier. */\n  readonly value: SignalLike<string> = () => this.inputs.value();\n\n  /** Whether the tab is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The html element that should receive focus. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether this tab has expandable panel. */\n  readonly expandable: SignalLike<boolean> = () => true;\n\n  /** Whether the tab panel is expanded. */\n  readonly expanded: WritableSignalLike<boolean>;\n\n  /** Whether the tab is active. */\n  readonly active = computed(() => this.inputs.tablist().inputs.activeItem() === this);\n\n  /** Whether the tab is selected. */\n  readonly selected = computed(() => this.inputs.tablist().selectedTab() === this);\n\n  /** The tab index of the tab. */\n  readonly tabIndex = computed(() => this.inputs.tablist().focusBehavior.getItemTabIndex(this));\n\n  /** The id of the tabpanel associated with the tab. */\n  readonly controls = computed(() => this.inputs.tabpanel()?.id());\n\n  constructor(readonly inputs: TabInputs) {\n    this.expanded = inputs.expanded;\n  }\n\n  /** Opens the tab. */\n  open(): boolean {\n    return this.inputs.tablist().open(this);\n  }\n}\n\n/** The required inputs for the tabpanel. */\nexport interface TabPanelInputs extends LabelControlOptionalInputs {\n  /** A global unique identifier for the tabpanel. */\n  id: SignalLike<string>;\n\n  /** The tab that controls this tabpanel. */\n  tab: SignalLike<TabPattern | undefined>;\n\n  /** A local unique identifier for the tabpanel. */\n  value: SignalLike<string>;\n}\n\n/** A tabpanel associated with a tab. */\nexport class TabPanelPattern {\n  /** A global unique identifier for the tabpanel. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** A local unique identifier for the tabpanel. */\n  readonly value: SignalLike<string> = () => this.inputs.value();\n\n  /** Controls label for this tabpanel. */\n  readonly labelManager: LabelControl;\n\n  /** Whether the tabpanel is hidden. */\n  readonly hidden = computed(() => this.inputs.tab()?.expanded() === false);\n\n  /** The tab index of this tabpanel. */\n  readonly tabIndex = computed(() => (this.hidden() ? -1 : 0));\n\n  /** The aria-labelledby value for this tabpanel. */\n  readonly labelledBy = computed(() =>\n    this.labelManager.labelledBy().length > 0\n      ? this.labelManager.labelledBy().join(' ')\n      : undefined,\n  );\n\n  constructor(readonly inputs: TabPanelInputs) {\n    this.labelManager = new LabelControl({\n      ...inputs,\n      defaultLabelledBy: computed(() => (this.inputs.tab() ? [this.inputs.tab()!.id()] : [])),\n    });\n  }\n}\n\n/** The required inputs for the tablist. */\nexport interface TabListInputs\n  extends\n    Omit<ListNavigationInputs<TabPattern>, 'multi'>,\n    Omit<ListExpansionInputs, 'multiExpandable' | 'items'> {\n  /** The selection strategy used by the tablist. */\n  selectionMode: SignalLike<'follow' | 'explicit'>;\n}\n\n/** Controls the state of a tablist. */\nexport class TabListPattern {\n  /** The list focus behavior for the tablist. */\n  readonly focusBehavior: ListFocus<TabPattern>;\n\n  /** The list navigation behavior for the tablist. */\n  readonly navigationBehavior: ListNavigation<TabPattern>;\n\n  /** Controls expansion for the tablist. */\n  readonly expansionBehavior: ListExpansion;\n\n  /** The currently active tab. */\n  readonly activeTab: SignalLike<TabPattern | undefined> = () => this.inputs.activeItem();\n\n  /** The currently selected tab. */\n  readonly selectedTab: WritableSignal<TabPattern | undefined> = signal(undefined);\n\n  /** Whether the tablist is vertically or horizontally oriented. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'> = () => this.inputs.orientation();\n\n  /** Whether the tablist is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The tab index of the tablist. */\n  readonly tabIndex = computed(() => this.focusBehavior.getListTabIndex());\n\n  /** The id of the current active tab. */\n  readonly activeDescendant = computed(() => this.focusBehavior.getActiveDescendant());\n\n  /** Whether selection should follow focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** The key used to navigate to the previous tab in the tablist. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next item in the list. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The keydown event manager for the tablist. */\n  readonly keydown = computed(() => {\n    return new KeyboardEventManager()\n      .on(this.prevKey, () =>\n        this._navigate(() => this.navigationBehavior.prev(), this.followFocus()),\n      )\n      .on(this.nextKey, () =>\n        this._navigate(() => this.navigationBehavior.next(), this.followFocus()),\n      )\n      .on('Home', () => this._navigate(() => this.navigationBehavior.first(), this.followFocus()))\n      .on('End', () => this._navigate(() => this.navigationBehavior.last(), this.followFocus()))\n      .on(' ', () => this.open())\n      .on('Enter', () => this.open());\n  });\n\n  /** The pointerdown event manager for the tablist. */\n  readonly pointerdown = computed(() => {\n    return new PointerEventManager().on(e =>\n      this._navigate(() => this.navigationBehavior.goto(this._getItem(e)!), true),\n    );\n  });\n\n  constructor(readonly inputs: TabListInputs) {\n    this.focusBehavior = new ListFocus(inputs);\n\n    this.navigationBehavior = new ListNavigation({\n      ...inputs,\n      focusManager: this.focusBehavior,\n    });\n\n    this.expansionBehavior = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => false,\n    });\n  }\n\n  /**\n   * Sets the tablist to its default initial state.\n   *\n   * Sets the active index of the tablist to the first focusable selected\n   * tab if one exists. Otherwise, sets focus to the first focusable tab.\n   *\n   * This method should be called once the tablist and its tabs are properly initialized.\n   */\n  setDefaultState() {\n    let firstItem: TabPattern | undefined;\n\n    for (const item of this.inputs.items()) {\n      if (!this.focusBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.inputs.activeItem.set(item);\n        return;\n      }\n    }\n    if (firstItem !== undefined) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events for the tablist. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** The pointerdown event manager for the tablist. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Opens the tab by given value. */\n  open(value: string): boolean;\n\n  /** Opens the given tab or the current active tab. */\n  open(tab?: TabPattern): boolean;\n\n  open(tab: TabPattern | string | undefined): boolean {\n    tab ??= this.activeTab();\n\n    if (typeof tab === 'string') {\n      tab = this.inputs.items().find(t => t.value() === tab);\n    }\n\n    if (tab === undefined) return false;\n\n    const success = this.expansionBehavior.open(tab);\n    if (success) {\n      this.selectedTab.set(tab);\n    }\n\n    return success;\n  }\n\n  /** Executes a navigation operation and expand the active tab if needed. */\n  private _navigate(op: () => boolean, shouldExpand: boolean = false): void {\n    const success = op();\n    if (success && shouldExpand) {\n      this.open();\n    }\n  }\n\n  /** Returns the tab item associated with the given pointer event. */\n  private _getItem(e: PointerEvent) {\n    if (!(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const element = e.target.closest('[role=\"tab\"]');\n    return this.inputs.items().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {KeyboardEventManager} from '../behaviors/event-manager';\nimport {List, ListInputs} from '../behaviors/list/list';\nimport {ToolbarWidgetPattern} from './toolbar-widget';\n\n/** Represents the required inputs for a toolbar. */\nexport type ToolbarInputs<V> = Omit<\n  ListInputs<ToolbarWidgetPattern<V>, V>,\n  'multi' | 'typeaheadDelay' | 'selectionMode' | 'focusMode'\n> & {\n  /** A function that returns the toolbar item associated with a given element. */\n  getItem: (e: Element) => ToolbarWidgetPattern<V> | undefined;\n};\n\n/** Controls the state of a toolbar. */\nexport class ToolbarPattern<V> {\n  /** The list behavior for the toolbar. */\n  readonly listBehavior: List<ToolbarWidgetPattern<V>, V>;\n\n  /** Whether the tablist is vertically or horizontally oriented. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** Whether disabled items in the group should be focusable. */\n  readonly softDisabled: SignalLike<boolean>;\n\n  /** Whether the toolbar is disabled. */\n  readonly disabled = computed(() => this.listBehavior.disabled());\n\n  /** The tab index of the toolbar (if using activedescendant). */\n  readonly tabIndex = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active widget (if using activedescendant). */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** The currently active item in the toolbar. */\n  readonly activeItem = () => this.listBehavior.inputs.activeItem();\n\n  /** The key used to navigate to the previous widget. */\n  private readonly _prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next widget. */\n  private readonly _nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The alternate key used to navigate to the previous widget. */\n  private readonly _altPrevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n    }\n    return 'ArrowUp';\n  });\n\n  /** The alternate key used to navigate to the next widget. */\n  private readonly _altNextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n    }\n    return 'ArrowDown';\n  });\n\n  /** The keydown event manager for the toolbar. */\n  private readonly _keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n\n    return manager\n      .on(this._nextKey, () => this.listBehavior.next())\n      .on(this._prevKey, () => this.listBehavior.prev())\n      .on(this._altNextKey, () => this._groupNext())\n      .on(this._altPrevKey, () => this._groupPrev())\n      .on(' ', () => this.select())\n      .on('Enter', () => this.select())\n      .on('Home', () => this.listBehavior.first())\n      .on('End', () => this.listBehavior.last());\n  });\n\n  /** Navigates to the next widget in a widget group. */\n  private _groupNext() {\n    const currGroup = this.inputs.activeItem()?.group();\n    const nextGroup = this.listBehavior.navigationBehavior.peekNext()?.group();\n\n    if (!currGroup) {\n      return;\n    }\n\n    if (currGroup !== nextGroup) {\n      this.listBehavior.goto(\n        this.listBehavior.navigationBehavior.peekFirst(currGroup.inputs.items())!,\n      );\n\n      return;\n    }\n\n    this.listBehavior.next();\n  }\n\n  /** Navigates to the previous widget in a widget group. */\n  private _groupPrev() {\n    const currGroup = this.inputs.activeItem()?.group();\n    const nextGroup = this.listBehavior.navigationBehavior.peekPrev()?.group();\n\n    if (!currGroup) {\n      return;\n    }\n\n    if (currGroup !== nextGroup) {\n      this.listBehavior.goto(\n        this.listBehavior.navigationBehavior.peekLast(currGroup.inputs.items())!,\n      );\n\n      return;\n    }\n\n    this.listBehavior.prev();\n  }\n\n  /** Navigates to the widget targeted by a pointer event. */\n  private _goto(e: MouseEvent) {\n    const item = this.inputs.getItem(e.target as Element);\n\n    if (item) {\n      this.listBehavior.goto(item);\n      this.select();\n    }\n  }\n\n  select() {\n    const group = this.inputs.activeItem()?.group();\n\n    if (!group?.multi()) {\n      group?.inputs.items().forEach(i => this.listBehavior.deselect(i));\n    }\n\n    this.listBehavior.toggle();\n  }\n\n  constructor(readonly inputs: ToolbarInputs<V>) {\n    this.orientation = inputs.orientation;\n    this.softDisabled = inputs.softDisabled;\n\n    this.listBehavior = new List({\n      ...inputs,\n      multi: () => true,\n      focusMode: () => 'roving',\n      selectionMode: () => 'explicit',\n      typeaheadDelay: () => 0, // Toolbar widgets do not support typeahead.\n    });\n  }\n\n  /** Handles keydown events for the toolbar. */\n  onKeydown(event: KeyboardEvent) {\n    if (this.disabled()) return;\n    this._keydown().handle(event);\n  }\n\n  onPointerdown(event: PointerEvent) {\n    event.preventDefault();\n  }\n\n  /** Handles click events for the toolbar. */\n  onClick(event: MouseEvent) {\n    if (this.disabled()) return;\n    this._goto(event);\n  }\n\n  /**\n   * Sets the toolbar to its default initial state.\n   *\n   * Sets the active index to the selected widget if one exists and is focusable.\n   * Otherwise, sets the active index to the first focusable widget.\n   */\n  setDefaultState() {\n    const firstItem = this.listBehavior.navigationBehavior.peekFirst(this.inputs.items());\n\n    if (firstItem) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  /** Validates the state of the toolbar and returns a list of accessibility violations. */\n  validate(): string[] {\n    const violations: string[] = [];\n    return violations;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {ListItem} from '../behaviors/list/list';\nimport type {ToolbarPattern} from './toolbar';\nimport {ToolbarWidgetGroupPattern} from './toolbar-widget-group';\n\n/** Represents the required inputs for a toolbar widget in a toolbar. */\nexport interface ToolbarWidgetInputs<V> extends Omit<\n  ListItem<V>,\n  'searchTerm' | 'index' | 'selectable'\n> {\n  /** A reference to the parent toolbar. */\n  toolbar: SignalLike<ToolbarPattern<V>>;\n\n  /** A reference to the parent widget group. */\n  group: SignalLike<ToolbarWidgetGroupPattern<ToolbarWidgetPattern<V>, V> | undefined>;\n}\n\nexport class ToolbarWidgetPattern<V> implements ListItem<V> {\n  /** A unique identifier for the widget. */\n  readonly id = () => this.inputs.id();\n\n  /** The html element that should receive focus. */\n  readonly element = () => this.inputs.element();\n\n  /** Whether the widget is disabled. */\n  readonly disabled = () => this.inputs.disabled() || this.group()?.disabled() || false;\n\n  /** A reference to the parent toolbar. */\n  readonly group = () => this.inputs.group();\n\n  /** A reference to the toolbar containing the widget. */\n  readonly toolbar = () => this.inputs.toolbar();\n\n  /** The tabindex of the widget. */\n  readonly tabIndex = computed(() => this.toolbar().listBehavior.getItemTabindex(this));\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm = () => ''; // Unused because toolbar does not support typeahead.\n\n  /** The value associated with the widget. */\n  readonly value = () => this.inputs.value();\n\n  /** Whether the widget is selectable. */\n  readonly selectable = () => true; // Unused because toolbar does not support selection.\n\n  /** The position of the widget within the toolbar. */\n  readonly index = computed(() => this.toolbar().inputs.items().indexOf(this) ?? -1);\n\n  /** Whether the widget is selected (only relevant in a selection group). */\n  readonly selected = computed(() =>\n    this.toolbar().listBehavior.inputs.values().includes(this.value()),\n  );\n\n  /** Whether the widget is currently the active one (focused). */\n  readonly active: SignalLike<boolean> = computed(() => this.toolbar().activeItem() === this);\n\n  constructor(readonly inputs: ToolbarWidgetInputs<V>) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {ListItem} from '../behaviors/list/list';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport type {ToolbarPattern} from './toolbar';\n\n/** Represents the required inputs for a toolbar widget group. */\nexport interface ToolbarWidgetGroupInputs<T extends ListItem<V>, V> {\n  /** A reference to the parent toolbar. */\n  toolbar: SignalLike<ToolbarPattern<V> | undefined>;\n\n  /** Whether the widget group is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The list of items within the widget group. */\n  items: SignalLike<T[]>;\n\n  /** Whether the group allows multiple widgets to be selected. */\n  multi: SignalLike<boolean>;\n}\n\n/** A group of widgets within a toolbar that provides nested navigation. */\nexport class ToolbarWidgetGroupPattern<T extends ListItem<V>, V> {\n  /** Whether the widget is disabled. */\n  readonly disabled = () => this.inputs.disabled();\n\n  /** A reference to the parent toolbar. */\n  readonly toolbar = () => this.inputs.toolbar();\n\n  /** Whether the group allows multiple widgets to be selected. */\n  readonly multi = () => this.inputs.multi();\n\n  readonly searchTerm = () => ''; // Unused because toolbar does not support typeahead.\n  readonly value = () => '' as V; // Unused because toolbar does not support selection.\n  readonly selectable = () => true; // Unused because toolbar does not support selection.\n  readonly element = () => undefined; // Unused because toolbar does not focus the group element.\n\n  constructor(readonly inputs: ToolbarWidgetGroupInputs<T, V>) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {ExpansionItem, ListExpansion, ListExpansionInputs} from '../behaviors/expansion/expansion';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../behaviors/list-focus/list-focus';\nimport {\n  ListNavigation,\n  ListNavigationInputs,\n  ListNavigationItem,\n} from '../behaviors/list-navigation/list-navigation';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\n\n/** Inputs of the AccordionGroupPattern. */\nexport interface AccordionGroupInputs extends Omit<\n  ListNavigationInputs<AccordionTriggerPattern> &\n    ListFocusInputs<AccordionTriggerPattern> &\n    Omit<ListExpansionInputs, 'items'>,\n  'focusMode'\n> {\n  /** A function that returns the trigger associated with a given element. */\n  getItem: (e: Element | null | undefined) => AccordionTriggerPattern | undefined;\n}\n\nconst focusMode = () => 'roving' as const;\n\n/** A pattern controls the nested Accordions. */\nexport class AccordionGroupPattern {\n  /** Controls navigation for the group. */\n  readonly navigationBehavior: ListNavigation<AccordionTriggerPattern>;\n\n  /** Controls focus for the group. */\n  readonly focusBehavior: ListFocus<AccordionTriggerPattern>;\n\n  /** Controls expansion for the group. */\n  readonly expansionBehavior: ListExpansion;\n\n  constructor(readonly inputs: AccordionGroupInputs) {\n    this.focusBehavior = new ListFocus({\n      ...inputs,\n      focusMode,\n    });\n    this.navigationBehavior = new ListNavigation({\n      ...inputs,\n      focusMode,\n      focusManager: this.focusBehavior,\n    });\n    this.expansionBehavior = new ListExpansion({\n      ...inputs,\n    });\n  }\n\n  /** The key used to navigate to the previous accordion trigger. */\n  prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next accordion trigger. */\n  nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The keydown event manager for the accordion trigger. */\n  keydown = computed(() => {\n    return new KeyboardEventManager()\n      .on(this.prevKey, () => this.navigationBehavior.prev())\n      .on(this.nextKey, () => this.navigationBehavior.next())\n      .on('Home', () => this.navigationBehavior.first())\n      .on('End', () => this.navigationBehavior.last())\n      .on(' ', () => this.toggle())\n      .on('Enter', () => this.toggle());\n  });\n\n  /** The pointerdown event manager for the accordion trigger. */\n  pointerdown = computed(() => {\n    return new PointerEventManager().on(e => {\n      const item = this.inputs.getItem(e.target as Element);\n      if (!item) return;\n\n      this.navigationBehavior.goto(item);\n      this.expansionBehavior.toggle(item);\n    });\n  });\n\n  /** Handles keydown events on the trigger, delegating to the group if not disabled. */\n  onKeydown(event: KeyboardEvent): void {\n    this.keydown().handle(event);\n  }\n\n  /** Handles pointerdown events on the trigger, delegating to the group if not disabled. */\n  onPointerdown(event: PointerEvent): void {\n    this.pointerdown().handle(event);\n  }\n\n  /** Handles focus events on the trigger. This ensures the tabbing changes the active index. */\n  onFocus(event: FocusEvent): void {\n    const item = this.inputs.getItem(event.target as Element);\n    if (!item) return;\n    if (!this.focusBehavior.isFocusable(item)) return;\n\n    this.focusBehavior.focus(item);\n  }\n\n  /** Toggles the expansion state of the active accordion item. */\n  toggle() {\n    const activeItem = this.inputs.activeItem();\n    if (activeItem === undefined) return;\n    this.expansionBehavior.toggle(activeItem);\n  }\n}\n\n/** Inputs for the AccordionTriggerPattern. */\nexport interface AccordionTriggerInputs\n  extends Omit<ListNavigationItem & ListFocusItem, 'index'>, Omit<ExpansionItem, 'expandable'> {\n  /** A local unique identifier for the trigger's corresponding panel. */\n  panelId: SignalLike<string>;\n\n  /** The parent accordion group that controls this trigger. */\n  accordionGroup: SignalLike<AccordionGroupPattern>;\n\n  /** The accordion panel controlled by this trigger. */\n  accordionPanel: SignalLike<AccordionPanelPattern | undefined>;\n}\n\n/** A pattern controls the expansion state of an accordion. */\nexport class AccordionTriggerPattern implements ListNavigationItem, ListFocusItem, ExpansionItem {\n  /** A unique identifier for this trigger. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** A reference to the trigger element. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether this trigger has expandable panel. */\n  readonly expandable: SignalLike<boolean> = () => true;\n\n  /** Whether the corresponding panel is expanded. */\n  readonly expanded: WritableSignalLike<boolean>;\n\n  /** Whether the trigger is active. */\n  readonly active = computed(() => this.inputs.accordionGroup().inputs.activeItem() === this);\n\n  /** Id of the accordion panel controlled by the trigger. */\n  readonly controls = computed(() => this.inputs.accordionPanel()?.inputs.id());\n\n  /** The tabindex of the trigger. */\n  readonly tabIndex = computed(() =>\n    this.inputs.accordionGroup().focusBehavior.isFocusable(this) ? 0 : -1,\n  );\n\n  /** Whether the trigger is disabled. Disabling an accordion group disables all the triggers. */\n  readonly disabled = computed(\n    () => this.inputs.disabled() || this.inputs.accordionGroup().inputs.disabled(),\n  );\n\n  /** Whether the trigger is hard disabled.  */\n  readonly hardDisabled = computed(\n    () => this.disabled() && !this.inputs.accordionGroup().inputs.softDisabled(),\n  );\n\n  /** The index of the trigger within its accordion group. */\n  readonly index = computed(() => this.inputs.accordionGroup().inputs.items().indexOf(this));\n\n  constructor(readonly inputs: AccordionTriggerInputs) {\n    this.expanded = inputs.expanded;\n  }\n\n  /** Opens the accordion panel. */\n  open(): void {\n    this.inputs.accordionGroup().expansionBehavior.open(this);\n  }\n\n  /** Closes the accordion panel. */\n  close(): void {\n    this.inputs.accordionGroup().expansionBehavior.close(this);\n  }\n\n  /** Toggles the accordion panel. */\n  toggle(): void {\n    this.inputs.accordionGroup().expansionBehavior.toggle(this);\n  }\n}\n\n/** Represents the required inputs for the AccordionPanelPattern. */\nexport interface AccordionPanelInputs {\n  /** A global unique identifier for the panel. */\n  id: SignalLike<string>;\n\n  /** A local unique identifier for the panel, matching its trigger's panelId. */\n  panelId: SignalLike<string>;\n\n  /** The parent accordion trigger that controls this panel. */\n  accordionTrigger: SignalLike<AccordionTriggerPattern | undefined>;\n}\n\n/** Represents an accordion panel. */\nexport class AccordionPanelPattern {\n  /** A global unique identifier for the panel. */\n  id: SignalLike<string>;\n\n  /** The parent accordion trigger that controls this panel. */\n  accordionTrigger: SignalLike<AccordionTriggerPattern | undefined>;\n\n  /** Whether the accordion panel is hidden. True if the associated trigger is not expanded. */\n  hidden: SignalLike<boolean>;\n\n  constructor(readonly inputs: AccordionPanelInputs) {\n    this.id = inputs.id;\n    this.accordionTrigger = inputs.accordionTrigger;\n    this.hidden = computed(() => inputs.accordionTrigger()?.expanded() === false);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\nimport {ExpansionItem, ListExpansion} from '../behaviors/expansion/expansion';\nimport {KeyboardEventManager, PointerEventManager, Modifier} from '../behaviors/event-manager';\n\n/** Represents the required inputs for a tree item. */\nexport interface TreeItemInputs<V>\n  extends Omit<ListItem<V>, 'index'>, Omit<ExpansionItem, 'expandable'> {\n  /** The parent item. */\n  parent: SignalLike<TreeItemPattern<V> | TreePattern<V>>;\n\n  /** Whether this item has children. Children can be lazily loaded. */\n  hasChildren: SignalLike<boolean>;\n\n  /** The children items. */\n  children: SignalLike<TreeItemPattern<V>[]>;\n\n  /** The tree pattern this item belongs to. */\n  tree: SignalLike<TreePattern<V>>;\n}\n\n/**\n * Represents an item in a Tree.\n */\nexport class TreeItemPattern<V> implements ListItem<V>, ExpansionItem {\n  /** A unique identifier for this item. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The value of this item. */\n  readonly value: SignalLike<V> = () => this.inputs.value();\n\n  /** A reference to the item element. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether the item is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm: SignalLike<string> = () => this.inputs.searchTerm();\n\n  /** The tree pattern this item belongs to. */\n  readonly tree: SignalLike<TreePattern<V>> = () => this.inputs.tree();\n\n  /** The parent item. */\n  readonly parent: SignalLike<TreeItemPattern<V> | TreePattern<V>> = () => this.inputs.parent();\n\n  /** The children items. */\n  readonly children: SignalLike<TreeItemPattern<V>[]> = () => this.inputs.children();\n\n  /** The position of this item among its siblings. */\n  readonly index = computed(() => this.tree().visibleItems().indexOf(this));\n\n  /** Controls expansion for child items. */\n  readonly expansionBehavior: ListExpansion;\n\n  /** Whether the item is expandable. It's expandable if children item exist. */\n  readonly expandable: SignalLike<boolean> = () => this.inputs.hasChildren();\n\n  /** Whether the item is selectable. */\n  readonly selectable: SignalLike<boolean> = () => this.inputs.selectable();\n\n  /** Whether the item is expanded. */\n  readonly expanded: WritableSignalLike<boolean>;\n\n  /** The level of the current item in a tree. */\n  readonly level: SignalLike<number> = computed(() => this.parent().level() + 1);\n\n  /** Whether this item is visible. */\n  readonly visible: SignalLike<boolean> = computed(\n    () => this.parent().expanded() && this.parent().visible(),\n  );\n\n  /** The number of items under the same parent at the same level. */\n  readonly setsize = computed(() => this.parent().children().length);\n\n  /** The position of this item among its siblings (1-based). */\n  readonly posinset = computed(() => this.parent().children().indexOf(this) + 1);\n\n  /** Whether the item is active. */\n  readonly active = computed(() => this.tree().activeItem() === this);\n\n  /** The tab index of the item. */\n  readonly tabIndex = computed(() => this.tree().listBehavior.getItemTabindex(this));\n\n  /** Whether the item is selected. */\n  readonly selected: SignalLike<boolean | undefined> = computed(() => {\n    if (this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().values().includes(this.value());\n  });\n\n  /** The current type of this item. */\n  readonly current: SignalLike<string | undefined> = computed(() => {\n    if (!this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().values().includes(this.value()) ? this.tree().currentType() : undefined;\n  });\n\n  constructor(readonly inputs: TreeItemInputs<V>) {\n    this.expanded = inputs.expanded;\n    this.expansionBehavior = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => true,\n      items: this.children,\n      disabled: computed(() => this.tree()?.disabled() ?? false),\n    });\n  }\n}\n\n/** The selection operations that the tree can perform. */\ninterface SelectOptions {\n  toggle?: boolean;\n  selectOne?: boolean;\n  selectRange?: boolean;\n  anchor?: boolean;\n}\n\n/** Represents the required inputs for a tree. */\nexport interface TreeInputs<V> extends Omit<ListInputs<TreeItemPattern<V>, V>, 'items'> {\n  /** A unique identifier for the tree. */\n  id: SignalLike<string>;\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  allItems: SignalLike<TreeItemPattern<V>[]>;\n\n  /** Whether the tree is in navigation mode. */\n  nav: SignalLike<boolean>;\n\n  /** The aria-current type. */\n  currentType: SignalLike<'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'>;\n}\n\n/** Controls the state and interactions of a tree view. */\nexport class TreePattern<V> implements TreeInputs<V> {\n  /** The list behavior for the tree. */\n  readonly listBehavior: List<TreeItemPattern<V>, V>;\n\n  /** Controls expansion for direct children of the tree root (top-level items). */\n  readonly expansionBehavior: ListExpansion;\n\n  /** The root level is 0. */\n  readonly level = () => 0;\n\n  /** The root is always expanded. */\n  readonly expanded = () => true;\n\n  /** The root is always visible. */\n  readonly visible = () => true;\n\n  /** The tab index of the tree. */\n  readonly tabIndex: SignalLike<-1 | 0> = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active item. */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** The direct children of the root (top-level tree items). */\n  readonly children = computed(() =>\n    this.inputs.allItems().filter(item => item.level() === this.level() + 1),\n  );\n\n  /** All currently visible tree items. An item is visible if their parent is expanded. */\n  readonly visibleItems = computed(() => this.inputs.allItems().filter(item => item.visible()));\n\n  /** Whether the tree selection follows focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** Whether the tree direction is RTL. */\n  readonly isRtl = computed(() => this.inputs.textDirection() === 'rtl');\n\n  /** The key for navigating to the previous item. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.isRtl() ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for navigating to the next item. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.isRtl() ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key for collapsing an item or moving to its parent. */\n  readonly collapseKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowUp';\n    }\n    return this.isRtl() ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for expanding an item or moving to its first child. */\n  readonly expandKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowDown';\n    }\n    return this.isRtl() ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  readonly dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** Regular expression to match characters for typeahead. */\n  readonly typeaheadRegexp = /^.$/;\n\n  /** The keydown event manager for the tree. */\n  readonly keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n    const list = this.listBehavior;\n\n    manager\n      .on(this.prevKey, () => list.prev({selectOne: this.followFocus()}))\n      .on(this.nextKey, () => list.next({selectOne: this.followFocus()}))\n      .on('Home', () => list.first({selectOne: this.followFocus()}))\n      .on('End', () => list.last({selectOne: this.followFocus()}))\n      .on(this.typeaheadRegexp, e => list.search(e.key, {selectOne: this.followFocus()}))\n      .on(this.expandKey, () => this.expand({selectOne: this.followFocus()}))\n      .on(this.collapseKey, () => this.collapse({selectOne: this.followFocus()}))\n      .on(Modifier.Shift, '*', () => this.expandSiblings());\n\n    if (this.inputs.multi()) {\n      manager\n        // TODO: Tracking the anchor by index can break if the\n        // tree is expanded or collapsed causing the index to change.\n        .on(Modifier.Any, 'Shift', () => list.anchor(this.listBehavior.activeIndex()))\n        .on(Modifier.Shift, this.prevKey, () => list.prev({selectRange: true}))\n        .on(Modifier.Shift, this.nextKey, () => list.next({selectRange: true}))\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'Home', () =>\n          list.first({selectRange: true, anchor: false}),\n        )\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'End', () =>\n          list.last({selectRange: true, anchor: false}),\n        )\n        .on(Modifier.Shift, 'Enter', () => list.updateSelection({selectRange: true, anchor: false}))\n        .on(Modifier.Shift, this.dynamicSpaceKey, () =>\n          list.updateSelection({selectRange: true, anchor: false}),\n        );\n    }\n\n    if (!this.followFocus() && this.inputs.multi()) {\n      manager\n        .on(this.dynamicSpaceKey, () => list.toggle())\n        .on('Enter', () => list.toggle(), {preventDefault: !this.nav()})\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => list.toggleAll());\n    }\n\n    if (!this.followFocus() && !this.inputs.multi()) {\n      manager.on(this.dynamicSpaceKey, () => list.selectOne());\n      manager.on('Enter', () => list.selectOne(), {preventDefault: !this.nav()});\n    }\n\n    if (this.inputs.multi() && this.followFocus()) {\n      manager\n        .on([Modifier.Ctrl, Modifier.Meta], this.prevKey, () => list.prev())\n        .on([Modifier.Ctrl, Modifier.Meta], this.nextKey, () => list.next())\n        .on([Modifier.Ctrl, Modifier.Meta], this.expandKey, () => this.expand())\n        .on([Modifier.Ctrl, Modifier.Meta], this.collapseKey, () => this.collapse())\n        .on([Modifier.Ctrl, Modifier.Meta], ' ', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Enter', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Home', () => list.first())\n        .on([Modifier.Ctrl, Modifier.Meta], 'End', () => list.last())\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => {\n          list.toggleAll();\n          list.select(); // Ensure the currect item remains selected.\n        });\n    }\n\n    return manager;\n  });\n\n  /** The pointerdown event manager for the tree. */\n  pointerdown = computed(() => {\n    const manager = new PointerEventManager();\n\n    if (this.multi()) {\n      manager.on(Modifier.Shift, e => this.goto(e, {selectRange: true}));\n    }\n\n    if (!this.multi()) {\n      return manager.on(e => this.goto(e, {selectOne: true}));\n    }\n\n    if (this.multi() && this.followFocus()) {\n      return manager\n        .on(e => this.goto(e, {selectOne: true}))\n        .on(Modifier.Ctrl, e => this.goto(e, {toggle: true}));\n    }\n\n    if (this.multi() && !this.followFocus()) {\n      return manager.on(e => this.goto(e, {toggle: true}));\n    }\n\n    return manager;\n  });\n\n  /** A unique identifier for the tree. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The host native element. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether the tree is in navigation mode. */\n  readonly nav: SignalLike<boolean> = () => this.inputs.nav();\n\n  /** The aria-current type. */\n  readonly currentType: SignalLike<\n    'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'\n  > = () => this.inputs.currentType();\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  readonly allItems: SignalLike<TreeItemPattern<V>[]> = () => this.inputs.allItems();\n\n  /** The focus strategy used by the tree. */\n  readonly focusMode: SignalLike<'roving' | 'activedescendant'> = () => this.inputs.focusMode();\n\n  /** Whether the tree is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The currently active item in the tree. */\n  readonly activeItem: WritableSignalLike<TreeItemPattern<V> | undefined>;\n\n  /** Whether disabled items should be focusable. */\n  readonly softDisabled: SignalLike<boolean> = () => this.inputs.softDisabled();\n\n  /** Whether the focus should wrap when navigating past the first or last item. */\n  readonly wrap: SignalLike<boolean> = () => this.inputs.wrap();\n\n  /** The orientation of the tree. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'> = () => this.inputs.orientation();\n\n  /** The text direction of the tree. */\n  readonly textDirection: SignalLike<'ltr' | 'rtl'> = () => this.textDirection();\n\n  /** Whether multiple items can be selected at the same time. */\n  readonly multi: SignalLike<boolean> = computed(() => (this.nav() ? false : this.inputs.multi()));\n\n  /** The selection mode of the tree. */\n  readonly selectionMode: SignalLike<'follow' | 'explicit'> = () => this.inputs.selectionMode();\n\n  /** The delay in milliseconds to wait before clearing the typeahead buffer. */\n  readonly typeaheadDelay: SignalLike<number> = () => this.inputs.typeaheadDelay();\n\n  /** The current selected items of the tree. */\n  readonly values: WritableSignalLike<V[]>;\n\n  constructor(readonly inputs: TreeInputs<V>) {\n    this.activeItem = inputs.activeItem;\n    this.values = inputs.values;\n\n    this.listBehavior = new List({\n      ...inputs,\n      items: this.visibleItems,\n      multi: this.multi,\n    });\n\n    this.expansionBehavior = new ListExpansion({\n      multiExpandable: () => true,\n      items: this.children,\n      disabled: this.disabled,\n    });\n  }\n\n  /**\n   * Sets the tree to it's default initial state.\n   *\n   * Sets the active index of the tree to the first focusable selected tree item if one exists.\n   * Otherwise, sets focus to the first focusable tree item.\n   */\n  setDefaultState() {\n    let firstItem: TreeItemPattern<V> | undefined;\n\n    for (const item of this.allItems()) {\n      if (!item.visible()) continue;\n      if (!this.listBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.activeItem.set(item);\n        return;\n      }\n    }\n\n    if (firstItem !== undefined) {\n      this.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events on the tree. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** Handles pointerdown events on the tree. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Navigates to the given tree item in the tree. */\n  goto(e: PointerEvent, opts?: SelectOptions) {\n    const item = this._getItem(e);\n    if (!item) return;\n\n    this.listBehavior.goto(item, opts);\n    this.toggleExpansion(item);\n  }\n\n  /** Toggles to expand or collapse a tree item. */\n  toggleExpansion(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (!item.expandable()) return;\n    if (item.expanded()) {\n      this.collapse();\n    } else {\n      this.expansionBehavior.open(item);\n    }\n  }\n\n  /** Expands a tree item. */\n  expand(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && !item.expanded()) {\n      this.expansionBehavior.open(item);\n    } else if (\n      item.expanded() &&\n      item.children().some(item => this.listBehavior.isFocusable(item))\n    ) {\n      this.listBehavior.next(opts);\n    }\n  }\n\n  /** Expands all sibling tree items including itself. */\n  expandSiblings(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    const siblings = item?.parent()?.children();\n    siblings?.forEach(item => this.expansionBehavior.open(item));\n  }\n\n  /** Collapses a tree item. */\n  collapse(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && item.expanded()) {\n      this.expansionBehavior.close(item);\n    } else if (item.parent() && item.parent() !== this) {\n      const parentItem = item.parent();\n      if (parentItem instanceof TreeItemPattern && this.listBehavior.isFocusable(parentItem)) {\n        this.listBehavior.goto(parentItem, opts);\n      }\n    }\n  }\n\n  /** Retrieves the TreeItemPattern associated with a DOM event, if any. */\n  protected _getItem(event: Event): TreeItemPattern<V> | undefined {\n    if (!(event.target instanceof HTMLElement)) {\n      return;\n    }\n    const element = event.target.closest('[role=\"treeitem\"]');\n    return this.inputs.allItems().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {TreeInputs, TreePattern, TreeItemPattern} from './tree';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {ComboboxPattern, ComboboxTreeControls} from '../combobox/combobox';\n\nexport type ComboboxTreeInputs<V> = TreeInputs<V> & {\n  /** The combobox controlling the tree. */\n  combobox: SignalLike<ComboboxPattern<TreeItemPattern<V>, V> | undefined>;\n};\n\nexport class ComboboxTreePattern<V>\n  extends TreePattern<V>\n  implements ComboboxTreeControls<TreeItemPattern<V>, V>\n{\n  /** Whether the currently focused item is collapsible. */\n  isItemCollapsible = () => this.inputs.activeItem()?.parent() instanceof TreeItemPattern;\n\n  /** The ARIA role for the tree. */\n  role = () => 'tree' as const;\n\n  /* The id of the active (focused) item in the tree. */\n  activeId = computed(() => this.listBehavior.activeDescendant());\n\n  /** Returns the currently active (focused) item in the tree. */\n  getActiveItem = () => this.inputs.activeItem();\n\n  /** The list of items in the tree. */\n  items = computed(() => this.inputs.allItems());\n\n  /** The tab index for the tree. Always -1 because the combobox handles focus. */\n  override tabIndex: SignalLike<-1 | 0> = () => -1;\n\n  constructor(override readonly inputs: ComboboxTreeInputs<V>) {\n    if (inputs.combobox()) {\n      inputs.multi = () => false;\n      inputs.focusMode = () => 'activedescendant';\n      inputs.element = inputs.combobox()!.inputs.inputEl;\n    }\n\n    super(inputs);\n  }\n\n  /** Noop. The combobox handles keydown events. */\n  override onKeydown(_: KeyboardEvent): void {}\n\n  /** Noop. The combobox handles pointerdown events. */\n  override onPointerdown(_: PointerEvent): void {}\n\n  /** Noop. The combobox controls the open state. */\n  override setDefaultState(): void {}\n\n  /** Navigates to the specified item in the tree. */\n  focus = (item: TreeItemPattern<V>) => this.listBehavior.goto(item);\n\n  /** Navigates to the next focusable item in the tree. */\n  next = () => this.listBehavior.next();\n\n  /** Navigates to the previous focusable item in the tree. */\n  prev = () => this.listBehavior.prev();\n\n  /** Navigates to the last focusable item in the tree. */\n  last = () => this.listBehavior.last();\n\n  /** Navigates to the first focusable item in the tree. */\n  first = () => this.listBehavior.first();\n\n  /** Unfocuses the currently focused item in the tree. */\n  unfocus = () => this.listBehavior.unfocus();\n\n  // TODO: handle non-selectable parent nodes.\n  /** Selects the specified item in the tree or the current active item if not provided. */\n  select = (item?: TreeItemPattern<V>) => this.listBehavior.select(item);\n\n  /** Toggles the selection state of the given item in the tree or the current active item if not provided. */\n  toggle = (item?: TreeItemPattern<V>) => this.listBehavior.toggle(item);\n\n  /** Clears the selection in the tree. */\n  clearSelection = () => this.listBehavior.deselectAll();\n\n  /** Retrieves the TreeItemPattern associated with a pointer event. */\n  getItem = (e: PointerEvent) => this._getItem(e);\n\n  /** Retrieves the currently selected items in the tree */\n  getSelectedItems = () => this.inputs.allItems().filter(item => item.selected());\n\n  /** Sets the value of the combobox tree. */\n  setValue = (value: V | undefined) => this.inputs.values.set(value ? [value] : []);\n\n  /** Expands the currently focused item if it is expandable. */\n  expandItem = () => this.expand();\n\n  /** Collapses the currently focused item if it is expandable. */\n  collapseItem = () => this.collapse();\n\n  /** Whether the specified item or the currently active item is expandable. */\n  isItemExpandable(item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) {\n    return item ? item.expandable() : false;\n  }\n\n  /** Expands all of the tree items. */\n  expandAll = () => this.items().forEach(item => this.expansionBehavior.open(item));\n\n  /** Collapses all of the tree items. */\n  collapseAll = () => this.items().forEach(item => item.expansionBehavior.close(item));\n\n  /** Whether the currently active item is selectable. */\n  isItemSelectable = (item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) => {\n    return item ? item.selectable() : false;\n  };\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  afterRenderEffect,\n  Directive,\n  inject,\n  TemplateRef,\n  signal,\n  ViewContainerRef,\n  model,\n  EmbeddedViewRef,\n  OnDestroy,\n} from '@angular/core';\n\n/**\n * A container directive controls the visibility of its content.\n */\n@Directive()\nexport class DeferredContentAware {\n  readonly contentVisible = signal(false);\n  readonly preserveContent = model(false);\n}\n\n/**\n * DeferredContent loads/unloads the content based on the visibility.\n * The visibilty signal is sent from a parent directive implements\n * DeferredContentAware.\n *\n * Use this directive as a host directive. For example:\n *\n * ```ts\n *   @Directive({\n *     selector: 'ng-template[AccordionContent]',\n *     hostDirectives: [DeferredContent],\n *   })\n *   class AccordionContent {}\n * ```\n */\n@Directive()\nexport class DeferredContent implements OnDestroy {\n  private readonly _deferredContentAware = inject(DeferredContentAware, {optional: true});\n  private readonly _templateRef = inject(TemplateRef);\n  private readonly _viewContainerRef = inject(ViewContainerRef);\n  private _currentViewRef: EmbeddedViewRef<unknown> | null = null;\n  private _isRendered = false;\n\n  readonly deferredContentAware = signal(this._deferredContentAware);\n\n  constructor() {\n    afterRenderEffect(() => {\n      if (this.deferredContentAware()?.contentVisible()) {\n        if (!this._isRendered) {\n          this._destroyContent();\n          this._currentViewRef = this._viewContainerRef.createEmbeddedView(this._templateRef);\n          this._isRendered = true;\n        }\n      } else if (!this.deferredContentAware()?.preserveContent()) {\n        this._destroyContent();\n        this._isRendered = false;\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this._destroyContent();\n  }\n\n  private _destroyContent() {\n    const ref = this._currentViewRef;\n\n    if (ref && !ref.destroyed) {\n      ref.destroy();\n      this._currentViewRef = null;\n    }\n  }\n}\n"],"names":["MenuPattern","inputs","id","role","disabled","visible","computed","parent","expanded","listBehavior","isFocused","signal","hasBeenFocused","hasBeenHovered","_openTimeout","_closeTimeout","tabIndex","shouldFocus","root","MenuTriggerPattern","MenuBarPattern","_expandKey","textDirection","_collapseKey","dynamicSpaceKey","isTyping","typeaheadRegexp","grandparent","keydownManager","KeyboardEventManager","on","next","prev","first","last","trigger","closeAll","expand","collapse","e","search","key","constructor","List","values","setDefaultState","goto","items","focusElement","onKeydown","event","handle","onMouseOver","set","item","find","i","element","contains","target","activeItem","MenuItemPattern","_clearTimeouts","_closeItem","_clearCloseTimeout","_openItem","_clearOpenTimeout","setTimeout","close","undefined","expansionDelay","open","onMouseOut","relatedTarget","onClick","submit","onFocusIn","onFocusOut","parentEl","refocus","siblings","filter","hasPopup","isMenu","isMenuBar","isMenuTrigger","submenu","onSelect","value","clearTimeout","_nextKey","_previousKey","opts","prevItem","unfocus","menu","focus","menuitems","length","menuitem","pop","_expanded","concat","searchTerm","active","getItemTabindex","index","indexOf","controls","selectable","convertGetterSetterToWritableSignalLike","getter","setter","Object","assign","update","updateCallback","ListExpansion","isExpandable","multiExpandable","toggle","openAll","expandable","LabelControl","label","labelledBy","defaultLabelledBy","TabPattern","tablist","selected","selectedTab","focusBehavior","getItemTabIndex","tabpanel","TabPanelPattern","labelManager","hidden","tab","join","TabListPattern","navigationBehavior","expansionBehavior","activeTab","orientation","getListTabIndex","activeDescendant","getActiveDescendant","followFocus","selectionMode","prevKey","nextKey","keydown","_navigate","pointerdown","PointerEventManager","_getItem","ListFocus","ListNavigation","focusManager","firstItem","isFocusable","onPointerdown","t","success","op","shouldExpand","HTMLElement","closest","ToolbarPattern","softDisabled","_prevKey","_altPrevKey","_altNextKey","_keydown","manager","_groupNext","_groupPrev","select","currGroup","group","nextGroup","peekNext","peekFirst","peekPrev","peekLast","_goto","getItem","multi","forEach","deselect","focusMode","typeaheadDelay","preventDefault","validate","violations","ToolbarWidgetPattern","toolbar","includes","ToolbarWidgetGroupPattern","AccordionGroupPattern","onFocus","AccordionTriggerPattern","accordionGroup","accordionPanel","hardDisabled","AccordionPanelPattern","accordionTrigger","TreeItemPattern","tree","children","visibleItems","hasChildren","level","setsize","posinset","nav","current","currentType","TreePattern","allItems","isRtl","collapseKey","expandKey","list","selectOne","Modifier","Shift","expandSiblings","Any","anchor","activeIndex","selectRange","Ctrl","Meta","updateSelection","toggleAll","wrap","toggleExpansion","some","parentItem","ComboboxTreePattern","isItemCollapsible","activeId","getActiveItem","combobox","inputEl","_","clearSelection","deselectAll","getSelectedItems","setValue","expandItem","collapseItem","isItemExpandable","expandAll","collapseAll","isItemSelectable","DeferredContentAware","contentVisible","preserveContent","model","deps","i0","FactoryTarget","Directive","isStandalone","classPropertyName","publicName","isSignal","isRequired","transformFunction","outputs","ngImport","decorators","DeferredContent","_deferredContentAware","inject","optional","_templateRef","TemplateRef","_viewContainerRef","ViewContainerRef","_currentViewRef","_isRendered","deferredContentAware","afterRenderEffect","_destroyContent","createEmbeddedView","ngOnDestroy","ref","destroyed","destroy"],"mappings":"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"}