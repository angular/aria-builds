{"version":3,"file":"private.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/combobox/combobox.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/list-focus/list-focus.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/list-navigation/list-navigation.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/list-selection/list-selection.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/list-typeahead/list-typeahead.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/list/list.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/listbox/listbox.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/listbox/option.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/listbox/combobox-listbox.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/menu/menu.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/signal-like/signal-like.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/expansion/expansion.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/behaviors/label/label.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/tabs/tabs.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/toolbar/toolbar.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/toolbar/toolbar-widget.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/toolbar/toolbar-widget-group.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/accordion/accordion.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/tree/tree.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/tree/combobox-tree.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/private/deferred-content/deferred-content.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {computed, signal} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\nimport {ListItem} from '../behaviors/list/list';\n\n/** Represents the required inputs for a combobox. */\nexport interface ComboboxInputs<T extends ListItem<V>, V> {\n  /** The controls for the popup associated with the combobox. */\n  popupControls: SignalLike<ComboboxListboxControls<T, V> | ComboboxTreeControls<T, V> | undefined>;\n\n  /** The HTML input element that serves as the combobox input. */\n  inputEl: SignalLike<HTMLInputElement | undefined>;\n\n  /** The HTML element that serves as the combobox container. */\n  containerEl: SignalLike<HTMLElement | undefined>;\n\n  /** The filtering mode for the combobox. */\n  filterMode: SignalLike<'manual' | 'auto-select' | 'highlight'>;\n\n  /** The current value of the combobox. */\n  inputValue?: WritableSignalLike<string>;\n\n  /** The value of the first matching item in the popup. */\n  firstMatch: SignalLike<V | undefined>;\n\n  /** Whether the combobox is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** Whether the combobox is read-only. */\n  readonly: SignalLike<boolean>;\n\n  /** Whether the combobox is in a right-to-left context. */\n  textDirection: SignalLike<'rtl' | 'ltr'>;\n}\n\n/** An interface that allows combobox popups to expose the necessary controls for the combobox. */\nexport interface ComboboxListboxControls<T extends ListItem<V>, V> {\n  /** A unique identifier for the popup. */\n  id: () => string;\n\n  /** The ARIA role for the popup. */\n  role: SignalLike<'listbox' | 'tree' | 'grid'>;\n\n  // TODO(wagnermaciel): Add validation that ensures only readonly comboboxes can have multi-select popups.\n\n  /** Whether multiple items in the popup can be selected at once. */\n  multi: SignalLike<boolean>;\n\n  /** The ID of the active item in the popup. */\n  activeId: SignalLike<string | undefined>;\n\n  /** The list of items in the popup. */\n  items: SignalLike<T[]>;\n\n  /** Navigates to the given item in the popup. */\n  focus: (item: T, opts?: {focusElement?: boolean}) => void;\n\n  /** Navigates to the next item in the popup. */\n  next: () => void;\n\n  /** Navigates to the previous item in the popup. */\n  prev: () => void;\n\n  /** Navigates to the first item in the popup. */\n  first: () => void;\n\n  /** Navigates to the last item in the popup. */\n  last: () => void;\n\n  /** Selects the current item in the popup. */\n  select: (item?: T) => void;\n\n  /** Toggles the selection state of the given item in the popup. */\n  toggle: (item?: T) => void;\n\n  /** Clears the selection state of the popup. */\n  clearSelection: () => void;\n\n  /** Removes focus from any item in the popup. */\n  unfocus: () => void;\n\n  /** Returns the item corresponding to the given event. */\n  getItem: (e: PointerEvent) => T | undefined;\n\n  /** Returns the currently selected items in the popup. */\n  getSelectedItems: () => T[];\n\n  /** Sets the value of the combobox based on the selected item. */\n  setValue: (value: V | undefined) => void; // For re-setting the value if the popup was destroyed.\n}\n\nexport interface ComboboxTreeControls<T extends ListItem<V>, V>\n  extends ComboboxListboxControls<T, V> {\n  /** Whether the currently active item in the popup is collapsible. */\n  isItemCollapsible: () => boolean;\n\n  /** Expands the currently active item in the popup. */\n  expandItem: () => void;\n\n  /** Collapses the currently active item in the popup. */\n  collapseItem: () => void;\n\n  /** Checks if the currently active item in the popup is expandable. */\n  isItemExpandable: (item?: T) => boolean;\n\n  /** Expands all nodes in the tree. */\n  expandAll: () => void;\n\n  /** Collapses all nodes in the tree. */\n  collapseAll: () => void;\n\n  /** Toggles the expansion state of the currently active item in the popup. */\n  toggleExpansion: (item?: T) => void;\n\n  /** Whether the current active item is selectable. */\n  isItemSelectable: (item?: T) => boolean;\n}\n\n/** Controls the state of a combobox. */\nexport class ComboboxPattern<T extends ListItem<V>, V> {\n  /** Whether the combobox is expanded. */\n  expanded = signal(false);\n\n  /** The ID of the active item in the combobox. */\n  activeDescendant = computed(() => this.inputs.popupControls()?.activeId() ?? null);\n\n  /** The currently highlighted item in the combobox. */\n  highlightedItem = signal<T | undefined>(undefined);\n\n  /** Whether the most recent input event was a deletion. */\n  isDeleting = false;\n\n  /** Whether the combobox is focused. */\n  isFocused = signal(false);\n\n  /** The key used to navigate to the previous item in the list. */\n  expandKey = computed(() => (this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight'));\n\n  /** The key used to navigate to the next item in the list. */\n  collapseKey = computed(() =>\n    this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft',\n  );\n\n  /** The ID of the popup associated with the combobox. */\n  popupId = computed(() => this.inputs.popupControls()?.id() || null);\n\n  /** The autocomplete behavior of the combobox. */\n  autocomplete = computed(() => (this.inputs.filterMode() === 'highlight' ? 'both' : 'list'));\n\n  /** The ARIA role of the popup associated with the combobox. */\n  hasPopup = computed(() => this.inputs.popupControls()?.role() || null);\n\n  /** Whether the combobox is read-only. */\n  readonly = computed(() => this.inputs.readonly() || null);\n\n  /** The keydown event manager for the combobox. */\n  keydown = computed(() => {\n    if (!this.expanded()) {\n      const manager = new KeyboardEventManager()\n        .on('ArrowDown', () => this.open({first: true}))\n        .on('ArrowUp', () => this.open({last: true}))\n        .on('Escape', () => this.close({reset: !this.readonly()}));\n\n      if (this.readonly()) {\n        manager\n          .on('Enter', () => this.open({selected: true}))\n          .on(' ', () => this.open({selected: true}));\n      }\n\n      return manager;\n    }\n\n    const popupControls = this.inputs.popupControls();\n\n    if (!popupControls) {\n      return new KeyboardEventManager();\n    }\n\n    const manager = new KeyboardEventManager()\n      .on('ArrowDown', () => this.next())\n      .on('ArrowUp', () => this.prev())\n      .on('Home', () => this.first())\n      .on('End', () => this.last())\n      .on('Escape', () => this.close({reset: !this.readonly()}));\n\n    if (this.readonly()) {\n      manager.on(' ', () => this.select({commit: true, close: !popupControls.multi()}));\n    }\n\n    if (popupControls.role() === 'listbox') {\n      manager.on('Enter', () => this.select({commit: true, close: !popupControls.multi()}));\n    }\n\n    if (popupControls.role() === 'tree') {\n      const treeControls = popupControls as ComboboxTreeControls<T, V>;\n\n      if (treeControls.isItemSelectable()) {\n        manager.on('Enter', () => this.select({commit: true, close: true}));\n      } else if (treeControls.isItemExpandable()) {\n        manager.on('Enter', () => this.expandItem());\n      }\n\n      if (treeControls.isItemExpandable() || treeControls.isItemCollapsible()) {\n        manager.on(this.collapseKey(), () => this.collapseItem());\n      }\n\n      if (treeControls.isItemExpandable()) {\n        manager.on(this.expandKey(), () => this.expandItem());\n      }\n    }\n\n    return manager;\n  });\n\n  /** The pointerup event manager for the combobox. */\n  pointerup = computed(() =>\n    new PointerEventManager().on(e => {\n      const item = this.inputs.popupControls()?.getItem(e);\n\n      if (item) {\n        if (this.inputs.popupControls()?.role() === 'tree') {\n          const treeControls = this.inputs.popupControls() as ComboboxTreeControls<T, V>;\n\n          if (treeControls.isItemExpandable(item) && !treeControls.isItemSelectable(item)) {\n            treeControls.toggleExpansion(item);\n            this.inputs.inputEl()?.focus();\n            return;\n          }\n        }\n\n        this.select({item, commit: true, close: !this.inputs.popupControls()?.multi()});\n        this.inputs.inputEl()?.focus(); // Return focus to the input after selecting.\n      }\n\n      if (e.target === this.inputs.inputEl()) {\n        if (this.readonly()) {\n          this.expanded() ? this.close() : this.open({selected: true});\n        }\n      }\n    }),\n  );\n\n  constructor(readonly inputs: ComboboxInputs<T, V>) {}\n\n  /** Handles keydown events for the combobox. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.inputs.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** Handles pointerup events for the combobox. */\n  onPointerup(event: PointerEvent) {\n    if (!this.inputs.disabled()) {\n      this.pointerup().handle(event);\n    }\n  }\n\n  /** Handles input events for the combobox. */\n  onInput(event: Event) {\n    if (this.inputs.disabled() || this.inputs.readonly()) {\n      return;\n    }\n\n    const inputEl = this.inputs.inputEl();\n\n    if (!inputEl) {\n      return;\n    }\n\n    this.open();\n    this.inputs.inputValue?.set(inputEl.value);\n    this.isDeleting = event instanceof InputEvent && !!event.inputType.match(/^delete/);\n\n    if (this.inputs.filterMode() === 'manual') {\n      const selectedItems = this.inputs.popupControls()?.getSelectedItems();\n      const searchTerm = selectedItems?.[0]?.searchTerm();\n\n      if (searchTerm && this.inputs.inputValue!() !== searchTerm) {\n        this.inputs.popupControls()?.clearSelection();\n      }\n    }\n\n    if (this.inputs.filterMode() === 'highlight' && !this.isDeleting) {\n      this.highlight();\n    }\n  }\n\n  /** Handles focus in events for the combobox. */\n  onFocusIn() {\n    this.isFocused.set(true);\n  }\n\n  /** Handles focus out events for the combobox. */\n  onFocusOut(event: FocusEvent) {\n    if (this.inputs.disabled()) {\n      return;\n    }\n\n    if (\n      !(event.relatedTarget instanceof HTMLElement) ||\n      !this.inputs.containerEl()?.contains(event.relatedTarget)\n    ) {\n      this.isFocused.set(false);\n\n      if (this.readonly()) {\n        this.close();\n        return;\n      }\n\n      if (this.inputs.filterMode() !== 'manual') {\n        this.commit();\n      } else {\n        const item = this.inputs\n          .popupControls()\n          ?.items()\n          .find(i => i.searchTerm() === this.inputs.inputEl()?.value);\n\n        if (item) {\n          this.select({item});\n        }\n      }\n\n      this.close();\n    }\n  }\n\n  /** The first matching item in the combobox. */\n  firstMatch = computed(() => {\n    // TODO(wagnermaciel): Consider whether we should not provide this default behavior for the\n    // listbox. Instead, we may want to allow users to have no match so that typing does not focus\n    // any option.\n    if (this.inputs.popupControls()?.role() === 'listbox') {\n      return this.inputs.popupControls()?.items()[0];\n    }\n\n    return this.inputs\n      .popupControls()\n      ?.items()\n      .find(i => i.value() === this.inputs.firstMatch());\n  });\n\n  /** Handles filtering logic for the combobox. */\n  onFilter() {\n    if (this.readonly()) {\n      return;\n    }\n\n    // TODO(wagnermaciel)\n    // When the user first interacts with the combobox, the popup will lazily render for the first\n    // time. This is a simple way to detect this and avoid auto-focus & selection logic, but this\n    // should probably be moved to the component layer instead.\n    const isInitialRender = !this.inputs.inputValue?.().length && !this.isDeleting;\n\n    if (isInitialRender) {\n      return;\n    }\n\n    // Avoid refocusing the input if a filter event occurs after focus has left the combobox.\n    if (!this.isFocused()) {\n      return;\n    }\n\n    if (this.inputs.popupControls()?.role() === 'tree') {\n      const treeControls = this.inputs.popupControls() as ComboboxTreeControls<T, V>;\n      this.inputs.inputValue?.().length ? treeControls.expandAll() : treeControls.collapseAll();\n    }\n\n    const item = this.firstMatch();\n\n    if (!item) {\n      this.inputs.popupControls()?.clearSelection();\n      this.inputs.popupControls()?.unfocus();\n      return;\n    }\n\n    this.inputs.popupControls()?.focus(item);\n\n    if (this.inputs.filterMode() !== 'manual') {\n      this.select({item});\n    }\n\n    if (this.inputs.filterMode() === 'highlight' && !this.isDeleting) {\n      this.highlight();\n    }\n  }\n\n  /** Highlights the currently selected item in the combobox. */\n  highlight() {\n    const inputEl = this.inputs.inputEl();\n    const selectedItems = this.inputs.popupControls()?.getSelectedItems();\n    const item = selectedItems?.[0];\n\n    if (!inputEl || !item) {\n      return;\n    }\n\n    const isHighlightable = item\n      .searchTerm()\n      .toLowerCase()\n      .startsWith(this.inputs.inputValue!().toLowerCase());\n\n    if (isHighlightable) {\n      inputEl.value =\n        this.inputs.inputValue!() + item.searchTerm().slice(this.inputs.inputValue!().length);\n      inputEl.setSelectionRange(this.inputs.inputValue!().length, item.searchTerm().length);\n      this.highlightedItem.set(item);\n    }\n  }\n\n  /** Closes the combobox. */\n  close(opts?: {reset: boolean}) {\n    if (!opts?.reset) {\n      this.expanded.set(false);\n      this.inputs.popupControls()?.unfocus();\n      return;\n    }\n\n    const popupControls = this.inputs.popupControls();\n\n    if (!this.expanded()) {\n      this.inputs.inputValue?.set('');\n      popupControls?.clearSelection();\n\n      const inputEl = this.inputs.inputEl();\n\n      if (inputEl) {\n        inputEl.value = '';\n      }\n    } else if (this.expanded()) {\n      this.close();\n\n      const selectedItem = popupControls?.getSelectedItems()?.[0];\n\n      if (selectedItem?.searchTerm() !== this.inputs.inputValue!()) {\n        popupControls?.clearSelection();\n      }\n    }\n\n    this.close();\n\n    if (!this.readonly()) {\n      this.inputs.popupControls()?.clearSelection();\n    }\n  }\n\n  /** Opens the combobox. */\n  open(nav?: {first?: boolean; last?: boolean; selected?: boolean}) {\n    this.expanded.set(true);\n    const inputEl = this.inputs.inputEl();\n\n    if (inputEl && this.inputs.filterMode() === 'highlight') {\n      const isHighlighting = inputEl.selectionStart !== inputEl.value.length;\n      this.inputs.inputValue?.set(inputEl.value.slice(0, inputEl.selectionStart || 0));\n      if (!isHighlighting) {\n        this.highlightedItem.set(undefined);\n      }\n    }\n\n    if (nav?.first) {\n      this.first();\n    }\n    if (nav?.last) {\n      this.last();\n    }\n    if (nav?.selected) {\n      const selectedItem = this.inputs\n        .popupControls()\n        ?.items()\n        .find(i => this.inputs.popupControls()?.getSelectedItems().includes(i));\n      selectedItem ? this.inputs.popupControls()?.focus(selectedItem) : this.first();\n    }\n  }\n\n  /** Navigates to the next focusable item in the combobox popup. */\n  next() {\n    this._navigate(() => this.inputs.popupControls()?.next());\n  }\n\n  /** Navigates to the previous focusable item in the combobox popup. */\n  prev() {\n    this._navigate(() => this.inputs.popupControls()?.prev());\n  }\n\n  /** Navigates to the first focusable item in the combobox popup. */\n  first() {\n    this._navigate(() => this.inputs.popupControls()?.first());\n  }\n\n  /** Navigates to the last focusable item in the combobox popup. */\n  last() {\n    this._navigate(() => this.inputs.popupControls()?.last());\n  }\n\n  /** Collapses the currently focused item in the combobox. */\n  collapseItem() {\n    const controls = this.inputs.popupControls() as ComboboxTreeControls<T, V>;\n    this._navigate(() => controls?.collapseItem());\n  }\n\n  /** Expands the currently focused item in the combobox. */\n  expandItem() {\n    const controls = this.inputs.popupControls() as ComboboxTreeControls<T, V>;\n    this._navigate(() => controls?.expandItem());\n  }\n\n  /** Selects an item in the combobox popup. */\n  select(opts: {item?: T; commit?: boolean; close?: boolean} = {}) {\n    const controls = this.inputs.popupControls();\n\n    if (opts.item) {\n      controls?.focus(opts.item, {focusElement: false});\n    }\n\n    controls?.multi() ? controls.toggle(opts.item) : controls?.select(opts.item);\n\n    if (opts.commit) {\n      this.commit();\n    }\n    if (opts.close) {\n      this.close();\n    }\n  }\n\n  /** Updates the value of the input based on the currently selected item. */\n  commit() {\n    const inputEl = this.inputs.inputEl();\n    const selectedItems = this.inputs.popupControls()?.getSelectedItems();\n\n    if (!inputEl) {\n      return;\n    }\n\n    inputEl.value = selectedItems?.map(i => i.searchTerm()).join(', ') || '';\n    this.inputs.inputValue?.set(inputEl.value);\n\n    if (this.inputs.filterMode() === 'highlight' && !this.readonly()) {\n      const length = inputEl.value.length;\n      inputEl.setSelectionRange(length, length);\n    }\n  }\n\n  /** Navigates and handles additional actions based on filter mode. */\n  private _navigate(operation: () => void) {\n    operation();\n\n    if (this.inputs.filterMode() !== 'manual') {\n      this.select();\n    }\n\n    if (this.inputs.filterMode() === 'highlight') {\n      // This is to handle when the user navigates back to the originally highlighted item.\n      // E.g. User types \"Al\", highlights \"Alice\", then navigates down and back up to \"Alice\".\n      const selectedItem = this.inputs.popupControls()?.getSelectedItems()[0];\n\n      if (!selectedItem) {\n        return;\n      }\n\n      if (selectedItem === this.highlightedItem()) {\n        this.highlight();\n      } else {\n        const inputEl = this.inputs.inputEl()!;\n        inputEl.value = selectedItem?.searchTerm()!;\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../signal-like/signal-like';\n\n/** Represents an item in a collection, such as a listbox option, than may receive focus. */\nexport interface ListFocusItem {\n  /** A unique identifier for the item. */\n  id: SignalLike<string>;\n\n  /** The html element that should receive focus. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  /** Whether an item is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The index of the item in the list. */\n  index: SignalLike<number>;\n}\n\n/** Represents the required inputs for a collection that contains focusable items. */\nexport interface ListFocusInputs<T extends ListFocusItem> {\n  /** The focus strategy used by the list. */\n  focusMode: SignalLike<'roving' | 'activedescendant'>;\n\n  /** Whether the list is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The items in the list. */\n  items: SignalLike<T[]>;\n\n  /** The active item. */\n  activeItem: WritableSignalLike<T | undefined>;\n\n  /** Whether disabled items in the list should be focusable. */\n  softDisabled: SignalLike<boolean>;\n\n  element: SignalLike<HTMLElement | undefined>;\n}\n\n/** Controls focus for a list of items. */\nexport class ListFocus<T extends ListFocusItem> {\n  /** The last item that was active. */\n  prevActiveItem = signal<T | undefined>(undefined);\n\n  /** The index of the last item that was active. */\n  prevActiveIndex = computed(() => {\n    return this.prevActiveItem() ? this.inputs.items().indexOf(this.prevActiveItem()!) : -1;\n  });\n\n  /** The current active index in the list. */\n  activeIndex = computed(() => {\n    return this.inputs.activeItem() ? this.inputs.items().indexOf(this.inputs.activeItem()!) : -1;\n  });\n\n  constructor(readonly inputs: ListFocusInputs<T>) {}\n\n  /** Whether the list is in a disabled state. */\n  isListDisabled(): boolean {\n    return this.inputs.disabled() || this.inputs.items().every(i => i.disabled());\n  }\n\n  /** The id of the current active item. */\n  getActiveDescendant(): string | undefined {\n    if (this.isListDisabled()) {\n      return undefined;\n    }\n    if (this.inputs.focusMode() === 'roving') {\n      return undefined;\n    }\n    return this.inputs.activeItem()?.id() ?? undefined;\n  }\n\n  /** The tab index for the list. */\n  getListTabIndex(): -1 | 0 {\n    if (this.isListDisabled()) {\n      return 0;\n    }\n    return this.inputs.focusMode() === 'activedescendant' ? 0 : -1;\n  }\n\n  /** Returns the tab index for the given item. */\n  getItemTabIndex(item: T): -1 | 0 {\n    if (this.isListDisabled()) {\n      return -1;\n    }\n    if (this.inputs.focusMode() === 'activedescendant') {\n      return -1;\n    }\n    return this.inputs.activeItem() === item ? 0 : -1;\n  }\n\n  /** Moves focus to the given item if it is focusable. */\n  focus(item: T, opts?: {focusElement?: boolean}): boolean {\n    if (this.isListDisabled() || !this.isFocusable(item)) {\n      return false;\n    }\n\n    this.prevActiveItem.set(this.inputs.activeItem());\n    this.inputs.activeItem.set(item);\n\n    if (opts?.focusElement || opts?.focusElement === undefined) {\n      this.inputs.focusMode() === 'roving'\n        ? item.element()?.focus()\n        : this.inputs.element()?.focus();\n    }\n\n    return true;\n  }\n\n  /** Returns true if the given item can be navigated to. */\n  isFocusable(item: T): boolean {\n    return !item.disabled() || this.inputs.softDisabled();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {SignalLike} from '../signal-like/signal-like';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../list-focus/list-focus';\n\n/** Represents an item in a collection, such as a listbox option, than can be navigated to. */\nexport interface ListNavigationItem extends ListFocusItem {}\n\n/** Represents the required inputs for a collection that has navigable items. */\nexport interface ListNavigationInputs<T extends ListNavigationItem> extends ListFocusInputs<T> {\n  /** Whether focus should wrap when navigating. */\n  wrap: SignalLike<boolean>;\n\n  /** Whether the list is vertically or horizontally oriented. */\n  orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** The direction that text is read based on the users locale. */\n  textDirection: SignalLike<'rtl' | 'ltr'>;\n}\n\n/** Controls navigation for a list of items. */\nexport class ListNavigation<T extends ListNavigationItem> {\n  constructor(readonly inputs: ListNavigationInputs<T> & {focusManager: ListFocus<T>}) {}\n\n  /** Navigates to the given item. */\n  goto(item?: T, opts?: {focusElement?: boolean}): boolean {\n    return item ? this.inputs.focusManager.focus(item, opts) : false;\n  }\n\n  /** Navigates to the next item in the list. */\n  next(opts?: {focusElement?: boolean}): boolean {\n    return this._advance(1, opts);\n  }\n\n  /** Peeks the next item in the list. */\n  peekNext(): T | undefined {\n    return this._peek(1);\n  }\n\n  /** Navigates to the previous item in the list. */\n  prev(opts?: {focusElement?: boolean}): boolean {\n    return this._advance(-1, opts);\n  }\n\n  /** Peeks the previous item in the list. */\n  peekPrev(): T | undefined {\n    return this._peek(-1);\n  }\n\n  /** Navigates to the first item in the list. */\n  first(opts?: {focusElement?: boolean}): boolean {\n    const item = this.peekFirst();\n    return item ? this.goto(item, opts) : false;\n  }\n\n  /** Navigates to the last item in the list. */\n  last(opts?: {focusElement?: boolean}): boolean {\n    const item = this.peekLast();\n    return item ? this.goto(item, opts) : false;\n  }\n\n  /** Gets the first focusable item from the given list of items. */\n  peekFirst(items: T[] = this.inputs.items()): T | undefined {\n    return items.find(i => this.inputs.focusManager.isFocusable(i));\n  }\n\n  /** Gets the last focusable item from the given list of items. */\n  peekLast(items: T[] = this.inputs.items()): T | undefined {\n    for (let i = items.length - 1; i >= 0; i--) {\n      if (this.inputs.focusManager.isFocusable(items[i])) {\n        return items[i];\n      }\n    }\n    return;\n  }\n\n  /** Advances to the next or previous focusable item in the list based on the given delta. */\n  private _advance(delta: 1 | -1, opts?: {focusElement?: boolean}): boolean {\n    const item = this._peek(delta);\n    return item ? this.goto(item, opts) : false;\n  }\n\n  /** Peeks the next or previous focusable item in the list based on the given delta. */\n  private _peek(delta: 1 | -1): T | undefined {\n    const items = this.inputs.items();\n    const itemCount = items.length;\n    const startIndex = this.inputs.focusManager.activeIndex();\n    const step = (i: number) =>\n      this.inputs.wrap() ? (i + delta + itemCount) % itemCount : i + delta;\n\n    // If wrapping is enabled, this loop ultimately terminates when `i` gets back to `startIndex`\n    // in the case that all options are disabled. If wrapping is disabled, the loop terminates\n    // when the index goes out of bounds.\n    for (let i = step(startIndex); i !== startIndex && i < itemCount && i >= 0; i = step(i)) {\n      if (this.inputs.focusManager.isFocusable(items[i])) {\n        return items[i];\n      }\n    }\n\n    return;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../signal-like/signal-like';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../list-focus/list-focus';\n\n/** Represents an item in a collection, such as a listbox option, than can be selected. */\nexport interface ListSelectionItem<V> extends ListFocusItem {\n  /** The value of the item. */\n  value: SignalLike<V>;\n\n  /** Whether the item is selectable. */\n  selectable: SignalLike<boolean>;\n}\n\n/** Represents the required inputs for a collection that contains selectable items. */\nexport interface ListSelectionInputs<T extends ListSelectionItem<V>, V> extends ListFocusInputs<T> {\n  /** Whether multiple items in the list can be selected at once. */\n  multi: SignalLike<boolean>;\n\n  /** The current value of the list selection. */\n  value: WritableSignalLike<V[]>;\n\n  /** The selection strategy used by the list. */\n  selectionMode: SignalLike<'follow' | 'explicit'>;\n}\n\n/** Controls selection for a list of items. */\nexport class ListSelection<T extends ListSelectionItem<V>, V> {\n  /** The start index to use for range selection. */\n  rangeStartIndex = signal<number>(0);\n\n  /** The end index to use for range selection. */\n  rangeEndIndex = signal<number>(0);\n\n  /** The currently selected items. */\n  selectedItems = computed(() =>\n    this.inputs.items().filter(item => this.inputs.value().includes(item.value())),\n  );\n\n  constructor(readonly inputs: ListSelectionInputs<T, V> & {focusManager: ListFocus<T>}) {}\n\n  /** Selects the item at the current active index. */\n  select(item?: ListSelectionItem<V>, opts = {anchor: true}) {\n    item = item ?? (this.inputs.focusManager.inputs.activeItem() as ListSelectionItem<V>);\n\n    if (\n      !item ||\n      item.disabled() ||\n      !item.selectable() ||\n      this.inputs.value().includes(item.value())\n    ) {\n      return;\n    }\n\n    if (!this.inputs.multi()) {\n      this.deselectAll();\n    }\n\n    const index = this.inputs.items().findIndex(i => i === item);\n    if (opts.anchor) {\n      this.beginRangeSelection(index);\n    }\n    this.inputs.value.update(values => values.concat(item.value()));\n  }\n\n  /** Deselects the item at the current active index. */\n  deselect(item?: ListSelectionItem<V>) {\n    item = item ?? this.inputs.focusManager.inputs.activeItem();\n\n    if (item && !item.disabled() && item.selectable()) {\n      this.inputs.value.update(values => values.filter(value => value !== item.value()));\n    }\n  }\n\n  /** Toggles the item at the current active index. */\n  toggle(item?: ListSelectionItem<V>) {\n    item = item ?? this.inputs.focusManager.inputs.activeItem();\n    if (item) {\n      this.inputs.value().includes(item.value()) ? this.deselect(item) : this.select(item);\n    }\n  }\n\n  /** Toggles only the item at the current active index. */\n  toggleOne() {\n    const item = this.inputs.focusManager.inputs.activeItem();\n    if (item) {\n      this.inputs.value().includes(item.value()) ? this.deselect() : this.selectOne();\n    }\n  }\n\n  /** Selects all items in the list. */\n  selectAll() {\n    if (!this.inputs.multi()) {\n      return; // Should we log a warning?\n    }\n\n    for (const item of this.inputs.items()) {\n      this.select(item, {anchor: false});\n    }\n\n    this.beginRangeSelection();\n  }\n\n  /** Deselects all items in the list. */\n  deselectAll() {\n    // If an item is not in the list, it forcefully gets deselected.\n    // This actually creates a bug for the following edge case:\n    //\n    // Setup: An item is not in the list (maybe it's lazily loaded), and it is disabled & selected.\n    // Expected: If deselectAll() is called, it should NOT get deselected (because it is disabled).\n    // Actual: Calling deselectAll() will still deselect the item.\n    //\n    // Why? Because we can't check if the item is disabled if it's not in the list.\n    //\n    // Alternatively, we could NOT deselect items that are not in the list, but this has the\n    // inverse (and more common) effect of keeping enabled items selected when they aren't in the\n    // list.\n\n    for (const value of this.inputs.value()) {\n      const item = this.inputs.items().find(i => i.value() === value);\n\n      item\n        ? this.deselect(item)\n        : this.inputs.value.update(values => values.filter(v => v !== value));\n    }\n  }\n\n  /**\n   * Selects all items in the list or deselects all\n   * items in the list if all items are already selected.\n   */\n  toggleAll() {\n    const selectableValues = this.inputs\n      .items()\n      .filter(i => !i.disabled() && i.selectable())\n      .map(i => i.value());\n\n    selectableValues.every(i => this.inputs.value().includes(i))\n      ? this.deselectAll()\n      : this.selectAll();\n  }\n\n  /** Sets the selection to only the current active item. */\n  selectOne() {\n    const item = this.inputs.focusManager.inputs.activeItem();\n    if (item && (item.disabled() || !item.selectable())) {\n      return;\n    }\n\n    this.deselectAll();\n\n    if (this.inputs.value().length > 0 && !this.inputs.multi()) {\n      return;\n    }\n\n    this.select();\n  }\n\n  /**\n   * Selects all items in the list up to the anchor item.\n   *\n   * Deselects all items that were previously within the\n   * selected range that are now outside of the selected range\n   */\n  selectRange(opts = {anchor: true}) {\n    const isStartOfRange = this.inputs.focusManager.prevActiveIndex() === this.rangeStartIndex();\n\n    if (isStartOfRange && opts.anchor) {\n      this.beginRangeSelection(this.inputs.focusManager.prevActiveIndex());\n    }\n\n    const itemsInRange = this._getItemsFromIndex(this.rangeStartIndex());\n    const itemsOutOfRange = this._getItemsFromIndex(this.rangeEndIndex()).filter(\n      i => !itemsInRange.includes(i),\n    );\n\n    for (const item of itemsOutOfRange) {\n      this.deselect(item);\n    }\n\n    for (const item of itemsInRange) {\n      this.select(item, {anchor: false});\n    }\n\n    if (itemsInRange.length) {\n      const item = itemsInRange.pop();\n      const index = this.inputs.items().findIndex(i => i === item);\n      this.rangeEndIndex.set(index);\n    }\n  }\n\n  /** Marks the given index as the start of a range selection. */\n  beginRangeSelection(index: number = this.inputs.focusManager.activeIndex()) {\n    this.rangeStartIndex.set(index);\n    this.rangeEndIndex.set(index);\n  }\n\n  /** Returns the items in the list starting from the given index.  */\n  private _getItemsFromIndex(index: number) {\n    if (index === -1) {\n      return [];\n    }\n\n    const upper = Math.max(this.inputs.focusManager.activeIndex(), index);\n    const lower = Math.min(this.inputs.focusManager.activeIndex(), index);\n\n    const items = [];\n    for (let i = lower; i <= upper; i++) {\n      items.push(this.inputs.items()[i]);\n    }\n\n    if (this.inputs.focusManager.activeIndex() < index) {\n      return items.reverse();\n    }\n\n    return items;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {SignalLike} from '../signal-like/signal-like';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../list-focus/list-focus';\n\n/**\n * Represents an item in a collection, such as a listbox option, than can be navigated to by\n * typeahead.\n */\nexport interface ListTypeaheadItem extends ListFocusItem {\n  /** The text used by the typeahead search. */\n  searchTerm: SignalLike<string>;\n}\n\n/**\n * Represents the required inputs for a collection that contains items that can be navigated to by\n * typeahead.\n */\nexport interface ListTypeaheadInputs<T extends ListTypeaheadItem> extends ListFocusInputs<T> {\n  /** The amount of time before the typeahead search is reset. */\n  typeaheadDelay: SignalLike<number>;\n}\n\n/** Controls typeahead for a list of items. */\nexport class ListTypeahead<T extends ListTypeaheadItem> {\n  /** A reference to the timeout for resetting the typeahead search. */\n  timeout?: ReturnType<typeof setTimeout> | undefined;\n\n  /** The focus controller of the parent list. */\n  focusManager: ListFocus<T>;\n\n  /** Whether the user is actively typing a typeahead search query. */\n  isTyping = computed(() => this._query().length > 0);\n\n  /** Keeps track of the characters that typeahead search is being called with. */\n  private _query = signal('');\n\n  /** The index where that the typeahead search was initiated from. */\n  private _startIndex = signal<number | undefined>(undefined);\n\n  constructor(readonly inputs: ListTypeaheadInputs<T> & {focusManager: ListFocus<T>}) {\n    this.focusManager = inputs.focusManager;\n  }\n\n  /** Performs a typeahead search, appending the given character to the search string. */\n  search(char: string): boolean {\n    if (char.length !== 1) {\n      return false;\n    }\n\n    if (!this.isTyping() && char === ' ') {\n      return false;\n    }\n\n    if (this._startIndex() === undefined) {\n      this._startIndex.set(this.focusManager.activeIndex());\n    }\n\n    clearTimeout(this.timeout);\n    this._query.update(q => q + char.toLowerCase());\n    const item = this._getItem();\n\n    if (item) {\n      this.focusManager.focus(item);\n    }\n\n    this.timeout = setTimeout(() => {\n      this._query.set('');\n      this._startIndex.set(undefined);\n    }, this.inputs.typeaheadDelay() * 1000);\n\n    return true;\n  }\n\n  /**\n   * Returns the first item whose search term matches the\n   * current query starting from the the current anchor index.\n   */\n  private _getItem() {\n    let items = this.focusManager.inputs.items();\n    const after = items.slice(this._startIndex()! + 1);\n    const before = items.slice(0, this._startIndex()!);\n    items = after.concat(before);\n    items.push(this.inputs.items()[this._startIndex()!]);\n\n    const focusableItems = [];\n    for (const item of items) {\n      if (this.focusManager.isFocusable(item)) {\n        focusableItems.push(item);\n      }\n    }\n\n    return focusableItems.find(i => i.searchTerm().toLowerCase().startsWith(this._query()));\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../list-focus/list-focus';\nimport {\n  ListNavigation,\n  ListNavigationInputs,\n  ListNavigationItem,\n} from '../list-navigation/list-navigation';\nimport {\n  ListSelection,\n  ListSelectionInputs,\n  ListSelectionItem,\n} from '../list-selection/list-selection';\nimport {\n  ListTypeahead,\n  ListTypeaheadInputs,\n  ListTypeaheadItem,\n} from '../list-typeahead/list-typeahead';\n\n/** The operations that the list can perform after navigation. */\ninterface NavOptions {\n  toggle?: boolean;\n  select?: boolean;\n  selectOne?: boolean;\n  selectRange?: boolean;\n  anchor?: boolean;\n  focusElement?: boolean;\n}\n\n/** Represents an item in the list. */\nexport type ListItem<V> = ListTypeaheadItem &\n  ListNavigationItem &\n  ListSelectionItem<V> &\n  ListFocusItem;\n\n/** The necessary inputs for the list behavior. */\nexport type ListInputs<T extends ListItem<V>, V> = ListFocusInputs<T> &\n  ListNavigationInputs<T> &\n  ListSelectionInputs<T, V> &\n  ListTypeaheadInputs<T>;\n\n/** Controls the state of a list. */\nexport class List<T extends ListItem<V>, V> {\n  /** Controls navigation for the list. */\n  navigationBehavior: ListNavigation<T>;\n\n  /** Controls selection for the list. */\n  selectionBehavior: ListSelection<T, V>;\n\n  /** Controls typeahead for the list. */\n  typeaheadBehavior: ListTypeahead<T>;\n\n  /** Controls focus for the list. */\n  focusBehavior: ListFocus<T>;\n\n  /** Whether the list is disabled. */\n  disabled = computed(() => this.focusBehavior.isListDisabled());\n\n  /** The id of the current active item. */\n  activeDescendant = computed(() => this.focusBehavior.getActiveDescendant());\n\n  /** The tab index of the list. */\n  tabIndex = computed(() => this.focusBehavior.getListTabIndex());\n\n  /** The index of the currently active item in the list. */\n  activeIndex = computed(() => this.focusBehavior.activeIndex());\n\n  /**\n   * The uncommitted index for selecting a range of options.\n   *\n   * NOTE: This is subtly distinct from the \"rangeStartIndex\" in the ListSelection behavior.\n   * The anchorIndex does not necessarily represent the start of a range, but represents the most\n   * recent index where the user showed intent to begin a range selection. Usually, this is wherever\n   * the user most recently pressed the \"Shift\" key, but if the user presses shift + space to select\n   * from the anchor, the user is not intending to start a new range from this index.\n   *\n   * In other words, \"rangeStartIndex\" is only set when a user commits to starting a range selection\n   * while \"anchorIndex\" is set whenever a user indicates they may be starting a range selection.\n   */\n  private _anchorIndex = signal(0);\n\n  /** Whether the list should wrap. Used to disable wrapping while range selecting. */\n  private _wrap = signal(true);\n\n  constructor(readonly inputs: ListInputs<T, V>) {\n    this.focusBehavior = new ListFocus(inputs);\n    this.selectionBehavior = new ListSelection({...inputs, focusManager: this.focusBehavior});\n    this.typeaheadBehavior = new ListTypeahead({...inputs, focusManager: this.focusBehavior});\n    this.navigationBehavior = new ListNavigation({\n      ...inputs,\n      focusManager: this.focusBehavior,\n      wrap: computed(() => this._wrap() && this.inputs.wrap()),\n    });\n  }\n\n  /** Returns the tab index for the given item. */\n  getItemTabindex(item: T) {\n    return this.focusBehavior.getItemTabIndex(item);\n  }\n\n  /** Navigates to the first option in the list. */\n  first(opts?: NavOptions) {\n    this._navigate(opts, () => this.navigationBehavior.first(opts));\n  }\n\n  /** Navigates to the last option in the list. */\n  last(opts?: NavOptions) {\n    this._navigate(opts, () => this.navigationBehavior.last(opts));\n  }\n\n  /** Navigates to the next option in the list. */\n  next(opts?: NavOptions) {\n    this._navigate(opts, () => this.navigationBehavior.next(opts));\n  }\n\n  /** Navigates to the previous option in the list. */\n  prev(opts?: NavOptions) {\n    this._navigate(opts, () => this.navigationBehavior.prev(opts));\n  }\n\n  /** Navigates to the given item in the list. */\n  goto(item: T, opts?: NavOptions) {\n    this._navigate(opts, () => this.navigationBehavior.goto(item, opts));\n  }\n\n  /** Removes focus from the list. */\n  unfocus() {\n    this.inputs.activeItem.set(undefined);\n  }\n\n  /** Marks the given index as the potential start of a range selection. */\n  anchor(index: number) {\n    this._anchorIndex.set(index);\n  }\n\n  /** Handles typeahead search navigation for the list. */\n  search(char: string, opts?: NavOptions) {\n    this._navigate(opts, () => this.typeaheadBehavior.search(char));\n  }\n\n  /** Checks if the list is currently typing for typeahead search. */\n  isTyping() {\n    return this.typeaheadBehavior.isTyping();\n  }\n\n  /** Selects the currently active item in the list. */\n  select(item?: T) {\n    this.selectionBehavior.select(item);\n  }\n\n  /** Sets the selection to only the current active item. */\n  selectOne() {\n    this.selectionBehavior.selectOne();\n  }\n\n  /** Deselects the currently active item in the list. */\n  deselect(item?: T) {\n    this.selectionBehavior.deselect(item);\n  }\n\n  /** Deselects all items in the list. */\n  deselectAll() {\n    this.selectionBehavior.deselectAll();\n  }\n\n  /** Toggles the currently active item in the list. */\n  toggle(item?: T) {\n    this.selectionBehavior.toggle(item);\n  }\n\n  /** Toggles the currently active item in the list, deselecting all other items. */\n  toggleOne() {\n    this.selectionBehavior.toggleOne();\n  }\n\n  /** Toggles the selection of all items in the list. */\n  toggleAll() {\n    this.selectionBehavior.toggleAll();\n  }\n\n  /** Checks if the given item is able to receive focus. */\n  isFocusable(item: T) {\n    return this.focusBehavior.isFocusable(item);\n  }\n\n  /** Handles updating selection for the list. */\n  updateSelection(opts: NavOptions = {anchor: true}) {\n    if (opts.toggle) {\n      this.selectionBehavior.toggle();\n    }\n    if (opts.select) {\n      this.selectionBehavior.select();\n    }\n    if (opts.selectOne) {\n      this.selectionBehavior.selectOne();\n    }\n    if (opts.selectRange) {\n      this.selectionBehavior.selectRange();\n    }\n    if (!opts.anchor) {\n      this.anchor(this.selectionBehavior.rangeStartIndex());\n    }\n  }\n\n  /**\n   * Safely performs a navigation operation.\n   *\n   * Handles conditionally disabling wrapping for when a navigation\n   * operation is occurring while the user is selecting a range of options.\n   *\n   * Handles boilerplate calling of focus & selection operations. Also ensures these\n   * additional operations are only called if the navigation operation moved focus to a new option.\n   */\n  private _navigate(opts: NavOptions = {}, operation: () => boolean) {\n    if (opts?.selectRange) {\n      this._wrap.set(false);\n      this.selectionBehavior.rangeStartIndex.set(this._anchorIndex());\n    }\n\n    const moved = operation();\n\n    if (moved) {\n      this.updateSelection(opts);\n    }\n\n    this._wrap.set(true);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {OptionPattern} from './option';\nimport {KeyboardEventManager, PointerEventManager, Modifier} from '../behaviors/event-manager';\nimport {computed, signal} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs} from '../behaviors/list/list';\n\n/** Represents the required inputs for a listbox. */\nexport type ListboxInputs<V> = ListInputs<OptionPattern<V>, V> & {\n  /** A unique identifier for the listbox. */\n  id: SignalLike<string>;\n\n  /** Whether the listbox is readonly. */\n  readonly: SignalLike<boolean>;\n};\n\n/** Controls the state of a listbox. */\nexport class ListboxPattern<V> {\n  listBehavior: List<OptionPattern<V>, V>;\n\n  /** Whether the list is vertically or horizontally oriented. */\n  orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** Whether the listbox is disabled. */\n  disabled = computed(() => this.listBehavior.disabled());\n\n  /** Whether the listbox is readonly. */\n  readonly: SignalLike<boolean>;\n\n  /** The tab index of the listbox. */\n  tabIndex: SignalLike<-1 | 0> = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active item. */\n  activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** Whether multiple items in the list can be selected at once. */\n  multi: SignalLike<boolean>;\n\n  /** The number of items in the listbox. */\n  setsize = computed(() => this.inputs.items().length);\n\n  /** Whether the listbox selection follows focus. */\n  followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** Whether the listbox should wrap. Used to disable wrapping while range selecting. */\n  wrap = signal(true);\n\n  /** The key used to navigate to the previous item in the list. */\n  prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next item in the list. */\n  nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** The regexp used to decide if a key should trigger typeahead. */\n  typeaheadRegexp = /^.$/;\n\n  /** The keydown event manager for the listbox. */\n  keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n\n    if (this.readonly()) {\n      return manager\n        .on(this.prevKey, () => this.listBehavior.prev())\n        .on(this.nextKey, () => this.listBehavior.next())\n        .on('Home', () => this.listBehavior.first())\n        .on('End', () => this.listBehavior.last())\n        .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n    }\n\n    if (!this.followFocus()) {\n      manager\n        .on(this.prevKey, () => this.listBehavior.prev())\n        .on(this.nextKey, () => this.listBehavior.next())\n        .on('Home', () => this.listBehavior.first())\n        .on('End', () => this.listBehavior.last())\n        .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n    }\n\n    if (this.followFocus()) {\n      manager\n        .on(this.prevKey, () => this.listBehavior.prev({selectOne: true}))\n        .on(this.nextKey, () => this.listBehavior.next({selectOne: true}))\n        .on('Home', () => this.listBehavior.first({selectOne: true}))\n        .on('End', () => this.listBehavior.last({selectOne: true}))\n        .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key, {selectOne: true}));\n    }\n\n    if (this.inputs.multi()) {\n      manager\n        .on(Modifier.Any, 'Shift', () => this.listBehavior.anchor(this.listBehavior.activeIndex()))\n        .on(Modifier.Shift, this.prevKey, () => this.listBehavior.prev({selectRange: true}))\n        .on(Modifier.Shift, this.nextKey, () => this.listBehavior.next({selectRange: true}))\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'Home', () =>\n          this.listBehavior.first({selectRange: true, anchor: false}),\n        )\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'End', () =>\n          this.listBehavior.last({selectRange: true, anchor: false}),\n        )\n        .on(Modifier.Shift, 'Enter', () =>\n          this.listBehavior.updateSelection({selectRange: true, anchor: false}),\n        )\n        .on(Modifier.Shift, this.dynamicSpaceKey, () =>\n          this.listBehavior.updateSelection({selectRange: true, anchor: false}),\n        );\n    }\n\n    if (!this.followFocus() && this.inputs.multi()) {\n      manager\n        .on(this.dynamicSpaceKey, () => this.listBehavior.toggle())\n        .on('Enter', () => this.listBehavior.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => this.listBehavior.toggleAll());\n    }\n\n    if (!this.followFocus() && !this.inputs.multi()) {\n      manager.on(this.dynamicSpaceKey, () => this.listBehavior.toggleOne());\n      manager.on('Enter', () => this.listBehavior.toggleOne());\n    }\n\n    if (this.inputs.multi() && this.followFocus()) {\n      manager\n        .on([Modifier.Ctrl, Modifier.Meta], this.prevKey, () => this.listBehavior.prev())\n        .on([Modifier.Ctrl, Modifier.Meta], this.nextKey, () => this.listBehavior.next())\n        .on([Modifier.Ctrl, Modifier.Meta], ' ', () => this.listBehavior.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Enter', () => this.listBehavior.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Home', () => this.listBehavior.first())\n        .on([Modifier.Ctrl, Modifier.Meta], 'End', () => this.listBehavior.last())\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => {\n          this.listBehavior.toggleAll();\n          this.listBehavior.select(); // Ensure the currect option remains selected.\n        });\n    }\n\n    return manager;\n  });\n\n  /** The pointerdown event manager for the listbox. */\n  pointerdown = computed(() => {\n    const manager = new PointerEventManager();\n\n    if (this.readonly()) {\n      return manager.on(e => this.listBehavior.goto(this._getItem(e)!));\n    }\n\n    if (this.multi()) {\n      manager.on(Modifier.Shift, e =>\n        this.listBehavior.goto(this._getItem(e)!, {selectRange: true}),\n      );\n    }\n\n    if (!this.multi() && this.followFocus()) {\n      return manager.on(e => this.listBehavior.goto(this._getItem(e)!, {selectOne: true}));\n    }\n\n    if (!this.multi() && !this.followFocus()) {\n      return manager.on(e => this.listBehavior.goto(this._getItem(e)!, {toggle: true}));\n    }\n\n    if (this.multi() && this.followFocus()) {\n      return manager\n        .on(e => this.listBehavior.goto(this._getItem(e)!, {selectOne: true}))\n        .on(Modifier.Ctrl, e => this.listBehavior.goto(this._getItem(e)!, {toggle: true}));\n    }\n\n    if (this.multi() && !this.followFocus()) {\n      return manager.on(e => this.listBehavior.goto(this._getItem(e)!, {toggle: true}));\n    }\n\n    return manager;\n  });\n\n  constructor(readonly inputs: ListboxInputs<V>) {\n    this.readonly = inputs.readonly;\n    this.orientation = inputs.orientation;\n    this.multi = inputs.multi;\n    this.listBehavior = new List(inputs);\n  }\n\n  /** Returns a set of violations */\n  validate(): string[] {\n    const violations: string[] = [];\n\n    if (!this.inputs.multi() && this.inputs.value().length > 1) {\n      violations.push(\n        `A single-select listbox should not have multiple selected options. Selected options: ${this.inputs.value().join(', ')}`,\n      );\n    }\n\n    return violations;\n  }\n\n  /** Handles keydown events for the listbox. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /**\n   * Sets the listbox to it's default initial state.\n   *\n   * Sets the active index of the listbox to the first focusable selected\n   * item if one exists. Otherwise, sets focus to the first focusable item.\n   *\n   * This method should be called once the listbox and it's options are properly initialized,\n   * meaning the ListboxPattern and OptionPatterns should have references to each other before this\n   * is called.\n   */\n  setDefaultState() {\n    let firstItem: OptionPattern<V> | null = null;\n\n    for (const item of this.inputs.items()) {\n      if (this.listBehavior.isFocusable(item)) {\n        if (!firstItem) {\n          firstItem = item;\n        }\n        if (item.selected()) {\n          this.inputs.activeItem.set(item);\n          return;\n        }\n      }\n    }\n\n    if (firstItem) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  protected _getItem(e: PointerEvent) {\n    if (!(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const element = e.target.closest('[role=\"option\"]');\n    return this.inputs.items().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\n\n/**\n * Represents the properties exposed by a listbox that need to be accessed by an option.\n * This exists to avoid circular dependency errors between the listbox and option.\n */\ninterface ListboxPattern<V> {\n  inputs: ListInputs<OptionPattern<V>, V>;\n  listBehavior: List<OptionPattern<V>, V>;\n}\n\n/** Represents the required inputs for an option in a listbox. */\nexport interface OptionInputs<V> extends Omit<ListItem<V>, 'index' | 'selectable'> {\n  listbox: SignalLike<ListboxPattern<V> | undefined>;\n}\n\n/** Represents an option in a listbox. */\nexport class OptionPattern<V> {\n  /** A unique identifier for the option. */\n  id: SignalLike<string>;\n\n  /** The value of the option. */\n  value: SignalLike<V>;\n\n  /** The position of the option in the list. */\n  index = computed(() => this.listbox()?.inputs.items().indexOf(this) ?? -1);\n\n  /** Whether the option is active. */\n  active = computed(() => this.listbox()?.inputs.activeItem() === this);\n\n  /** Whether the option is selected. */\n  selected = computed(() => this.listbox()?.inputs.value().includes(this.value()));\n\n  /** Whether the option is selectable. */\n  selectable = () => true;\n\n  /** Whether the option is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The text used by the typeahead search. */\n  searchTerm: SignalLike<string>;\n\n  /** A reference to the parent listbox. */\n  listbox: SignalLike<ListboxPattern<V> | undefined>;\n\n  /** The tab index of the option. */\n  tabIndex = computed(() => this.listbox()?.listBehavior.getItemTabindex(this));\n\n  /** The html element that should receive focus. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  constructor(args: OptionInputs<V>) {\n    this.id = args.id;\n    this.value = args.value;\n    this.listbox = args.listbox;\n    this.element = args.element;\n    this.disabled = args.disabled;\n    this.searchTerm = args.searchTerm;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {ListboxInputs, ListboxPattern} from './listbox';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {OptionPattern} from './option';\nimport {ComboboxPattern, ComboboxListboxControls} from '../combobox/combobox';\n\nexport type ComboboxListboxInputs<V> = ListboxInputs<V> & {\n  /** The combobox controlling the listbox. */\n  combobox: SignalLike<ComboboxPattern<OptionPattern<V>, V> | undefined>;\n};\n\nexport class ComboboxListboxPattern<V>\n  extends ListboxPattern<V>\n  implements ComboboxListboxControls<OptionPattern<V>, V>\n{\n  /** A unique identifier for the popup. */\n  id = computed(() => this.inputs.id());\n\n  /** The ARIA role for the listbox. */\n  role = computed(() => 'listbox' as const);\n\n  /** The id of the active (focused) item in the listbox. */\n  activeId = computed(() => this.listBehavior.activeDescendant());\n\n  /** The list of options in the listbox. */\n  items: SignalLike<OptionPattern<V>[]> = computed(() => this.inputs.items());\n\n  /** The tab index for the listbox. Always -1 because the combobox handles focus. */\n  override tabIndex: SignalLike<-1 | 0> = () => -1;\n\n  /** Whether multiple items in the list can be selected at once. */\n  override multi = computed(() => {\n    return this.inputs.combobox()?.readonly() ? this.inputs.multi() : false;\n  });\n\n  constructor(override readonly inputs: ComboboxListboxInputs<V>) {\n    if (inputs.combobox()) {\n      inputs.focusMode = () => 'activedescendant';\n      inputs.element = inputs.combobox()!.inputs.inputEl;\n    }\n\n    super(inputs);\n  }\n\n  /** Noop. The combobox handles keydown events. */\n  override onKeydown(_: KeyboardEvent): void {}\n\n  /** Noop. The combobox handles pointerdown events. */\n  override onPointerdown(_: PointerEvent): void {}\n\n  /** Noop. The combobox controls the open state. */\n  override setDefaultState(): void {}\n\n  /** Navigates to the specified item in the listbox. */\n  focus = (item: OptionPattern<V>, opts?: {focusElement?: boolean}) => {\n    this.listBehavior.goto(item, opts);\n  };\n\n  /** Navigates to the next focusable item in the listbox. */\n  next = () => this.listBehavior.next();\n\n  /** Navigates to the previous focusable item in the listbox. */\n  prev = () => this.listBehavior.prev();\n\n  /** Navigates to the last focusable item in the listbox. */\n  last = () => this.listBehavior.last();\n\n  /** Navigates to the first focusable item in the listbox. */\n  first = () => this.listBehavior.first();\n\n  /** Unfocuses the currently focused item in the listbox. */\n  unfocus = () => this.listBehavior.unfocus();\n\n  /** Selects the specified item in the listbox. */\n  select = (item?: OptionPattern<V>) => this.listBehavior.select(item);\n\n  /** Toggles the selection state of the given item in the listbox. */\n  toggle = (item?: OptionPattern<V>) => this.listBehavior.toggle(item);\n\n  /** Clears the selection in the listbox. */\n  clearSelection = () => this.listBehavior.deselectAll();\n\n  /** Retrieves the OptionPattern associated with a pointer event. */\n  getItem = (e: PointerEvent) => this._getItem(e);\n\n  /** Retrieves the currently selected items in the listbox. */\n  getSelectedItems = () => {\n    // NOTE: We need to do this funky for loop to preserve the order of the selected values.\n    const items = [];\n    for (const value of this.inputs.value()) {\n      const item = this.items().find(i => i.value() === value);\n      if (item) {\n        items.push(item);\n      }\n    }\n    return items;\n  };\n\n  /** Sets the value of the combobox listbox. */\n  setValue = (value: V | undefined) => this.inputs.value.set(value ? [value] : []);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, Signal, signal} from '@angular/core';\nimport {KeyboardEventManager} from '../behaviors/event-manager';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\n\n/** The inputs for the MenuBarPattern class. */\nexport interface MenuBarInputs<V> extends Omit<ListInputs<MenuItemPattern<V>, V>, 'disabled'> {\n  /** The menu items contained in the menu. */\n  items: SignalLike<MenuItemPattern<V>[]>;\n\n  /** Callback function triggered when a menu item is selected. */\n  onSelect?: (value: V) => void;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n}\n\n/** The inputs for the MenuPattern class. */\nexport interface MenuInputs<V>\n  extends Omit<ListInputs<MenuItemPattern<V>, V>, 'value' | 'disabled'> {\n  /** The unique ID of the menu. */\n  id: SignalLike<string>;\n\n  /** The menu items contained in the menu. */\n  items: SignalLike<MenuItemPattern<V>[]>;\n\n  /** A reference to the parent menu or menu trigger. */\n  parent: SignalLike<MenuTriggerPattern<V> | MenuItemPattern<V> | undefined>;\n\n  /** Callback function triggered when a menu item is selected. */\n  onSelect?: (value: V) => void;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n}\n\n/** The inputs for the MenuTriggerPattern class. */\nexport interface MenuTriggerInputs<V> {\n  /** A reference to the menu trigger element. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  /** A reference to the menu associated with the trigger. */\n  menu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** The text direction of the menu bar. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n}\n\n/** The inputs for the MenuItemPattern class. */\nexport interface MenuItemInputs<V> extends Omit<ListItem<V>, 'index' | 'selectable'> {\n  /** A reference to the parent menu or menu trigger. */\n  parent: SignalLike<MenuPattern<V> | MenuBarPattern<V> | undefined>;\n\n  /** A reference to the submenu associated with the menu item. */\n  submenu: SignalLike<MenuPattern<V> | undefined>;\n}\n\n/** The menu ui pattern class. */\nexport class MenuPattern<V> {\n  /** The unique ID of the menu. */\n  id: SignalLike<string>;\n\n  /** The role of the menu. */\n  role = () => 'menu';\n\n  /** Whether the menu is visible. */\n  isVisible = computed(() => (this.inputs.parent() ? !!this.inputs.parent()?.expanded() : true));\n\n  /** Controls list behavior for the menu items. */\n  listBehavior: List<MenuItemPattern<V>, V>;\n\n  /** Whether the menu or any of its child elements are currently focused. */\n  isFocused = signal(false);\n\n  /** Whether the menu has received focus. */\n  hasBeenFocused = signal(false);\n\n  /** Whether the menu should be focused on mouse over. */\n  shouldFocus = computed(() => {\n    const root = this.root();\n\n    if (root instanceof MenuTriggerPattern) {\n      return true;\n    }\n\n    if (root instanceof MenuBarPattern || root instanceof MenuPattern) {\n      return root.isFocused();\n    }\n\n    return false;\n  });\n\n  /** The key used to expand sub-menus. */\n  private _expandKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key used to collapse sub-menus. */\n  private _collapseKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** The regexp used to decide if a key should trigger typeahead. */\n  typeaheadRegexp = /^.$/;\n\n  /** The root of the menu. */\n  root: Signal<MenuTriggerPattern<V> | MenuBarPattern<V> | MenuPattern<V> | undefined> = computed(\n    () => {\n      const parent = this.inputs.parent();\n\n      if (!parent) {\n        return this;\n      }\n\n      if (parent instanceof MenuTriggerPattern) {\n        return parent;\n      }\n\n      const grandparent = parent.inputs.parent();\n\n      if (grandparent instanceof MenuBarPattern) {\n        return grandparent;\n      }\n\n      return grandparent?.root();\n    },\n  );\n\n  /** Handles keyboard events for the menu. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on('ArrowDown', () => this.next())\n      .on('ArrowUp', () => this.prev())\n      .on('Home', () => this.first())\n      .on('End', () => this.last())\n      .on('Enter', () => this.trigger())\n      .on('Escape', () => this.closeAll())\n      .on(this._expandKey, () => this.expand())\n      .on(this._collapseKey, () => this.collapse())\n      .on(this.dynamicSpaceKey, () => this.trigger())\n      .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n  });\n\n  constructor(readonly inputs: MenuInputs<V>) {\n    this.id = inputs.id;\n    this.listBehavior = new List<MenuItemPattern<V>, V>({\n      ...inputs,\n      value: signal([]),\n      disabled: () => false,\n    });\n  }\n\n  /** Sets the default state for the menu. */\n  setDefaultState() {\n    if (!this.inputs.parent()) {\n      this.inputs.activeItem.set(this.inputs.items()[0]);\n    }\n  }\n\n  /** Handles keyboard events for the menu. */\n  onKeydown(event: KeyboardEvent) {\n    this.keydownManager().handle(event);\n  }\n\n  /** Handles mouseover events for the menu. */\n  onMouseOver(event: MouseEvent) {\n    if (!this.isVisible()) {\n      return;\n    }\n\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (!item) {\n      return;\n    }\n\n    const activeItem = this?.inputs.activeItem();\n\n    if (activeItem && activeItem !== item) {\n      activeItem.close();\n    }\n\n    if (item.expanded() && item.submenu()?.inputs.activeItem()) {\n      item.submenu()?.inputs.activeItem()?.close();\n      item.submenu()?.listBehavior.unfocus();\n    }\n\n    item.open();\n    this.listBehavior.goto(item, {focusElement: this.shouldFocus()});\n  }\n\n  /** Handles mouseout events for the menu. */\n  onMouseOut(event: MouseEvent) {\n    if (this.isFocused()) {\n      return;\n    }\n\n    const root = this.root();\n    const parent = this.inputs.parent();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!root || !parent || parent instanceof MenuTriggerPattern) {\n      return;\n    }\n\n    const grandparent = parent.inputs.parent();\n\n    if (!grandparent || grandparent instanceof MenuBarPattern) {\n      return;\n    }\n\n    if (!grandparent.inputs.element()?.contains(relatedTarget)) {\n      parent.close();\n    }\n  }\n\n  /** Handles click events for the menu. */\n  onClick(event: MouseEvent) {\n    const relatedTarget = event.target as Node | null;\n    const item = this.inputs.items().find(i => i.element()?.contains(relatedTarget));\n\n    if (item) {\n      item.open();\n      this.listBehavior.goto(item);\n      this.submit(item);\n    }\n  }\n\n  /** Handles focusin events for the menu. */\n  onFocusIn() {\n    this.isFocused.set(true);\n    this.hasBeenFocused.set(true);\n  }\n\n  /** Handles the focusout event for the menu. */\n  onFocusOut(event: FocusEvent) {\n    const parent = this.inputs.parent();\n    const parentEl = parent?.inputs.element();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!relatedTarget) {\n      this.isFocused.set(false);\n      this.inputs.parent()?.close({refocus: true});\n    }\n\n    if (parent instanceof MenuItemPattern) {\n      const grandparent = parent.inputs.parent();\n      const siblings = grandparent?.inputs.items().filter(i => i !== parent);\n      const item = siblings?.find(i => i.element()?.contains(relatedTarget));\n\n      if (item) {\n        return;\n      }\n    }\n\n    if (\n      this.isVisible() &&\n      !parentEl?.contains(relatedTarget) &&\n      !this.inputs.element()?.contains(relatedTarget)\n    ) {\n      this.isFocused.set(false);\n      this.inputs.parent()?.close();\n    }\n  }\n\n  /** Focuses the previous menu item. */\n  prev() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.prev();\n  }\n\n  /** Focuses the next menu item. */\n  next() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.next();\n  }\n\n  /** Focuses the first menu item. */\n  first() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.first();\n  }\n\n  /** Focuses the last menu item. */\n  last() {\n    this.inputs.activeItem()?.close();\n    this.listBehavior.last();\n  }\n\n  /** Triggers the active menu item. */\n  trigger() {\n    this.inputs.activeItem()?.hasPopup()\n      ? this.inputs.activeItem()?.open({first: true})\n      : this.submit();\n  }\n\n  /** Submits the menu. */\n  submit(item = this.inputs.activeItem()) {\n    const root = this.root();\n\n    if (item && !item.disabled()) {\n      const isMenu = root instanceof MenuPattern;\n      const isMenuBar = root instanceof MenuBarPattern;\n      const isMenuTrigger = root instanceof MenuTriggerPattern;\n\n      if (!item.submenu() && isMenuTrigger) {\n        root.close({refocus: true});\n      }\n\n      if (!item.submenu() && isMenuBar) {\n        root.close();\n        root?.inputs.onSelect?.(item.value());\n      }\n\n      if (!item.submenu() && isMenu) {\n        root.inputs.activeItem()?.close({refocus: true});\n        root?.inputs.onSelect?.(item.value());\n      }\n    }\n  }\n\n  /** Collapses the current menu or focuses the previous item in the menubar. */\n  collapse() {\n    const root = this.root();\n    const parent = this.inputs.parent();\n\n    if (parent instanceof MenuItemPattern && !(parent.inputs.parent() instanceof MenuBarPattern)) {\n      parent.close({refocus: true});\n    } else if (root instanceof MenuBarPattern) {\n      root.prev();\n    }\n  }\n\n  /** Expands the current menu or focuses the next item in the menubar. */\n  expand() {\n    const root = this.root();\n    const activeItem = this.inputs.activeItem();\n\n    if (activeItem?.submenu()) {\n      activeItem.open({first: true});\n    } else if (root instanceof MenuBarPattern) {\n      root.next();\n    }\n  }\n\n  /** Closes the menu and all parent menus. */\n  closeAll() {\n    const root = this.root();\n\n    if (root instanceof MenuTriggerPattern) {\n      root.close({refocus: true});\n    }\n\n    if (root instanceof MenuBarPattern) {\n      root.close();\n    }\n\n    if (root instanceof MenuPattern) {\n      root.inputs.activeItem()?.close({refocus: true});\n    }\n  }\n}\n\n/** The menubar ui pattern class. */\nexport class MenuBarPattern<V> {\n  /** Controls list behavior for the menu items. */\n  listBehavior: List<MenuItemPattern<V>, V>;\n\n  /** The key used to navigate to the next item. */\n  private _nextKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key used to navigate to the previous item. */\n  private _previousKey = computed(() => {\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** The regexp used to decide if a key should trigger typeahead. */\n  typeaheadRegexp = /^.$/;\n\n  /** Whether the menubar or any of its children are currently focused. */\n  isFocused = signal(false);\n\n  /** Whether the menubar has been focused. */\n  hasBeenFocused = signal(false);\n\n  /** Handles keyboard events for the menu. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on(this._nextKey, () => this.next())\n      .on(this._previousKey, () => this.prev())\n      .on('End', () => this.listBehavior.last())\n      .on('Home', () => this.listBehavior.first())\n      .on('Enter', () => this.inputs.activeItem()?.open({first: true}))\n      .on('ArrowUp', () => this.inputs.activeItem()?.open({last: true}))\n      .on('ArrowDown', () => this.inputs.activeItem()?.open({first: true}))\n      .on(this.dynamicSpaceKey, () => this.inputs.activeItem()?.open({first: true}))\n      .on(this.typeaheadRegexp, e => this.listBehavior.search(e.key));\n  });\n\n  constructor(readonly inputs: MenuBarInputs<V>) {\n    this.listBehavior = new List<MenuItemPattern<V>, V>({...inputs, disabled: () => false});\n  }\n\n  /** Sets the default state for the menubar. */\n  setDefaultState() {\n    this.inputs.activeItem.set(this.inputs.items()[0]);\n  }\n\n  /** Handles keyboard events for the menu. */\n  onKeydown(event: KeyboardEvent) {\n    this.keydownManager().handle(event);\n  }\n\n  /** Handles click events for the menu bar. */\n  onClick(event: MouseEvent) {\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (!item) {\n      return;\n    }\n\n    this.goto(item);\n    item.expanded() ? item.close() : item.open();\n  }\n\n  /** Handles mouseover events for the menu bar. */\n  onMouseOver(event: MouseEvent) {\n    const item = this.inputs.items().find(i => i.element()?.contains(event.target as Node));\n\n    if (item) {\n      this.goto(item, {focusElement: this.isFocused()});\n    }\n  }\n\n  /** Handles focusin events for the menu bar. */\n  onFocusIn() {\n    this.isFocused.set(true);\n    this.hasBeenFocused.set(true);\n  }\n\n  /** Handles focusout events for the menu bar. */\n  onFocusOut(event: FocusEvent) {\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (!this.inputs.element()?.contains(relatedTarget)) {\n      this.isFocused.set(false);\n      this.close();\n    }\n  }\n\n  /** Goes to and optionally focuses the specified menu item. */\n  goto(item: MenuItemPattern<V>, opts?: {focusElement?: boolean}) {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.goto(item, opts);\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open();\n    }\n\n    if (item === prevItem) {\n      if (item.expanded() && item.submenu()?.inputs.activeItem()) {\n        item.submenu()?.inputs.activeItem()?.close();\n        item.submenu()?.listBehavior.unfocus();\n      }\n    }\n  }\n\n  /** Focuses the next menu item. */\n  next() {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.next();\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open({first: true});\n    }\n  }\n\n  /** Focuses the previous menu item. */\n  prev() {\n    const prevItem = this.inputs.activeItem();\n    this.listBehavior.prev();\n\n    if (prevItem?.expanded()) {\n      prevItem?.close();\n      this.inputs.activeItem()?.open({first: true});\n    }\n  }\n\n  /** Closes the menubar and refocuses the root menu bar item. */\n  close() {\n    this.inputs.activeItem()?.close({refocus: this.isFocused()});\n  }\n}\n\n/** The menu trigger ui pattern class. */\nexport class MenuTriggerPattern<V> {\n  /** Whether the menu is expanded. */\n  expanded = signal(false);\n\n  /** The role of the menu trigger. */\n  role = () => 'button';\n\n  /** Whether the menu trigger has a popup. */\n  hasPopup = () => true;\n\n  /** The menu associated with the trigger. */\n  menu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** The tab index of the menu trigger. */\n  tabIndex = computed(() => (this.expanded() && this.menu()?.inputs.activeItem() ? -1 : 0));\n\n  /** Handles keyboard events for the menu trigger. */\n  keydownManager = computed(() => {\n    return new KeyboardEventManager()\n      .on(' ', () => this.open({first: true}))\n      .on('Enter', () => this.open({first: true}))\n      .on('ArrowDown', () => this.open({first: true}))\n      .on('ArrowUp', () => this.open({last: true}))\n      .on('Escape', () => this.close({refocus: true}));\n  });\n\n  constructor(readonly inputs: MenuTriggerInputs<V>) {\n    this.menu = this.inputs.menu;\n  }\n\n  /** Handles keyboard events for the menu trigger. */\n  onKeydown(event: KeyboardEvent) {\n    this.keydownManager().handle(event);\n  }\n\n  /** Handles click events for the menu trigger. */\n  onClick() {\n    this.expanded() ? this.close() : this.open({first: true});\n  }\n\n  /** Handles focusout events for the menu trigger. */\n  onFocusOut(event: FocusEvent) {\n    const element = this.inputs.element();\n    const relatedTarget = event.relatedTarget as Node | null;\n\n    if (\n      this.expanded() &&\n      !element?.contains(relatedTarget) &&\n      !this.inputs.menu()?.inputs.element()?.contains(relatedTarget)\n    ) {\n      this.close();\n    }\n  }\n\n  /** Opens the menu. */\n  open(opts?: {first?: boolean; last?: boolean}) {\n    this.expanded.set(true);\n\n    if (opts?.first) {\n      this.inputs.menu()?.first();\n    } else if (opts?.last) {\n      this.inputs.menu()?.last();\n    }\n  }\n\n  /** Closes the menu. */\n  close(opts: {refocus?: boolean} = {}) {\n    this.expanded.set(false);\n    this.menu()?.listBehavior.unfocus();\n\n    if (opts.refocus) {\n      this.inputs.element()?.focus();\n    }\n\n    let menuitems = this.inputs.menu()?.inputs.items() ?? [];\n\n    while (menuitems.length) {\n      const menuitem = menuitems.pop();\n      menuitem?._expanded.set(false);\n      menuitem?.inputs.parent()?.listBehavior.unfocus();\n      menuitems = menuitems.concat(menuitem?.submenu()?.inputs.items() ?? []);\n    }\n  }\n}\n\n/** The menu item ui pattern class. */\nexport class MenuItemPattern<V> implements ListItem<V> {\n  /** The value of the menu item. */\n  value: SignalLike<V>;\n\n  /** The unique ID of the menu item. */\n  id: SignalLike<string>;\n\n  /** Whether the menu item is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The search term for the menu item. */\n  searchTerm: SignalLike<string>;\n\n  /** The element of the menu item. */\n  element: SignalLike<HTMLElement | undefined>;\n\n  /** Whether the menu item is active. */\n  isActive = computed(() => this.inputs.parent()?.inputs.activeItem() === this);\n\n  /** The tab index of the menu item. */\n  tabIndex = computed(() => {\n    if (this.submenu() && this.submenu()?.inputs.activeItem()) {\n      return -1;\n    }\n    return this.inputs.parent()?.listBehavior.getItemTabindex(this) ?? -1;\n  });\n\n  /** The position of the menu item in the menu. */\n  index = computed(() => this.inputs.parent()?.inputs.items().indexOf(this) ?? -1);\n\n  /** Whether the menu item is expanded. */\n  expanded = computed(() => (this.submenu() ? this._expanded() : null));\n\n  /** Whether the menu item is expanded. */\n  _expanded = signal(false);\n\n  /** The ID of the menu that the menu item controls. */\n  controls = signal<string | undefined>(undefined);\n\n  /** The role of the menu item. */\n  role = () => 'menuitem';\n\n  /** Whether the menu item has a popup. */\n  hasPopup = computed(() => !!this.submenu());\n\n  /** The submenu associated with the menu item. */\n  submenu: SignalLike<MenuPattern<V> | undefined>;\n\n  /** Whether the menu item is selectable. */\n  selectable: SignalLike<boolean>;\n\n  constructor(readonly inputs: MenuItemInputs<V>) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.element = inputs.element;\n    this.disabled = inputs.disabled;\n    this.submenu = this.inputs.submenu;\n    this.searchTerm = inputs.searchTerm;\n    this.selectable = computed(() => !this.submenu());\n  }\n\n  /** Opens the submenu. */\n  open(opts?: {first?: boolean; last?: boolean}) {\n    this._expanded.set(true);\n\n    if (opts?.first) {\n      this.submenu()?.first();\n    }\n    if (opts?.last) {\n      this.submenu()?.last();\n    }\n  }\n\n  /** Closes the submenu. */\n  close(opts: {refocus?: boolean} = {}) {\n    this._expanded.set(false);\n\n    if (opts.refocus) {\n      this.inputs.parent()?.listBehavior.goto(this);\n    }\n\n    let menuitems = this.inputs.submenu()?.inputs.items() ?? [];\n\n    while (menuitems.length) {\n      const menuitem = menuitems.pop();\n      menuitem?._expanded.set(false);\n      menuitem?.inputs.parent()?.listBehavior.unfocus();\n      menuitems = menuitems.concat(menuitem?.submenu()?.inputs.items() ?? []);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nexport type SignalLike<T> = () => T;\n\nexport interface WritableSignalLike<T> extends SignalLike<T> {\n  set(value: T): void;\n  update(updateFn: (value: T) => T): void;\n}\n\n/** Converts a getter setter style signal to a WritableSignalLike. */\nexport function convertGetterSetterToWritableSignalLike<T>(\n  getter: () => T,\n  setter: (v: T) => void,\n): WritableSignalLike<T> {\n  // tslint:disable-next-line:ban Have to use `Object.assign` to preserve the getter function.\n  return Object.assign(getter, {\n    set: setter,\n    update: (updateCallback: (v: T) => T) => setter(updateCallback(getter())),\n  });\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {computed} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../signal-like/signal-like';\n\n/** Represents an item that can be expanded or collapsed. */\nexport interface ExpansionItem {\n  /** Whether the item is expandable. */\n  expandable: SignalLike<boolean>;\n\n  /** Used to uniquely identify an expansion item. */\n  expansionId: SignalLike<string>;\n\n  /** Whether the expansion is disabled. */\n  disabled: SignalLike<boolean>;\n}\n\nexport interface ExpansionControl extends ExpansionItem {}\n/**\n * Controls a single item's expansion state and interactions,\n * delegating actual state changes to an Expansion manager.\n */\nexport class ExpansionControl {\n  /** Whether this specific item is currently expanded. Derived from the Expansion manager. */\n  readonly isExpanded = computed(() => this.inputs.expansionManager.isExpanded(this));\n\n  /** Whether this item can be expanded. */\n  readonly isExpandable = computed(() => this.inputs.expansionManager.isExpandable(this));\n\n  constructor(readonly inputs: ExpansionItem & {expansionManager: ListExpansion}) {\n    this.expansionId = inputs.expansionId;\n    this.expandable = inputs.expandable;\n    this.disabled = inputs.disabled;\n  }\n\n  /** Requests the Expansion manager to open this item. */\n  open() {\n    this.inputs.expansionManager.open(this);\n  }\n\n  /** Requests the Expansion manager to close this item. */\n  close() {\n    this.inputs.expansionManager.close(this);\n  }\n\n  /** Requests the Expansion manager to toggle this item. */\n  toggle() {\n    this.inputs.expansionManager.toggle(this);\n  }\n}\n\n/** Represents the required inputs for an expansion behavior. */\nexport interface ListExpansionInputs {\n  /** Whether multiple items can be expanded at once. */\n  multiExpandable: SignalLike<boolean>;\n\n  /** An array of ids of the currently expanded items. */\n  expandedIds: WritableSignalLike<string[]>;\n\n  /** An array of expansion items. */\n  items: SignalLike<ExpansionItem[]>;\n\n  /** Whether all expansions are disabled. */\n  disabled: SignalLike<boolean>;\n}\n\n/** Manages the expansion state of a list of items. */\nexport class ListExpansion {\n  /** A signal holding an array of ids of the currently expanded items. */\n  expandedIds: WritableSignalLike<string[]>;\n\n  constructor(readonly inputs: ListExpansionInputs) {\n    this.expandedIds = inputs.expandedIds;\n  }\n\n  /** Opens the specified item. */\n  open(item: ExpansionItem) {\n    if (!this.isExpandable(item)) return;\n    if (this.isExpanded(item)) return;\n    if (!this.inputs.multiExpandable()) {\n      this.closeAll();\n    }\n    this.expandedIds.update(ids => ids.concat(item.expansionId()));\n  }\n\n  /** Closes the specified item. */\n  close(item: ExpansionItem) {\n    if (this.isExpandable(item)) {\n      this.expandedIds.update(ids => ids.filter(id => id !== item.expansionId()));\n    }\n  }\n\n  /** Toggles the expansion state of the specified item. */\n  toggle(item: ExpansionItem) {\n    this.expandedIds().includes(item.expansionId()) ? this.close(item) : this.open(item);\n  }\n\n  /** Opens all focusable items in the list. */\n  openAll() {\n    if (this.inputs.multiExpandable()) {\n      for (const item of this.inputs.items()) {\n        this.open(item);\n      }\n    }\n  }\n\n  /** Closes all focusable items in the list. */\n  closeAll() {\n    for (const item of this.inputs.items()) {\n      this.close(item);\n    }\n  }\n\n  /** Checks whether the specified item is expandable / collapsible. */\n  isExpandable(item: ExpansionItem) {\n    return !this.inputs.disabled() && !item.disabled() && item.expandable();\n  }\n\n  /** Checks whether the specified item is currently expanded. */\n  isExpanded(item: ExpansionItem): boolean {\n    return this.expandedIds().includes(item.expansionId());\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../signal-like/signal-like';\n\n/** Represents the required inputs for the label control. */\nexport interface LabelControlInputs {\n  /** The default `aria-labelledby` ids. */\n  defaultLabelledBy: SignalLike<string[]>;\n}\n\n/** Represents the optional inputs for the label control. */\nexport interface LabelControlOptionalInputs {\n  /** The `aria-label`. */\n  label?: SignalLike<string | undefined>;\n\n  /** The user-provided `aria-labelledby` ids. */\n  labelledBy?: SignalLike<string[]>;\n}\n\n/** Controls label and description of an element. */\nexport class LabelControl {\n  /** The `aria-label`. */\n  readonly label = computed(() => this.inputs.label?.());\n\n  /** The `aria-labelledby` ids. */\n  readonly labelledBy = computed(() => {\n    const label = this.label();\n    const labelledBy = this.inputs.labelledBy?.();\n    const defaultLabelledBy = this.inputs.defaultLabelledBy();\n\n    if (labelledBy && labelledBy.length > 0) {\n      return labelledBy;\n    }\n\n    // If an aria-label is provided by developers, do not set aria-labelledby with the\n    // defaultLabelledBy value because if both attributes are set, aria-labelledby will be used.\n    if (label) {\n      return [];\n    }\n\n    return defaultLabelledBy;\n  });\n\n  constructor(readonly inputs: LabelControlInputs & LabelControlOptionalInputs) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {\n  ExpansionItem,\n  ExpansionControl,\n  ListExpansionInputs,\n  ListExpansion,\n} from '../behaviors/expansion/expansion';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {LabelControl, LabelControlOptionalInputs} from '../behaviors/label/label';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\n\n/** The required inputs to tabs. */\nexport interface TabInputs\n  extends Omit<ListItem<string>, 'searchTerm' | 'index' | 'selectable'>,\n    Omit<ExpansionItem, 'expansionId' | 'expandable'> {\n  /** The parent tablist that controls the tab. */\n  tablist: SignalLike<TabListPattern>;\n\n  /** The remote tabpanel controlled by the tab. */\n  tabpanel: SignalLike<TabPanelPattern | undefined>;\n}\n\n/** A tab in a tablist. */\nexport class TabPattern {\n  /** Controls expansion for this tab. */\n  readonly expansion: ExpansionControl;\n\n  /** A global unique identifier for the tab. */\n  readonly id: SignalLike<string>;\n\n  /** The index of the tab. */\n  readonly index = computed(() => this.inputs.tablist().inputs.items().indexOf(this));\n\n  /** A local unique identifier for the tab. */\n  readonly value: SignalLike<string>;\n\n  /** Whether the tab is disabled. */\n  readonly disabled: SignalLike<boolean>;\n\n  /** The html element that should receive focus. */\n  readonly element: SignalLike<HTMLElement | undefined>;\n\n  /** Whether the tab is selectable. */\n  readonly selectable = () => true;\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm = () => ''; // Unused because tabs do not support typeahead.\n\n  /** Whether this tab has expandable content. */\n  readonly expandable = computed(() => this.expansion.expandable());\n\n  /** The unique identifier used by the expansion behavior. */\n  readonly expansionId = computed(() => this.expansion.expansionId());\n\n  /** Whether the tab is expanded. */\n  readonly expanded = computed(() => this.expansion.isExpanded());\n\n  /** Whether the tab is active. */\n  readonly active = computed(() => this.inputs.tablist().inputs.activeItem() === this);\n\n  /** Whether the tab is selected. */\n  readonly selected = computed(() => !!this.inputs.tablist().inputs.value().includes(this.value()));\n\n  /** The tab index of the tab. */\n  readonly tabIndex = computed(() => this.inputs.tablist().listBehavior.getItemTabindex(this));\n\n  /** The id of the tabpanel associated with the tab. */\n  readonly controls = computed(() => this.inputs.tabpanel()?.id());\n\n  constructor(readonly inputs: TabInputs) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.disabled = inputs.disabled;\n    this.element = inputs.element;\n    this.expansion = new ExpansionControl({\n      ...inputs,\n      expansionId: inputs.value,\n      expandable: () => true,\n      expansionManager: inputs.tablist().expansionManager,\n    });\n  }\n}\n\n/** The required inputs for the tabpanel. */\nexport interface TabPanelInputs extends LabelControlOptionalInputs {\n  id: SignalLike<string>;\n  tab: SignalLike<TabPattern | undefined>;\n  value: SignalLike<string>;\n}\n\n/** A tabpanel associated with a tab. */\nexport class TabPanelPattern {\n  /** A global unique identifier for the tabpanel. */\n  readonly id: SignalLike<string>;\n\n  /** A local unique identifier for the tabpanel. */\n  readonly value: SignalLike<string>;\n\n  /** Controls label for this tabpanel. */\n  readonly labelManager: LabelControl;\n\n  /** Whether the tabpanel is hidden. */\n  readonly hidden = computed(() => this.inputs.tab()?.expanded() === false);\n\n  /** The tab index of this tabpanel. */\n  readonly tabIndex = computed(() => (this.hidden() ? -1 : 0));\n\n  /** The aria-labelledby value for this tabpanel. */\n  readonly labelledBy = computed(() =>\n    this.labelManager.labelledBy().length > 0\n      ? this.labelManager.labelledBy().join(' ')\n      : undefined,\n  );\n\n  constructor(readonly inputs: TabPanelInputs) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.labelManager = new LabelControl({\n      ...inputs,\n      defaultLabelledBy: computed(() => (this.inputs.tab() ? [this.inputs.tab()!.id()] : [])),\n    });\n  }\n}\n\n/** The required inputs for the tablist. */\nexport type TabListInputs = Omit<ListInputs<TabPattern, string>, 'multi' | 'typeaheadDelay'> &\n  Omit<ListExpansionInputs, 'multiExpandable' | 'expandedIds' | 'items'>;\n\n/** Controls the state of a tablist. */\nexport class TabListPattern {\n  /** The list behavior for the tablist. */\n  readonly listBehavior: List<TabPattern, string>;\n\n  /** Controls expansion for the tablist. */\n  readonly expansionManager: ListExpansion;\n\n  /** Whether the tablist is vertically or horizontally oriented. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** Whether the tablist is disabled. */\n  readonly disabled: SignalLike<boolean>;\n\n  /** The tab index of the tablist. */\n  readonly tabIndex = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active tab. */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** Whether selection should follow focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** The key used to navigate to the previous tab in the tablist. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next item in the list. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The keydown event manager for the tablist. */\n  readonly keydown = computed(() => {\n    return new KeyboardEventManager()\n      .on(this.prevKey, () => this.listBehavior.prev({select: this.followFocus()}))\n      .on(this.nextKey, () => this.listBehavior.next({select: this.followFocus()}))\n      .on('Home', () => this.listBehavior.first({select: this.followFocus()}))\n      .on('End', () => this.listBehavior.last({select: this.followFocus()}))\n      .on(' ', () => this.listBehavior.select())\n      .on('Enter', () => this.listBehavior.select());\n  });\n\n  /** The pointerdown event manager for the tablist. */\n  readonly pointerdown = computed(() => {\n    return new PointerEventManager().on(e =>\n      this.listBehavior.goto(this._getItem(e)!, {select: true}),\n    );\n  });\n\n  constructor(readonly inputs: TabListInputs) {\n    this.disabled = inputs.disabled;\n    this.orientation = inputs.orientation;\n\n    this.listBehavior = new List({\n      ...inputs,\n      multi: () => false,\n      typeaheadDelay: () => 0, // Tabs do not support typeahead.\n    });\n\n    this.expansionManager = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => false,\n      expandedIds: this.inputs.value,\n    });\n  }\n\n  /**\n   * Sets the tablist to its default initial state.\n   *\n   * Sets the active index of the tablist to the first focusable selected\n   * tab if one exists. Otherwise, sets focus to the first focusable tab.\n   *\n   * This method should be called once the tablist and its tabs are properly initialized.\n   */\n  setDefaultState() {\n    let firstItem: TabPattern | undefined;\n\n    for (const item of this.inputs.items()) {\n      if (!this.listBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.inputs.activeItem.set(item);\n        return;\n      }\n    }\n    if (firstItem !== undefined) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events for the tablist. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** The pointerdown event manager for the tablist. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Returns the tab item associated with the given pointer event. */\n  private _getItem(e: PointerEvent) {\n    if (!(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const element = e.target.closest('[role=\"tab\"]');\n    return this.inputs.items().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {KeyboardEventManager} from '../behaviors/event-manager';\nimport {List, ListInputs} from '../behaviors/list/list';\nimport {ToolbarWidgetPattern} from './toolbar-widget';\n\n/** Represents the required inputs for a toolbar. */\nexport type ToolbarInputs<V> = Omit<\n  ListInputs<ToolbarWidgetPattern<V>, V>,\n  'multi' | 'typeaheadDelay' | 'value' | 'selectionMode' | 'focusMode'\n> & {\n  /** A function that returns the toolbar item associated with a given element. */\n  getItem: (e: Element) => ToolbarWidgetPattern<V> | undefined;\n};\n\n/** Controls the state of a toolbar. */\nexport class ToolbarPattern<V> {\n  /** The list behavior for the toolbar. */\n  readonly listBehavior: List<ToolbarWidgetPattern<V>, V>;\n\n  /** Whether the tablist is vertically or horizontally oriented. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** Whether disabled items in the group should be focusable. */\n  readonly softDisabled: SignalLike<boolean>;\n\n  /** Whether the toolbar is disabled. */\n  readonly disabled = computed(() => this.listBehavior.disabled());\n\n  /** The tab index of the toolbar (if using activedescendant). */\n  readonly tabIndex = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active widget (if using activedescendant). */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** The currently active item in the toolbar. */\n  readonly activeItem = () => this.listBehavior.inputs.activeItem();\n\n  /** The key used to navigate to the previous widget. */\n  private readonly _prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next widget. */\n  private readonly _nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The alternate key used to navigate to the previous widget. */\n  private readonly _altPrevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n    }\n    return 'ArrowUp';\n  });\n\n  /** The alternate key used to navigate to the next widget. */\n  private readonly _altNextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n    }\n    return 'ArrowDown';\n  });\n\n  /** The keydown event manager for the toolbar. */\n  private readonly _keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n\n    return manager\n      .on(this._nextKey, () => this.listBehavior.next())\n      .on(this._prevKey, () => this.listBehavior.prev())\n      .on(this._altNextKey, () => this._groupNext())\n      .on(this._altPrevKey, () => this._groupPrev())\n      .on(' ', () => this.select())\n      .on('Enter', () => this.select())\n      .on('Home', () => this.listBehavior.first())\n      .on('End', () => this.listBehavior.last());\n  });\n\n  /** Navigates to the next widget in a widget group. */\n  private _groupNext() {\n    const currGroup = this.inputs.activeItem()?.group();\n    const nextGroup = this.listBehavior.navigationBehavior.peekNext()?.group();\n\n    if (!currGroup) {\n      return;\n    }\n\n    if (currGroup !== nextGroup) {\n      this.listBehavior.goto(\n        this.listBehavior.navigationBehavior.peekFirst(currGroup.inputs.items())!,\n      );\n\n      return;\n    }\n\n    this.listBehavior.next();\n  }\n\n  /** Navigates to the previous widget in a widget group. */\n  private _groupPrev() {\n    const currGroup = this.inputs.activeItem()?.group();\n    const nextGroup = this.listBehavior.navigationBehavior.peekPrev()?.group();\n\n    if (!currGroup) {\n      return;\n    }\n\n    if (currGroup !== nextGroup) {\n      this.listBehavior.goto(\n        this.listBehavior.navigationBehavior.peekLast(currGroup.inputs.items())!,\n      );\n\n      return;\n    }\n\n    this.listBehavior.prev();\n  }\n\n  /** Navigates to the widget targeted by a pointer event. */\n  private _goto(e: MouseEvent) {\n    const item = this.inputs.getItem(e.target as Element);\n\n    if (item) {\n      this.listBehavior.goto(item);\n      this.select();\n    }\n  }\n\n  select() {\n    const group = this.inputs.activeItem()?.group();\n\n    if (!group?.multi()) {\n      group?.inputs.items().forEach(i => this.listBehavior.deselect(i));\n    }\n\n    this.listBehavior.toggle();\n  }\n\n  constructor(readonly inputs: ToolbarInputs<V>) {\n    this.orientation = inputs.orientation;\n    this.softDisabled = inputs.softDisabled;\n\n    this.listBehavior = new List({\n      ...inputs,\n      multi: () => true,\n      focusMode: () => 'roving',\n      selectionMode: () => 'explicit',\n      value: signal([] as V[]),\n      typeaheadDelay: () => 0, // Toolbar widgets do not support typeahead.\n    });\n  }\n\n  /** Handles keydown events for the toolbar. */\n  onKeydown(event: KeyboardEvent) {\n    if (this.disabled()) return;\n    this._keydown().handle(event);\n  }\n\n  onPointerdown(event: PointerEvent) {\n    event.preventDefault();\n  }\n\n  /** Handles click events for the toolbar. */\n  onClick(event: MouseEvent) {\n    if (this.disabled()) return;\n    this._goto(event);\n  }\n\n  /**\n   * Sets the toolbar to its default initial state.\n   *\n   * Sets the active index to the selected widget if one exists and is focusable.\n   * Otherwise, sets the active index to the first focusable widget.\n   */\n  setDefaultState() {\n    const firstItem = this.listBehavior.navigationBehavior.peekFirst(this.inputs.items());\n\n    if (firstItem) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  /** Validates the state of the toolbar and returns a list of accessibility violations. */\n  validate(): string[] {\n    const violations: string[] = [];\n    return violations;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {ListItem} from '../behaviors/list/list';\nimport type {ToolbarPattern} from './toolbar';\nimport {ToolbarWidgetGroupPattern} from './toolbar-widget-group';\n\n/** Represents the required inputs for a toolbar widget in a toolbar. */\nexport interface ToolbarWidgetInputs<V>\n  extends Omit<ListItem<V>, 'searchTerm' | 'index' | 'selectable'> {\n  /** A reference to the parent toolbar. */\n  toolbar: SignalLike<ToolbarPattern<V>>;\n\n  /** A reference to the parent widget group. */\n  group: SignalLike<ToolbarWidgetGroupPattern<ToolbarWidgetPattern<V>, V> | undefined>;\n}\n\nexport class ToolbarWidgetPattern<V> implements ListItem<V> {\n  /** A unique identifier for the widget. */\n  readonly id = () => this.inputs.id();\n\n  /** The html element that should receive focus. */\n  readonly element = () => this.inputs.element();\n\n  /** Whether the widget is disabled. */\n  readonly disabled = () => this.inputs.disabled() || this.group()?.disabled() || false;\n\n  /** A reference to the parent toolbar. */\n  readonly group = () => this.inputs.group();\n\n  /** A reference to the toolbar containing the widget. */\n  readonly toolbar = () => this.inputs.toolbar();\n\n  /** The tabindex of the widget. */\n  readonly tabIndex = computed(() => this.toolbar().listBehavior.getItemTabindex(this));\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm = () => ''; // Unused because toolbar does not support typeahead.\n\n  /** The value associated with the widget. */\n  readonly value = () => this.inputs.value();\n\n  /** Whether the widget is selectable. */\n  readonly selectable = () => true; // Unused because toolbar does not support selection.\n\n  /** The position of the widget within the toolbar. */\n  readonly index = computed(() => this.toolbar().inputs.items().indexOf(this) ?? -1);\n\n  /** Whether the widget is selected (only relevant in a selection group). */\n  readonly selected = computed(() =>\n    this.toolbar().listBehavior.inputs.value().includes(this.value()),\n  );\n\n  /** Whether the widget is currently the active one (focused). */\n  readonly active: SignalLike<boolean> = computed(() => this.toolbar().activeItem() === this);\n\n  constructor(readonly inputs: ToolbarWidgetInputs<V>) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {ListItem} from '../behaviors/list/list';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport type {ToolbarPattern} from './toolbar';\n\n/** Represents the required inputs for a toolbar widget group. */\nexport interface ToolbarWidgetGroupInputs<T extends ListItem<V>, V> {\n  /** A reference to the parent toolbar. */\n  toolbar: SignalLike<ToolbarPattern<V> | undefined>;\n\n  /** Whether the widget group is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The list of items within the widget group. */\n  items: SignalLike<T[]>;\n\n  /** Whether the group allows multiple widgets to be selected. */\n  multi: SignalLike<boolean>;\n}\n\n/** A group of widgets within a toolbar that provides nested navigation. */\nexport class ToolbarWidgetGroupPattern<T extends ListItem<V>, V> {\n  /** Whether the widget is disabled. */\n  readonly disabled = () => this.inputs.disabled();\n\n  /** A reference to the parent toolbar. */\n  readonly toolbar = () => this.inputs.toolbar();\n\n  /** Whether the group allows multiple widgets to be selected. */\n  readonly multi = () => this.inputs.multi();\n\n  readonly searchTerm = () => ''; // Unused because toolbar does not support typeahead.\n  readonly value = () => '' as V; // Unused because toolbar does not support selection.\n  readonly selectable = () => true; // Unused because toolbar does not support selection.\n  readonly element = () => undefined; // Unused because toolbar does not focus the group element.\n\n  constructor(readonly inputs: ToolbarWidgetGroupInputs<T, V>) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {\n  ExpansionItem,\n  ExpansionControl,\n  ListExpansion,\n  ListExpansionInputs,\n} from '../behaviors/expansion/expansion';\nimport {ListFocus, ListFocusInputs, ListFocusItem} from '../behaviors/list-focus/list-focus';\nimport {\n  ListNavigation,\n  ListNavigationInputs,\n  ListNavigationItem,\n} from '../behaviors/list-navigation/list-navigation';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\n\n/** Inputs of the AccordionGroupPattern. */\nexport type AccordionGroupInputs = Omit<\n  ListNavigationInputs<AccordionTriggerPattern> &\n    ListFocusInputs<AccordionTriggerPattern> &\n    Omit<ListExpansionInputs, 'items'>,\n  'focusMode'\n>;\n\nconst focusMode = () => 'roving' as const;\n\nexport interface AccordionGroupPattern extends AccordionGroupInputs {}\n/** A pattern controls the nested Accordions. */\nexport class AccordionGroupPattern {\n  /** Controls navigation for the group. */\n  navigation: ListNavigation<AccordionTriggerPattern>;\n\n  /** Controls focus for the group. */\n  focusManager: ListFocus<AccordionTriggerPattern>;\n\n  /** Controls expansion for the group. */\n  expansionManager: ListExpansion;\n\n  constructor(readonly inputs: AccordionGroupInputs) {\n    this.wrap = inputs.wrap;\n    this.orientation = inputs.orientation;\n    this.textDirection = inputs.textDirection;\n    this.activeItem = inputs.activeItem;\n    this.disabled = inputs.disabled;\n    this.multiExpandable = inputs.multiExpandable;\n    this.items = inputs.items;\n    this.expandedIds = inputs.expandedIds;\n    this.softDisabled = inputs.softDisabled;\n    this.focusManager = new ListFocus({\n      ...inputs,\n      focusMode,\n    });\n    this.navigation = new ListNavigation({\n      ...inputs,\n      focusMode,\n      focusManager: this.focusManager,\n    });\n    this.expansionManager = new ListExpansion({\n      ...inputs,\n    });\n  }\n}\n\n/** Inputs for the AccordionTriggerPattern. */\nexport type AccordionTriggerInputs = Omit<ListNavigationItem & ListFocusItem, 'index'> &\n  Omit<ExpansionItem, 'expansionId' | 'expandable'> & {\n    /** A local unique identifier for the trigger. */\n    value: SignalLike<string>;\n\n    /** The parent accordion group that controls this trigger. */\n    accordionGroup: SignalLike<AccordionGroupPattern>;\n\n    /** The accordion panel controlled by this trigger. */\n    accordionPanel: SignalLike<AccordionPanelPattern | undefined>;\n  };\n\nexport interface AccordionTriggerPattern extends AccordionTriggerInputs {}\n/** A pattern controls the expansion state of an accordion. */\nexport class AccordionTriggerPattern {\n  /** Whether this tab has expandable content. */\n  expandable: SignalLike<boolean>;\n\n  /** The unique identifier used by the expansion behavior. */\n  expansionId: SignalLike<string>;\n\n  /** Whether an accordion is expanded. */\n  expanded: SignalLike<boolean>;\n\n  /** Controls the expansion state for the trigger. */\n  expansionControl: ExpansionControl;\n\n  /** Whether the trigger is active. */\n  active = computed(() => this.inputs.accordionGroup().activeItem() === this);\n\n  /** Id of the accordion panel controlled by the trigger. */\n  controls = computed(() => this.inputs.accordionPanel()?.id());\n\n  /** The tab index of the trigger. */\n  tabIndex = computed(() => (this.inputs.accordionGroup().focusManager.isFocusable(this) ? 0 : -1));\n\n  /** Whether the trigger is disabled. Disabling an accordion group disables all the triggers. */\n  disabled = computed(() => this.inputs.disabled() || this.inputs.accordionGroup().disabled());\n\n  /** The index of the trigger within its accordion group. */\n  index = computed(() => this.inputs.accordionGroup().items().indexOf(this));\n\n  constructor(readonly inputs: AccordionTriggerInputs) {\n    this.id = inputs.id;\n    this.element = inputs.element;\n    this.value = inputs.value;\n    this.expansionControl = new ExpansionControl({\n      ...inputs,\n      expansionId: inputs.value,\n      expandable: () => true,\n      expansionManager: inputs.accordionGroup().expansionManager,\n    });\n    this.expandable = this.expansionControl.isExpandable;\n    this.expansionId = this.expansionControl.expansionId;\n    this.expanded = this.expansionControl.isExpanded;\n  }\n\n  /** The key used to navigate to the previous accordion trigger. */\n  prevKey = computed(() => {\n    if (this.inputs.accordionGroup().orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.accordionGroup().textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next accordion trigger. */\n  nextKey = computed(() => {\n    if (this.inputs.accordionGroup().orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.accordionGroup().textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The keydown event manager for the accordion trigger. */\n  keydown = computed(() => {\n    return new KeyboardEventManager()\n      .on(this.prevKey, () => this.inputs.accordionGroup().navigation.prev())\n      .on(this.nextKey, () => this.inputs.accordionGroup().navigation.next())\n      .on('Home', () => this.inputs.accordionGroup().navigation.first())\n      .on('End', () => this.inputs.accordionGroup().navigation.last())\n      .on(' ', () => this.expansionControl.toggle())\n      .on('Enter', () => this.expansionControl.toggle());\n  });\n\n  /** The pointerdown event manager for the accordion trigger. */\n  pointerdown = computed(() => {\n    return new PointerEventManager().on(e => {\n      const item = this._getItem(e);\n\n      if (item) {\n        this.inputs.accordionGroup().navigation.goto(item);\n        this.expansionControl.toggle();\n      }\n    });\n  });\n\n  /** Handles keydown events on the trigger, delegating to the group if not disabled. */\n  onKeydown(event: KeyboardEvent): void {\n    this.keydown().handle(event);\n  }\n\n  /** Handles pointerdown events on the trigger, delegating to the group if not disabled. */\n  onPointerdown(event: PointerEvent): void {\n    this.pointerdown().handle(event);\n  }\n\n  /** Handles focus events on the trigger. This ensures the tabbing changes the active index. */\n  onFocus(event: FocusEvent): void {\n    const item = this._getItem(event);\n\n    if (item && this.inputs.accordionGroup().focusManager.isFocusable(item)) {\n      this.inputs.accordionGroup().focusManager.focus(item);\n    }\n  }\n\n  private _getItem(e: Event) {\n    if (!(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const element = e.target.closest('[role=\"button\"]');\n    return this.inputs\n      .accordionGroup()\n      .items()\n      .find(i => i.element() === element);\n  }\n}\n\n/** Represents the required inputs for the AccordionPanelPattern. */\nexport interface AccordionPanelInputs {\n  /** A global unique identifier for the panel. */\n  id: SignalLike<string>;\n\n  /** A local unique identifier for the panel, matching its trigger's value. */\n  value: SignalLike<string>;\n\n  /** The parent accordion trigger that controls this panel. */\n  accordionTrigger: SignalLike<AccordionTriggerPattern | undefined>;\n}\n\nexport interface AccordionPanelPattern extends AccordionPanelInputs {}\n/** Represents an accordion panel. */\nexport class AccordionPanelPattern {\n  /** Whether the accordion panel is hidden. True if the associated trigger is not expanded. */\n  hidden: SignalLike<boolean>;\n\n  constructor(readonly inputs: AccordionPanelInputs) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.accordionTrigger = inputs.accordionTrigger;\n    this.hidden = computed(() => inputs.accordionTrigger()?.expanded() === false);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed, signal} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\nimport {ExpansionItem, ExpansionControl, ListExpansion} from '../behaviors/expansion/expansion';\nimport {KeyboardEventManager, PointerEventManager, Modifier} from '../behaviors/event-manager';\n\n/** Represents the required inputs for a tree item. */\nexport interface TreeItemInputs<V> extends Omit<ListItem<V>, 'index'> {\n  /** The parent item. */\n  parent: SignalLike<TreeItemPattern<V> | TreePattern<V>>;\n\n  /** Whether this item has children. Children can be lazily loaded. */\n  hasChildren: SignalLike<boolean>;\n\n  /** The children items. */\n  children: SignalLike<TreeItemPattern<V>[]>;\n\n  /** The tree pattern this item belongs to. */\n  tree: SignalLike<TreePattern<V>>;\n}\n\n/**\n * Represents an item in a Tree.\n */\nexport class TreeItemPattern<V> implements ListItem<V>, ExpansionItem {\n  /** A unique identifier for this item. */\n  readonly id: SignalLike<string>;\n\n  /** The value of this item. */\n  readonly value: SignalLike<V>;\n\n  /** A reference to the item element. */\n  readonly element: SignalLike<HTMLElement | undefined>;\n\n  /** Whether the item is disabled. */\n  readonly disabled: SignalLike<boolean>;\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm: SignalLike<string>;\n\n  /** The tree pattern this item belongs to. */\n  readonly tree: SignalLike<TreePattern<V>>;\n\n  /** The parent item. */\n  readonly parent: SignalLike<TreeItemPattern<V> | TreePattern<V>>;\n\n  /** The children items. */\n  readonly children: SignalLike<TreeItemPattern<V>[]>;\n\n  /** The position of this item among its siblings. */\n  readonly index = computed(() => this.tree().visibleItems().indexOf(this));\n\n  /** The unique identifier used by the expansion behavior. */\n  readonly expansionId: SignalLike<string>;\n\n  /** Controls expansion for child items. */\n  readonly expansionManager: ListExpansion;\n\n  /** Controls expansion for this item. */\n  readonly expansion: ExpansionControl;\n\n  /** Whether the item is expandable. It's expandable if children item exist. */\n  readonly expandable: SignalLike<boolean>;\n\n  /** Whether the item is selectable. */\n  readonly selectable: SignalLike<boolean>;\n\n  /** The level of the current item in a tree. */\n  readonly level: SignalLike<number> = computed(() => this.parent().level() + 1);\n\n  /** Whether this item is currently expanded. */\n  readonly expanded = computed(() => this.expansion.isExpanded());\n\n  /** Whether this item is visible. */\n  readonly visible: SignalLike<boolean> = computed(\n    () => this.parent().expanded() && this.parent().visible(),\n  );\n\n  /** The number of items under the same parent at the same level. */\n  readonly setsize = computed(() => this.parent().children().length);\n\n  /** The position of this item among its siblings (1-based). */\n  readonly posinset = computed(() => this.parent().children().indexOf(this) + 1);\n\n  /** Whether the item is active. */\n  readonly active = computed(() => this.tree().activeItem() === this);\n\n  /** The tab index of the item. */\n  readonly tabIndex = computed(() => this.tree().listBehavior.getItemTabindex(this));\n\n  /** Whether the item is selected. */\n  readonly selected: SignalLike<boolean | undefined> = computed(() => {\n    if (this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().value().includes(this.value());\n  });\n\n  /** The current type of this item. */\n  readonly current: SignalLike<string | undefined> = computed(() => {\n    if (!this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().value().includes(this.value()) ? this.tree().currentType() : undefined;\n  });\n\n  constructor(readonly inputs: TreeItemInputs<V>) {\n    this.id = inputs.id;\n    this.value = inputs.value;\n    this.element = inputs.element;\n    this.disabled = inputs.disabled;\n    this.searchTerm = inputs.searchTerm;\n    this.expansionId = inputs.id;\n    this.tree = inputs.tree;\n    this.parent = inputs.parent;\n    this.children = inputs.children;\n    this.expandable = inputs.hasChildren;\n    this.selectable = inputs.selectable;\n    this.expansion = new ExpansionControl({\n      ...inputs,\n      expandable: this.expandable,\n      expansionId: this.expansionId,\n      expansionManager: this.parent().expansionManager,\n    });\n    this.expansionManager = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => true,\n      // TODO(ok7sai): allow pre-expanded tree items.\n      expandedIds: signal([]),\n      items: this.children,\n      disabled: computed(() => this.tree()?.disabled() ?? false),\n    });\n  }\n}\n\n/** The selection operations that the tree can perform. */\ninterface SelectOptions {\n  toggle?: boolean;\n  selectOne?: boolean;\n  selectRange?: boolean;\n  anchor?: boolean;\n}\n\n/** Represents the required inputs for a tree. */\nexport interface TreeInputs<V> extends Omit<ListInputs<TreeItemPattern<V>, V>, 'items'> {\n  /** A unique identifier for the tree. */\n  id: SignalLike<string>;\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  allItems: SignalLike<TreeItemPattern<V>[]>;\n\n  /** Whether the tree is in navigation mode. */\n  nav: SignalLike<boolean>;\n\n  /** The aria-current type. */\n  currentType: SignalLike<'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'>;\n}\n\nexport interface TreePattern<V> extends TreeInputs<V> {}\n/** Controls the state and interactions of a tree view. */\nexport class TreePattern<V> {\n  /** The list behavior for the tree. */\n  readonly listBehavior: List<TreeItemPattern<V>, V>;\n\n  /** Controls expansion for direct children of the tree root (top-level items). */\n  readonly expansionManager: ListExpansion;\n\n  /** The root level is 0. */\n  readonly level = () => 0;\n\n  /** The root is always expanded. */\n  readonly expanded = () => true;\n\n  /** The roow is always visible. */\n  readonly visible = () => true;\n\n  /** The tab index of the tree. */\n  readonly tabIndex: SignalLike<-1 | 0> = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active item. */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** The direct children of the root (top-level tree items). */\n  readonly children = computed(() =>\n    this.inputs.allItems().filter(item => item.level() === this.level() + 1),\n  );\n\n  /** All currently visible tree items. An item is visible if their parent is expanded. */\n  readonly visibleItems = computed(() => this.inputs.allItems().filter(item => item.visible()));\n\n  /** Whether the tree selection follows focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** The key for navigating to the previous item. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for navigating to the next item. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key for collapsing an item or moving to its parent. */\n  readonly collapseKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for expanding an item or moving to its first child. */\n  readonly expandKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  readonly dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** Regular expression to match characters for typeahead. */\n  readonly typeaheadRegexp = /^.$/;\n\n  /** The keydown event manager for the tree. */\n  readonly keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n    const list = this.listBehavior;\n\n    manager\n      .on(this.prevKey, () => list.prev({selectOne: this.followFocus()}))\n      .on(this.nextKey, () => list.next({selectOne: this.followFocus()}))\n      .on('Home', () => list.first({selectOne: this.followFocus()}))\n      .on('End', () => list.last({selectOne: this.followFocus()}))\n      .on(this.typeaheadRegexp, e => list.search(e.key, {selectOne: this.followFocus()}))\n      .on(this.expandKey, () => this.expand({selectOne: this.followFocus()}))\n      .on(this.collapseKey, () => this.collapse({selectOne: this.followFocus()}))\n      .on(Modifier.Shift, '*', () => this.expandSiblings());\n\n    if (this.inputs.multi()) {\n      manager\n        // TODO: Tracking the anchor by index can break if the\n        // tree is expanded or collapsed causing the index to change.\n        .on(Modifier.Any, 'Shift', () => list.anchor(this.listBehavior.activeIndex()))\n        .on(Modifier.Shift, this.prevKey, () => list.prev({selectRange: true}))\n        .on(Modifier.Shift, this.nextKey, () => list.next({selectRange: true}))\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'Home', () =>\n          list.first({selectRange: true, anchor: false}),\n        )\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'End', () =>\n          list.last({selectRange: true, anchor: false}),\n        )\n        .on(Modifier.Shift, 'Enter', () => list.updateSelection({selectRange: true, anchor: false}))\n        .on(Modifier.Shift, this.dynamicSpaceKey, () =>\n          list.updateSelection({selectRange: true, anchor: false}),\n        );\n    }\n\n    if (!this.followFocus() && this.inputs.multi()) {\n      manager\n        .on(this.dynamicSpaceKey, () => list.toggle())\n        .on('Enter', () => list.toggle(), {preventDefault: !this.nav()})\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => list.toggleAll());\n    }\n\n    if (!this.followFocus() && !this.inputs.multi()) {\n      manager.on(this.dynamicSpaceKey, () => list.selectOne());\n      manager.on('Enter', () => list.selectOne(), {preventDefault: !this.nav()});\n    }\n\n    if (this.inputs.multi() && this.followFocus()) {\n      manager\n        .on([Modifier.Ctrl, Modifier.Meta], this.prevKey, () => list.prev())\n        .on([Modifier.Ctrl, Modifier.Meta], this.nextKey, () => list.next())\n        .on([Modifier.Ctrl, Modifier.Meta], this.expandKey, () => this.expand())\n        .on([Modifier.Ctrl, Modifier.Meta], this.collapseKey, () => this.collapse())\n        .on([Modifier.Ctrl, Modifier.Meta], ' ', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Enter', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Home', () => list.first())\n        .on([Modifier.Ctrl, Modifier.Meta], 'End', () => list.last())\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => {\n          list.toggleAll();\n          list.select(); // Ensure the currect item remains selected.\n        });\n    }\n\n    return manager;\n  });\n\n  /** The pointerdown event manager for the tree. */\n  pointerdown = computed(() => {\n    const manager = new PointerEventManager();\n\n    if (this.multi()) {\n      manager.on(Modifier.Shift, e => this.goto(e, {selectRange: true}));\n    }\n\n    if (!this.multi()) {\n      return manager.on(e => this.goto(e, {selectOne: true}));\n    }\n\n    if (this.multi() && this.followFocus()) {\n      return manager\n        .on(e => this.goto(e, {selectOne: true}))\n        .on(Modifier.Ctrl, e => this.goto(e, {toggle: true}));\n    }\n\n    if (this.multi() && !this.followFocus()) {\n      return manager.on(e => this.goto(e, {toggle: true}));\n    }\n\n    return manager;\n  });\n\n  /** A unique identifier for the tree. */\n  id: SignalLike<string>;\n\n  /** Whether the tree is in navigation mode. */\n  nav: SignalLike<boolean>;\n\n  /** The aria-current type. */\n  currentType: SignalLike<'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'>;\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  allItems: SignalLike<TreeItemPattern<V>[]>;\n\n  /** Whether the tree is disabled. */\n  disabled: SignalLike<boolean>;\n\n  /** The currently active item in the tree. */\n  activeItem: WritableSignalLike<TreeItemPattern<V> | undefined> = signal(undefined);\n\n  /** Whether disabled items should be focusable. */\n  softDisabled: SignalLike<boolean>;\n\n  /** Whether the focus should wrap when navigating past the first or last item. */\n  wrap: SignalLike<boolean>;\n\n  /** The orientation of the tree. */\n  orientation: SignalLike<'vertical' | 'horizontal'>;\n\n  /** The text direction of the tree. */\n  textDirection: SignalLike<'ltr' | 'rtl'>;\n\n  /** Whether multiple items can be selected at the same time. */\n  multi: SignalLike<boolean>;\n\n  /** The selection mode of the tree. */\n  selectionMode: SignalLike<'follow' | 'explicit'>;\n\n  /** The delay in milliseconds to wait before clearing the typeahead buffer. */\n  typeaheadDelay: SignalLike<number>;\n\n  /** The current value of the tree (the selected items). */\n  value: WritableSignalLike<V[]>;\n\n  constructor(readonly inputs: TreeInputs<V>) {\n    this.id = inputs.id;\n    this.nav = inputs.nav;\n    this.currentType = inputs.currentType;\n    this.allItems = inputs.allItems;\n    this.focusMode = inputs.focusMode;\n    this.disabled = inputs.disabled;\n    this.activeItem = inputs.activeItem;\n    this.softDisabled = inputs.softDisabled;\n    this.wrap = inputs.wrap;\n    this.orientation = inputs.orientation;\n    this.textDirection = inputs.textDirection;\n    this.multi = computed(() => (this.nav() ? false : this.inputs.multi()));\n    this.selectionMode = inputs.selectionMode;\n    this.typeaheadDelay = inputs.typeaheadDelay;\n    this.value = inputs.value;\n\n    this.listBehavior = new List({\n      ...inputs,\n      items: this.visibleItems,\n      multi: this.multi,\n    });\n\n    this.expansionManager = new ListExpansion({\n      multiExpandable: () => true,\n      // TODO(ok7sai): allow pre-expanded tree items.\n      expandedIds: signal([]),\n      items: this.children,\n      disabled: this.disabled,\n    });\n  }\n\n  /**\n   * Sets the tree to it's default initial state.\n   *\n   * Sets the active index of the tree to the first focusable selected tree item if one exists.\n   * Otherwise, sets focus to the first focusable tree item.\n   */\n  setDefaultState() {\n    let firstItem: TreeItemPattern<V> | undefined;\n\n    for (const item of this.allItems()) {\n      if (!item.visible()) continue;\n      if (!this.listBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.activeItem.set(item);\n        return;\n      }\n    }\n\n    if (firstItem !== undefined) {\n      this.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events on the tree. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** Handles pointerdown events on the tree. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Navigates to the given tree item in the tree. */\n  goto(e: PointerEvent, opts?: SelectOptions) {\n    const item = this._getItem(e);\n    if (!item) return;\n\n    this.listBehavior.goto(item, opts);\n    this.toggleExpansion(item);\n  }\n\n  /** Toggles to expand or collapse a tree item. */\n  toggleExpansion(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (!item.expandable()) return;\n    if (item.expanded()) {\n      this.collapse();\n    } else {\n      item.expansion.open();\n    }\n  }\n\n  /** Expands a tree item. */\n  expand(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && !item.expanded()) {\n      item.expansion.open();\n    } else if (\n      item.expanded() &&\n      item.children().some(item => this.listBehavior.isFocusable(item))\n    ) {\n      this.listBehavior.next(opts);\n    }\n  }\n\n  /** Expands all sibling tree items including itself. */\n  expandSiblings(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    const siblings = item?.parent()?.children();\n    siblings?.forEach(item => item.expansion.open());\n  }\n\n  /** Collapses a tree item. */\n  collapse(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && item.expanded()) {\n      item.expansion.close();\n    } else if (item.parent() && item.parent() !== this) {\n      const parentItem = item.parent();\n      if (parentItem instanceof TreeItemPattern && this.listBehavior.isFocusable(parentItem)) {\n        this.listBehavior.goto(parentItem, opts);\n      }\n    }\n  }\n\n  /** Retrieves the TreeItemPattern associated with a DOM event, if any. */\n  protected _getItem(event: Event): TreeItemPattern<V> | undefined {\n    if (!(event.target instanceof HTMLElement)) {\n      return;\n    }\n    const element = event.target.closest('[role=\"treeitem\"]');\n    return this.inputs.allItems().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {TreeInputs, TreePattern, TreeItemPattern} from './tree';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {ComboboxPattern, ComboboxTreeControls} from '../combobox/combobox';\n\nexport type ComboboxTreeInputs<V> = TreeInputs<V> & {\n  /** The combobox controlling the tree. */\n  combobox: SignalLike<ComboboxPattern<TreeItemPattern<V>, V> | undefined>;\n};\n\nexport class ComboboxTreePattern<V>\n  extends TreePattern<V>\n  implements ComboboxTreeControls<TreeItemPattern<V>, V>\n{\n  /** Whether the currently focused item is collapsible. */\n  isItemCollapsible = () => this.inputs.activeItem()?.parent() instanceof TreeItemPattern;\n\n  /** The ARIA role for the tree. */\n  role = () => 'tree' as const;\n\n  /* The id of the active (focused) item in the tree. */\n  activeId = computed(() => this.listBehavior.activeDescendant());\n\n  /** The list of items in the tree. */\n  items = computed(() => this.inputs.allItems());\n\n  /** The tab index for the tree. Always -1 because the combobox handles focus. */\n  override tabIndex: SignalLike<-1 | 0> = () => -1;\n\n  constructor(override readonly inputs: ComboboxTreeInputs<V>) {\n    if (inputs.combobox()) {\n      inputs.multi = () => false;\n      inputs.focusMode = () => 'activedescendant';\n      inputs.element = inputs.combobox()!.inputs.inputEl;\n    }\n\n    super(inputs);\n  }\n\n  /** Noop. The combobox handles keydown events. */\n  override onKeydown(_: KeyboardEvent): void {}\n\n  /** Noop. The combobox handles pointerdown events. */\n  override onPointerdown(_: PointerEvent): void {}\n\n  /** Noop. The combobox controls the open state. */\n  override setDefaultState(): void {}\n\n  /** Navigates to the specified item in the tree. */\n  focus = (item: TreeItemPattern<V>) => this.listBehavior.goto(item);\n\n  /** Navigates to the next focusable item in the tree. */\n  next = () => this.listBehavior.next();\n\n  /** Navigates to the previous focusable item in the tree. */\n  prev = () => this.listBehavior.prev();\n\n  /** Navigates to the last focusable item in the tree. */\n  last = () => this.listBehavior.last();\n\n  /** Navigates to the first focusable item in the tree. */\n  first = () => this.listBehavior.first();\n\n  /** Unfocuses the currently focused item in the tree. */\n  unfocus = () => this.listBehavior.unfocus();\n\n  // TODO: handle non-selectable parent nodes.\n  /** Selects the specified item in the tree or the current active item if not provided. */\n  select = (item?: TreeItemPattern<V>) => this.listBehavior.select(item);\n\n  /** Toggles the selection state of the given item in the tree or the current active item if not provided. */\n  toggle = (item?: TreeItemPattern<V>) => this.listBehavior.toggle(item);\n\n  /** Clears the selection in the tree. */\n  clearSelection = () => this.listBehavior.deselectAll();\n\n  /** Retrieves the TreeItemPattern associated with a pointer event. */\n  getItem = (e: PointerEvent) => this._getItem(e);\n\n  /** Retrieves the currently selected items in the tree */\n  getSelectedItems = () => this.inputs.allItems().filter(item => item.selected());\n\n  /** Sets the value of the combobox tree. */\n  setValue = (value: V | undefined) => this.inputs.value.set(value ? [value] : []);\n\n  /** Expands the currently focused item if it is expandable. */\n  expandItem = () => this.expand();\n\n  /** Collapses the currently focused item if it is expandable. */\n  collapseItem = () => this.collapse();\n\n  /** Whether the specified item or the currently active item is expandable. */\n  isItemExpandable(item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) {\n    return item ? item.expandable() : false;\n  }\n\n  /** Expands all of the tree items. */\n  expandAll = () => this.items().forEach(item => item.expansion.open());\n\n  /** Collapses all of the tree items. */\n  collapseAll = () => this.items().forEach(item => item.expansion.close());\n\n  /** Whether the currently active item is selectable. */\n  isItemSelectable = (item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) => {\n    return item ? item.selectable() : false;\n  };\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  afterRenderEffect,\n  Directive,\n  inject,\n  TemplateRef,\n  signal,\n  ViewContainerRef,\n  model,\n  EmbeddedViewRef,\n  OnDestroy,\n} from '@angular/core';\n\n/**\n * A container directive controls the visibility of its content.\n */\n@Directive()\nexport class DeferredContentAware {\n  readonly contentVisible = signal(false);\n  readonly preserveContent = model(false);\n}\n\n/**\n * DeferredContent loads/unloads the content based on the visibility.\n * The visibilty signal is sent from a parent directive implements\n * DeferredContentAware.\n *\n * Use this directive as a host directive. For example:\n *\n * ```ts\n *   @Directive({\n *     selector: 'ng-template[AccordionContent]',\n *     hostDirectives: [DeferredContent],\n *   })\n *   class AccordionContent {}\n * ```\n */\n@Directive()\nexport class DeferredContent implements OnDestroy {\n  private readonly _deferredContentAware = inject(DeferredContentAware, {optional: true});\n  private readonly _templateRef = inject(TemplateRef);\n  private readonly _viewContainerRef = inject(ViewContainerRef);\n  private _currentViewRef: EmbeddedViewRef<unknown> | null = null;\n  private _isRendered = false;\n\n  readonly deferredContentAware = signal(this._deferredContentAware);\n\n  constructor() {\n    afterRenderEffect(() => {\n      if (this.deferredContentAware()?.contentVisible()) {\n        if (!this._isRendered) {\n          this._destroyContent();\n          this._currentViewRef = this._viewContainerRef.createEmbeddedView(this._templateRef);\n          this._isRendered = true;\n        }\n      } else if (!this.deferredContentAware()?.preserveContent()) {\n        this._destroyContent();\n        this._isRendered = false;\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this._destroyContent();\n  }\n\n  private _destroyContent() {\n    const ref = this._currentViewRef;\n\n    if (ref && !ref.destroyed) {\n      ref.destroy();\n      this._currentViewRef = null;\n    }\n  }\n}\n"],"names":["ComboboxPattern","inputs","expanded","signal","activeDescendant","computed","popupControls","activeId","highlightedItem","undefined","isDeleting","isFocused","expandKey","textDirection","collapseKey","popupId","id","autocomplete","filterMode","hasPopup","role","readonly","keydown","manager","KeyboardEventManager","on","open","first","last","close","reset","selected","next","prev","select","commit","multi","treeControls","isItemSelectable","isItemExpandable","expandItem","isItemCollapsible","collapseItem","pointerup","PointerEventManager","e","item","getItem","toggleExpansion","inputEl","focus","target","constructor","onKeydown","event","disabled","handle","onPointerup","onInput","inputValue","set","value","InputEvent","inputType","match","selectedItems","getSelectedItems","searchTerm","clearSelection","highlight","onFocusIn","onFocusOut","relatedTarget","HTMLElement","containerEl","contains","items","find","i","firstMatch","onFilter","isInitialRender","length","expandAll","collapseAll","unfocus","isHighlightable","toLowerCase","startsWith","slice","setSelectionRange","opts","selectedItem","nav","isHighlighting","selectionStart","includes","_navigate","controls","focusElement","toggle","map","join","operation","ListFocus","prevActiveItem","prevActiveIndex","indexOf","activeIndex","activeItem","isListDisabled","every","getActiveDescendant","focusMode","getListTabIndex","getItemTabIndex","isFocusable","element","softDisabled","ListNavigation","goto","focusManager","_advance","peekNext","_peek","peekPrev","peekFirst","peekLast","delta","itemCount","startIndex","step","wrap","ListSelection","rangeStartIndex","rangeEndIndex","filter","anchor","selectable","deselectAll","index","findIndex","beginRangeSelection","update","values","concat","deselect","toggleOne","selectOne","selectAll","v","toggleAll","selectableValues","selectRange","isStartOfRange","itemsInRange","_getItemsFromIndex","itemsOutOfRange","pop","upper","Math","max","lower","min","push","reverse","ListTypeahead","timeout","isTyping","_query","_startIndex","search","char","clearTimeout","q","_getItem","setTimeout","typeaheadDelay","after","before","focusableItems","List","navigationBehavior","selectionBehavior","typeaheadBehavior","focusBehavior","tabIndex","_anchorIndex","_wrap","getItemTabindex","updateSelection","moved","ListboxPattern","listBehavior","orientation","setsize","followFocus","selectionMode","prevKey","nextKey","dynamicSpaceKey","typeaheadRegexp","key","Modifier","Any","Shift","Ctrl","Meta","pointerdown","validate","violations","onPointerdown","setDefaultState","firstItem","closest","OptionPattern","listbox","active","args","ComboboxListboxPattern","combobox","_","setValue","MenuPattern","isVisible","parent","hasBeenFocused","shouldFocus","root","MenuTriggerPattern","MenuBarPattern","_expandKey","_collapseKey","grandparent","keydownManager","trigger","closeAll","expand","collapse","onMouseOver","submenu","onMouseOut","onClick","submit","parentEl","refocus","MenuItemPattern","siblings","isMenu","isMenuBar","isMenuTrigger","onSelect","_nextKey","_previousKey","prevItem","menu","menuitems","menuitem","_expanded","isActive","convertGetterSetterToWritableSignalLike","getter","setter","Object","assign","updateCallback","ExpansionControl","isExpanded","expansionManager","isExpandable","expansionId","expandable","ListExpansion","expandedIds","multiExpandable","ids","openAll","LabelControl","label","labelledBy","defaultLabelledBy","TabPattern","expansion","tablist","tabpanel","TabPanelPattern","labelManager","hidden","tab","TabListPattern","ToolbarPattern","_prevKey","_altPrevKey","_altNextKey","_keydown","_groupNext","_groupPrev","currGroup","group","nextGroup","_goto","forEach","preventDefault","ToolbarWidgetPattern","toolbar","ToolbarWidgetGroupPattern","AccordionGroupPattern","navigation","AccordionTriggerPattern","expansionControl","accordionGroup","accordionPanel","onFocus","AccordionPanelPattern","accordionTrigger","TreeItemPattern","tree","children","visibleItems","level","visible","posinset","current","currentType","hasChildren","TreePattern","allItems","list","expandSiblings","some","parentItem","ComboboxTreePattern","DeferredContentAware","contentVisible","preserveContent","model","deps","i0","FactoryTarget","Directive","isStandalone","classPropertyName","publicName","isSignal","isRequired","transformFunction","outputs","ngImport","decorators","DeferredContent","_deferredContentAware","inject","optional","_templateRef","TemplateRef","_viewContainerRef","ViewContainerRef","_currentViewRef","_isRendered","deferredContentAware","afterRenderEffect","_destroyContent","createEmbeddedView","ngOnDestroy","ref","destroyed","destroy"],"mappings":"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"}