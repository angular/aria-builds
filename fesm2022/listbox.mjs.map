{"version":3,"file":"listbox.mjs","sources":["../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/listbox/tokens.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/listbox/option.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/listbox/listbox.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {InjectionToken} from '@angular/core';\nimport type {Listbox} from './listbox';\n\nexport const LISTBOX = new InjectionToken<Listbox<any>>('LISTBOX');\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {booleanAttribute, computed, Directive, ElementRef, inject, input} from '@angular/core';\nimport {_IdGenerator} from '@angular/cdk/a11y';\nimport {OptionPattern} from '../private';\nimport {LISTBOX} from './tokens';\n\n/**\n * A selectable option in an `ngListbox`.\n *\n * This directive should be applied to an element (e.g., `<li>`, `<div>`) within an\n * `ngListbox`. The `value` input is used to identify the option, and the `label` input provides\n * the accessible name for the option.\n *\n * ```html\n * <li ngOption value=\"item-id\" label=\"Item Name\">\n *   Item Name\n * </li>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngOption]',\n  exportAs: 'ngOption',\n  host: {\n    'role': 'option',\n    '[attr.data-active]': 'active()',\n    '[attr.id]': '_pattern.id()',\n    '[attr.tabindex]': '_pattern.tabIndex()',\n    '[attr.aria-selected]': '_pattern.selected()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n  },\n})\nexport class Option<V> {\n  /** A reference to the host element. */\n  readonly element = inject(ElementRef).nativeElement as HTMLElement;\n\n  /** Whether the option is currently active (focused). */\n  active = computed(() => this._pattern.active());\n\n  /** The parent Listbox. */\n  private readonly _listbox = inject(LISTBOX);\n\n  /** A unique identifier for the option. */\n  readonly id = input(inject(_IdGenerator).getId('ng-option-', true));\n\n  // TODO(wagnermaciel): See if we want to change how we handle this since textContent is not\n  // reactive. See https://github.com/angular/components/pull/30495#discussion_r1961260216.\n  /** The text used by the typeahead search. */\n  protected searchTerm = computed(() => this.label() ?? this.element.textContent);\n\n  /** The parent Listbox UIPattern. */\n  private readonly _listboxPattern = computed(() => this._listbox._pattern);\n\n  /** The value of the option. */\n  value = input.required<V>();\n\n  /** Whether an item is disabled. */\n  disabled = input(false, {transform: booleanAttribute});\n\n  /** The text used by the typeahead search. */\n  label = input<string>();\n\n  /** Whether the option is selected. */\n  readonly selected = computed(() => this._pattern.selected());\n\n  /** The Option UIPattern. */\n  readonly _pattern = new OptionPattern<V>({\n    ...this,\n    id: this.id,\n    value: this.value,\n    listbox: this._listboxPattern,\n    element: () => this.element,\n    searchTerm: () => this.searchTerm() ?? '',\n  });\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  afterRenderEffect,\n  booleanAttribute,\n  computed,\n  contentChildren,\n  Directive,\n  ElementRef,\n  inject,\n  input,\n  model,\n  signal,\n  untracked,\n} from '@angular/core';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport {_IdGenerator} from '@angular/cdk/a11y';\nimport {ComboboxListboxPattern, ListboxPattern} from '../private';\nimport {ComboboxPopup} from '../combobox';\nimport {Option} from './option';\nimport {LISTBOX} from './tokens';\n\n/**\n * Represents a container used to display a list of items for a user to select from.\n *\n * The `ngListbox` is meant to be used in conjunction with `ngOption` directives to create a\n * selectable list. It supports single and multiple selection modes, as well as various focus and\n * orientation strategies.\n *\n * ```html\n * <ul ngListbox [(value)]=\"selectedItems\" [multi]=\"true\" orientation=\"vertical\">\n *   @for (item of items; track item.id) {\n *     <li ngOption [value]=\"item.id\" [label]=\"item.name\" [disabled]=\"item.disabled\">\n *       {{item.name}}\n *     </li>\n *   }\n * </ul>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngListbox]',\n  exportAs: 'ngListbox',\n  host: {\n    'role': 'listbox',\n    '[attr.id]': 'id()',\n    '[attr.tabindex]': '_pattern.tabIndex()',\n    '[attr.aria-readonly]': '_pattern.readonly()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n    '[attr.aria-orientation]': '_pattern.orientation()',\n    '[attr.aria-multiselectable]': '_pattern.multi()',\n    '[attr.aria-activedescendant]': '_pattern.activeDescendant()',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(pointerdown)': '_pattern.onPointerdown($event)',\n    '(focusin)': '_onFocus()',\n  },\n  hostDirectives: [ComboboxPopup],\n  providers: [{provide: LISTBOX, useExisting: Listbox}],\n})\nexport class Listbox<V> {\n  /** A unique identifier for the listbox. */\n  readonly id = input(inject(_IdGenerator).getId('ng-listbox-', true));\n\n  /** A reference to the parent combobox popup, if one exists. */\n  private readonly _popup = inject<ComboboxPopup<V>>(ComboboxPopup, {\n    optional: true,\n  });\n\n  /** A reference to the host element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the host element. */\n  readonly element = this._elementRef.nativeElement as HTMLElement;\n\n  /** The directionality (LTR / RTL) context for the application (or a subtree of it). */\n  private readonly _directionality = inject(Directionality);\n\n  /** The Options nested inside of the Listbox. */\n  private readonly _options = contentChildren(Option, {descendants: true});\n\n  /** A signal wrapper for directionality. */\n  protected textDirection = toSignal(this._directionality.change, {\n    initialValue: this._directionality.value,\n  });\n\n  /** The Option UIPatterns of the child Options. */\n  protected items = computed(() => this._options().map(option => option._pattern));\n\n  /** Whether the list is vertically or horizontally oriented. */\n  orientation = input<'vertical' | 'horizontal'>('vertical');\n\n  /** Whether multiple items in the list can be selected at once. */\n  multi = input(false, {transform: booleanAttribute});\n\n  /** Whether focus should wrap when navigating. */\n  wrap = input(true, {transform: booleanAttribute});\n\n  /**\n   * Whether to allow disabled items to receive focus. When `true`, disabled items are\n   * focusable but not interactive. When `false`, disabled items are skipped during navigation.\n   */\n  softDisabled = input(true, {transform: booleanAttribute});\n\n  /**\n   * The focus strategy used by the list.\n   * - `roving`: Focus is moved to the active item using `tabindex`.\n   * - `activedescendant`: Focus remains on the listbox container, and `aria-activedescendant` is used to indicate the active item.\n   */\n  focusMode = input<'roving' | 'activedescendant'>('roving');\n\n  /**\n   * The selection strategy used by the list.\n   * - `follow`: The focused item is automatically selected.\n   * - `explicit`: Items are selected explicitly by the user (e.g., via click or spacebar).\n   */\n  selectionMode = input<'follow' | 'explicit'>('follow');\n\n  /** The amount of time before the typeahead search is reset. */\n  typeaheadDelay = input<number>(500); // Picked arbitrarily.\n\n  /** Whether the listbox is disabled. */\n  disabled = input(false, {transform: booleanAttribute});\n\n  /** Whether the listbox is readonly. */\n  readonly = input(false, {transform: booleanAttribute});\n\n  /** The values of the currently selected items. */\n  values = model<V[]>([]);\n\n  /** The Listbox UIPattern. */\n  readonly _pattern: ListboxPattern<V>;\n\n  /** Whether the listbox has received focus yet. */\n  private _hasFocused = signal(false);\n\n  constructor() {\n    const inputs = {\n      ...this,\n      id: this.id,\n      items: this.items,\n      activeItem: signal(undefined),\n      textDirection: this.textDirection,\n      element: () => this._elementRef.nativeElement,\n      combobox: () => this._popup?.combobox?._pattern,\n    };\n\n    this._pattern = this._popup?.combobox\n      ? new ComboboxListboxPattern<V>(inputs)\n      : new ListboxPattern<V>(inputs);\n\n    if (this._popup) {\n      this._popup._controls.set(this._pattern as ComboboxListboxPattern<V>);\n    }\n\n    afterRenderEffect(() => {\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        const violations = this._pattern.validate();\n        for (const violation of violations) {\n          console.error(violation);\n        }\n      }\n    });\n\n    afterRenderEffect(() => {\n      if (!this._hasFocused()) {\n        this._pattern.setDefaultState();\n      }\n    });\n\n    // Ensure that if the active item is removed from\n    // the list, the listbox updates it's focus state.\n    afterRenderEffect(() => {\n      const items = inputs.items();\n      const activeItem = untracked(() => inputs.activeItem());\n\n      if (!items.some(i => i === activeItem) && activeItem) {\n        this._pattern.listBehavior.unfocus();\n      }\n    });\n\n    // Ensure that the values are always in sync with the available options.\n    afterRenderEffect(() => {\n      const items = inputs.items();\n      const values = untracked(() => this.values());\n\n      if (items && values.some(v => !items.some(i => i.value() === v))) {\n        this.values.set(values.filter(v => items.some(i => i.value() === v)));\n      }\n    });\n  }\n\n  _onFocus() {\n    this._hasFocused.set(true);\n  }\n\n  scrollActiveItemIntoView(options: ScrollIntoViewOptions = {block: 'nearest'}) {\n    this._pattern.inputs.activeItem()?.element()?.scrollIntoView(options);\n  }\n\n  /** Navigates to the first item in the listbox. */\n  gotoFirst() {\n    this._pattern.listBehavior.first();\n  }\n}\n"],"names":["LISTBOX","InjectionToken","Option","element","inject","ElementRef","nativeElement","active","computed","_pattern","_listbox","id","input","_IdGenerator","getId","searchTerm","label","textContent","_listboxPattern","ngDevMode","debugName","value","required","disabled","transform","booleanAttribute","undefined","selected","OptionPattern","listbox","deps","target","i0","ɵɵFactoryTarget","Directive","isStandalone","selector","inputs","classPropertyName","publicName","isSignal","isRequired","transformFunction","host","attributes","properties","exportAs","ngImport","decorators","args","Listbox","_popup","ComboboxPopup","optional","_elementRef","_directionality","Directionality","_options","contentChildren","descendants","textDirection","toSignal","change","initialValue","items","map","option","orientation","multi","wrap","softDisabled","focusMode","selectionMode","typeaheadDelay","readonly","values","model","_hasFocused","signal","constructor","activeItem","combobox","ComboboxListboxPattern","ListboxPattern","_controls","set","afterRenderEffect","violations","validate","violation","console","error","setDefaultState","untracked","some","i","listBehavior","unfocus","v","filter","_onFocus","scrollActiveItemIntoView","options","block","scrollIntoView","gotoFirst","first","ɵdir","ɵɵngDeclareDirective","minVersion","version","type","outputs","listeners","providers","provide","useExisting","hostDirectives","directive","i1","ctorParameters","propDecorators","Input","alias","ContentChildren","forwardRef","Output"],"mappings":"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"}