{"version":3,"file":"grid.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/grid/grid.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {_IdGenerator} from '@angular/cdk/a11y';\nimport {\n  afterRenderEffect,\n  booleanAttribute,\n  computed,\n  contentChildren,\n  Directive,\n  ElementRef,\n  inject,\n  input,\n  output,\n  model,\n  Signal,\n} from '@angular/core';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {GridPattern, GridRowPattern, GridCellPattern, GridCellWidgetPattern} from '../private';\n\n/**\n * The container for a grid. It provides keyboard navigation and focus management for the grid's\n * rows and cells. It manages the overall behavior of the grid, including focus\n * wrapping, selection, and disabled states.\n *\n * ```html\n * <table ngGrid [multi]=\"true\" [enableSelection]=\"true\">\n *   @for (row of gridData; track row) {\n *     <tr ngGridRow>\n *       @for (cell of row; track cell) {\n *         <td ngGridCell [disabled]=\"cell.disabled\">\n *           {{cell.value}}\n *         </td>\n *       }\n *     </tr>\n *   }\n * </table>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngGrid]',\n  exportAs: 'ngGrid',\n  host: {\n    'class': 'grid',\n    'role': 'grid',\n    '[tabindex]': '_pattern.tabIndex()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n    '[attr.aria-activedescendant]': '_pattern.activeDescendant()',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(pointerdown)': '_pattern.onPointerdown($event)',\n    '(pointermove)': '_pattern.onPointermove($event)',\n    '(pointerup)': '_pattern.onPointerup($event)',\n    '(focusin)': '_pattern.onFocusIn($event)',\n    '(focusout)': '_pattern.onFocusOut($event)',\n  },\n})\nexport class Grid {\n  /** A reference to the host element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the host element. */\n  readonly element = this._elementRef.nativeElement as HTMLElement;\n\n  /** The rows that make up the grid. */\n  private readonly _rows = contentChildren(GridRow, {descendants: true});\n\n  /** The UI patterns for the rows in the grid. */\n  private readonly _rowPatterns: Signal<GridRowPattern[]> = computed(() =>\n    this._rows().map(r => r._pattern),\n  );\n\n  /** Text direction. */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** Whether selection is enabled for the grid. */\n  readonly enableSelection = input(false, {transform: booleanAttribute});\n\n  /** Whether the grid is disabled. */\n  readonly disabled = input(false, {transform: booleanAttribute});\n\n  /**\n   * Whether to allow disabled items to receive focus. When `true`, disabled items are\n   * focusable but not interactive. When `false`, disabled items are skipped during navigation.\n   */\n  readonly softDisabled = input(true, {transform: booleanAttribute});\n\n  /**\n   * The focus strategy used by the grid.\n   * - `roving`: Focus is moved to the active cell using `tabindex`.\n   * - `activedescendant`: Focus remains on the grid container, and `aria-activedescendant` is used to indicate the active cell.\n   */\n  readonly focusMode = input<'roving' | 'activedescendant'>('roving');\n\n  /**\n   * The wrapping behavior for keyboard navigation along the row axis.\n   * - `continuous`: Navigation wraps from the last row to the first, and vice-versa.\n   * - `loop`: Navigation wraps within the current row.\n   * - `nowrap`: Navigation stops at the first/last item in the row.\n   */\n  readonly rowWrap = input<'continuous' | 'loop' | 'nowrap'>('loop');\n\n  /**\n   * The wrapping behavior for keyboard navigation along the column axis.\n   * - `continuous`: Navigation wraps from the last column to the first, and vice-versa.\n   * - `loop`: Navigation wraps within the current column.\n   * - `nowrap`: Navigation stops at the first/last item in the column.\n   */\n  readonly colWrap = input<'continuous' | 'loop' | 'nowrap'>('loop');\n\n  /** Whether multiple cells in the grid can be selected. */\n  readonly multi = input(false, {transform: booleanAttribute});\n\n  /**\n   * The selection strategy used by the grid.\n   * - `follow`: The focused cell is automatically selected.\n   * - `explicit`: Cells are selected explicitly by the user (e.g., via click or spacebar).\n   */\n  readonly selectionMode = input<'follow' | 'explicit'>('follow');\n\n  /** Whether enable range selections (with modifier keys or dragging). */\n  readonly enableRangeSelection = input(false, {transform: booleanAttribute});\n\n  /** The UI pattern for the grid. */\n  readonly _pattern = new GridPattern({\n    ...this,\n    rows: this._rowPatterns,\n    getCell: e => this._getCell(e),\n    element: () => this.element,\n  });\n\n  constructor() {\n    afterRenderEffect(() => this._pattern.setDefaultStateEffect());\n    afterRenderEffect(() => this._pattern.resetStateEffect());\n    afterRenderEffect(() => this._pattern.resetFocusEffect());\n    afterRenderEffect(() => this._pattern.restoreFocusEffect());\n    afterRenderEffect(() => this._pattern.focusEffect());\n  }\n\n  /** Gets the cell pattern for a given element. */\n  private _getCell(element: Element | null | undefined): GridCellPattern | undefined {\n    let target = element;\n\n    while (target) {\n      for (const row of this._rowPatterns()) {\n        for (const cell of row.inputs.cells()) {\n          if (cell.element() === target) {\n            return cell;\n          }\n        }\n      }\n\n      target = target.parentElement?.closest('[ngGridCell]');\n    }\n\n    return undefined;\n  }\n}\n\n/**\n * Represents a row within a grid. It is a container for `ngGridCell` directives.\n *\n * ```html\n * <tr ngGridRow>\n *   <!-- ... cells ... -->\n * </tr>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngGridRow]',\n  exportAs: 'ngGridRow',\n  host: {\n    'class': 'grid-row',\n    'role': 'row',\n    '[attr.aria-rowindex]': '_pattern.rowIndex()',\n  },\n})\nexport class GridRow {\n  /** A reference to the host element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the host element. */\n  readonly element = this._elementRef.nativeElement as HTMLElement;\n\n  /** The cells that make up this row. */\n  private readonly _cells = contentChildren(GridCell, {descendants: true});\n\n  /** The UI patterns for the cells in this row. */\n  private readonly _cellPatterns: Signal<GridCellPattern[]> = computed(() =>\n    this._cells().map(c => c._pattern),\n  );\n\n  /** The parent grid. */\n  private readonly _grid = inject(Grid);\n\n  /** The parent grid UI pattern. */\n  readonly grid = computed(() => this._grid._pattern);\n\n  /** The index of this row within the grid. */\n  readonly rowIndex = input<number>();\n\n  /** The UI pattern for the grid row. */\n  readonly _pattern = new GridRowPattern({\n    ...this,\n    cells: this._cellPatterns,\n  });\n}\n\n/**\n * Represents a cell within a grid row. It is the primary focusable element\n * within the grid. It can be disabled and can have its selection state managed\n * through the `selected` input.\n *\n * ```html\n * <td ngGridCell [disabled]=\"isDisabled\" [(selected)]=\"isSelected\">\n *   Cell Content\n * </td>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngGridCell]',\n  exportAs: 'ngGridCell',\n  host: {\n    'class': 'grid-cell',\n    '[attr.role]': 'role()',\n    '[attr.id]': '_pattern.id()',\n    '[attr.rowspan]': '_pattern.rowSpan()',\n    '[attr.colspan]': '_pattern.colSpan()',\n    '[attr.data-active]': 'active()',\n    '[attr.data-anchor]': '_pattern.anchor()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n    '[attr.aria-rowspan]': '_pattern.rowSpan()',\n    '[attr.aria-colspan]': '_pattern.colSpan()',\n    '[attr.aria-rowindex]': '_pattern.ariaRowIndex()',\n    '[attr.aria-colindex]': '_pattern.ariaColIndex()',\n    '[attr.aria-selected]': '_pattern.ariaSelected()',\n    '[tabindex]': '_tabIndex()',\n  },\n})\nexport class GridCell {\n  /** A reference to the host element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the host element. */\n  readonly element = this._elementRef.nativeElement as HTMLElement;\n\n  /** Whether the cell is currently active (focused). */\n  readonly active = computed(() => this._pattern.active());\n\n  /** The widgets contained within this cell, if any. */\n  private readonly _widgets = contentChildren(GridCellWidget, {descendants: true});\n\n  /** The UI pattern for the widget in this cell. */\n  private readonly _widgetPatterns: Signal<GridCellWidgetPattern[]> = computed(() =>\n    this._widgets().map(w => w._pattern),\n  );\n\n  /** The parent row. */\n  private readonly _row = inject(GridRow);\n\n  /** Text direction. */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** A unique identifier for the cell. */\n  readonly id = input(inject(_IdGenerator).getId('ng-grid-cell-', true));\n\n  /** The ARIA role for the cell. */\n  readonly role = input<'gridcell' | 'columnheader' | 'rowheader'>('gridcell');\n\n  /** The number of rows the cell should span. */\n  readonly rowSpan = input<number>(1);\n\n  /** The number of columns the cell should span. */\n  readonly colSpan = input<number>(1);\n\n  /** The index of this cell's row within the grid. */\n  readonly rowIndex = input<number>();\n\n  /** The index of this cell's column within the grid. */\n  readonly colIndex = input<number>();\n\n  /** Whether the cell is disabled. */\n  readonly disabled = input(false, {transform: booleanAttribute});\n\n  /** Whether the cell is selected. */\n  readonly selected = model<boolean>(false);\n\n  /** Whether the cell is selectable. */\n  readonly selectable = input<boolean>(true);\n\n  /** Orientation of the widgets in the cell. */\n  readonly orientation = input<'vertical' | 'horizontal'>('horizontal');\n\n  /** Whether widgets navigation wraps. */\n  readonly wrap = input(true, {transform: booleanAttribute});\n\n  /** The tabindex override. */\n  readonly tabindex = input<number | undefined>();\n\n  /**\n   * The tabindex value set to the element.\n   * If a focus target exists then return -1. Unless an override.\n   */\n  protected readonly _tabIndex: Signal<number> = computed(\n    () => this.tabindex() ?? this._pattern.tabIndex(),\n  );\n\n  /** The UI pattern for the grid cell. */\n  readonly _pattern = new GridCellPattern({\n    ...this,\n    grid: this._row.grid,\n    row: () => this._row._pattern,\n    widgets: this._widgetPatterns,\n    getWidget: e => this._getWidget(e),\n    element: () => this.element,\n  });\n\n  constructor() {}\n\n  /** Gets the cell widget pattern for a given element. */\n  private _getWidget(element: Element | null | undefined): GridCellWidgetPattern | undefined {\n    let target = element;\n\n    while (target) {\n      const pattern = this._widgetPatterns().find(w => w.element() === target);\n      if (pattern) {\n        return pattern;\n      }\n\n      target = target.parentElement?.closest('[ngGridCellWidget]');\n    }\n\n    return undefined;\n  }\n}\n\n/**\n * Represents an interactive element inside a `GridCell`. It allows for pausing grid navigation to\n * interact with the widget.\n *\n * When the user interacts with the widget (e.g., by typing in an input or opening a menu), grid\n * navigation is temporarily suspended to allow the widget to handle keyboard\n * events.\n *\n * ```html\n * <td ngGridCell>\n *   <button ngGridCellWidget>Click Me</button>\n * </td>\n * ```\n *\n * @developerPreview 21.0\n */\n@Directive({\n  selector: '[ngGridCellWidget]',\n  exportAs: 'ngGridCellWidget',\n  host: {\n    'class': 'grid-cell-widget',\n    '[attr.data-active]': 'active()',\n    '[attr.data-active-control]': 'isActivated() ? \"widget\" : \"cell\"',\n    '[tabindex]': '_tabIndex()',\n  },\n})\nexport class GridCellWidget {\n  /** A reference to the host element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the host element. */\n  readonly element = this._elementRef.nativeElement as HTMLElement;\n\n  /** Whether the widget is currently active (focused). */\n  readonly active = computed(() => this._pattern.active());\n\n  /** The parent cell. */\n  private readonly _cell = inject(GridCell);\n\n  /** A unique identifier for the widget. */\n  readonly id = input(inject(_IdGenerator).getId('ng-grid-cell-widget-', true));\n\n  /** The type of widget, which determines how it is activated. */\n  readonly widgetType = input<'simple' | 'complex' | 'editable'>('simple');\n\n  /** Whether the widget is disabled. */\n  readonly disabled = input(false, {transform: booleanAttribute});\n\n  /** The target that will receive focus instead of the widget. */\n  readonly focusTarget = input<ElementRef | HTMLElement | undefined>();\n\n  /** Emits when the widget is activated. */\n  readonly onActivate = output<KeyboardEvent | FocusEvent | undefined>();\n\n  /** Emits when the widget is deactivated. */\n  readonly onDeactivate = output<KeyboardEvent | FocusEvent | undefined>();\n\n  /** The tabindex override. */\n  readonly tabindex = input<number | undefined>();\n\n  /**\n   * The tabindex value set to the element.\n   * If a focus target exists then return -1. Unless an override.\n   */\n  protected readonly _tabIndex: Signal<number> = computed(\n    () => this.tabindex() ?? (this.focusTarget() ? -1 : this._pattern.tabIndex()),\n  );\n\n  /** The UI pattern for the grid cell widget. */\n  readonly _pattern = new GridCellWidgetPattern({\n    ...this,\n    element: () => this.element,\n    cell: () => this._cell._pattern,\n    focusTarget: computed(() => {\n      if (this.focusTarget() instanceof ElementRef) {\n        return (this.focusTarget() as ElementRef).nativeElement;\n      }\n      return this.focusTarget();\n    }),\n  });\n\n  /** Whether the widget is activated. */\n  get isActivated(): Signal<boolean> {\n    return this._pattern.isActivated.asReadonly();\n  }\n\n  constructor() {\n    afterRenderEffect(() => {\n      const activateEvent = this._pattern.lastActivateEvent();\n      if (activateEvent) {\n        this.onActivate.emit(activateEvent);\n      }\n    });\n\n    afterRenderEffect(() => {\n      const deactivateEvent = this._pattern.lastDeactivateEvent();\n      if (deactivateEvent) {\n        this.onDeactivate.emit(deactivateEvent);\n      }\n    });\n  }\n\n  /** Activates the widget. */\n  activate(): void {\n    this._pattern.activate();\n  }\n\n  /** Deactivates the widget. */\n  deactivate(): void {\n    this._pattern.deactivate();\n  }\n}\n"],"names":["Grid","_elementRef","inject","ElementRef","element","nativeElement","_rows","contentChildren","GridRow","descendants","_rowPatterns","computed","map","r","_pattern","ngDevMode","debugName","textDirection","Directionality","valueSignal","enableSelection","input","transform","booleanAttribute","disabled","softDisabled","focusMode","rowWrap","colWrap","multi","selectionMode","enableRangeSelection","GridPattern","rows","getCell","e","_getCell","constructor","afterRenderEffect","setDefaultStateEffect","resetStateEffect","resetFocusEffect","restoreFocusEffect","focusEffect","target","row","cell","inputs","cells","parentElement","closest","undefined","deps","i0","ɵɵFactoryTarget","Directive","ɵdir","ɵɵngDeclareDirective","minVersion","version","type","isSignal","exportAs","ngImport","decorators","args","selector","host","_cells","GridCell","_cellPatterns","c","_grid","grid","rowIndex","GridRowPattern","active","_widgets","GridCellWidget","_widgetPatterns","w","_row","id","_IdGenerator","getId","role","rowSpan","colSpan","colIndex","selected","model","selectable","orientation","wrap","tabindex","_tabIndex","tabIndex","GridCellPattern","widgets","getWidget","_getWidget","pattern","find","_cell","widgetType","focusTarget","onActivate","output","onDeactivate","GridCellWidgetPattern","isActivated","asReadonly","activateEvent","lastActivateEvent","emit","deactivateEvent","lastDeactivateEvent","activate","deactivate","isStandalone","classPropertyName","publicName","isRequired","transformFunction","outputs","properties","classAttribute"],"mappings":"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"}