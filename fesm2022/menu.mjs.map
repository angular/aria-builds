{"version":3,"file":"menu.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/menu/menu.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  afterRenderEffect,\n  computed,\n  contentChildren,\n  Directive,\n  effect,\n  ElementRef,\n  inject,\n  input,\n  model,\n  output,\n  Signal,\n  signal,\n  untracked,\n} from '@angular/core';\nimport {\n  SignalLike,\n  MenuBarPattern,\n  MenuItemPattern,\n  MenuPattern,\n  MenuTriggerPattern,\n  DeferredContent,\n  DeferredContentAware,\n} from '@angular/aria/private';\nimport {_IdGenerator} from '@angular/cdk/a11y';\nimport {Directionality} from '@angular/cdk/bidi';\n\n/**\n * A trigger for a menu.\n *\n * The menu trigger is used to open and close menus, and can be placed on menu items to connect\n * sub-menus.\n */\n@Directive({\n  selector: 'button[ngMenuTrigger]',\n  exportAs: 'ngMenuTrigger',\n  host: {\n    'class': 'ng-menu-trigger',\n    '[attr.tabindex]': '_pattern.tabIndex()',\n    '[attr.aria-haspopup]': '_pattern.hasPopup()',\n    '[attr.aria-expanded]': '_pattern.expanded()',\n    '[attr.aria-controls]': '_pattern.menu()?.id()',\n    '(click)': '_pattern.onClick()',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(focusout)': '_pattern.onFocusOut($event)',\n    '(focusin)': 'onFocusIn()',\n  },\n})\nexport class MenuTrigger<V> {\n  /** A reference to the menu trigger element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** The directionality (LTR / RTL) context for the application (or a subtree of it). */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** A reference to the menu element. */\n  readonly element: HTMLButtonElement = this._elementRef.nativeElement;\n\n  /** The menu associated with the trigger. */\n  menu = input<Menu<V> | undefined>(undefined);\n\n  /** Whether the menu item has been focused. */\n  readonly hasBeenFocused = signal(false);\n\n  /** The menu trigger ui pattern instance. */\n  _pattern: MenuTriggerPattern<V> = new MenuTriggerPattern({\n    textDirection: this.textDirection,\n    element: computed(() => this._elementRef.nativeElement),\n    menu: computed(() => this.menu()?._pattern),\n  });\n\n  constructor() {\n    effect(() => this.menu()?.parent.set(this));\n  }\n\n  /** Marks the menu trigger as having been focused. */\n  onFocusIn() {\n    this.hasBeenFocused.set(true);\n  }\n}\n\n/**\n * A list of menu items.\n *\n * A menu is used to offer a list of menu item choices to users. Menus can be nested within other\n * menus to create sub-menus.\n *\n * ```html\n * <button ngMenuTrigger menu=\"menu\">Options</button>\n *\n * <div ngMenu #menu=\"ngMenu\">\n *   <div ngMenuItem>Star</div>\n *   <div ngMenuItem>Edit</div>\n *   <div ngMenuItem>Delete</div>\n * </div>\n * ```\n */\n@Directive({\n  selector: '[ngMenu]',\n  exportAs: 'ngMenu',\n  host: {\n    'role': 'menu',\n    'class': 'ng-menu',\n    '[attr.id]': '_pattern.id()',\n    '[attr.data-visible]': '_pattern.isVisible()',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(mouseover)': '_pattern.onMouseOver($event)',\n    '(mouseout)': '_pattern.onMouseOut($event)',\n    '(focusout)': '_pattern.onFocusOut($event)',\n    '(focusin)': '_pattern.onFocusIn()',\n    '(click)': '_pattern.onClick($event)',\n  },\n  hostDirectives: [\n    {\n      directive: DeferredContentAware,\n      inputs: ['preserveContent'],\n    },\n  ],\n})\nexport class Menu<V> {\n  /** The DeferredContentAware host directive. */\n  private readonly _deferredContentAware = inject(DeferredContentAware, {optional: true});\n\n  /** The menu items contained in the menu. */\n  readonly _allItems = contentChildren<MenuItem<V>>(MenuItem, {descendants: true});\n\n  /** The menu items that are direct children of this menu. */\n  readonly _items: Signal<MenuItem<V>[]> = computed(() =>\n    this._allItems().filter(i => i.parent === this),\n  );\n\n  /** A reference to the menu element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the menu element. */\n  readonly element: HTMLElement = this._elementRef.nativeElement;\n\n  /** The directionality (LTR / RTL) context for the application (or a subtree of it). */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** The unique ID of the menu. */\n  readonly id = input<string>(inject(_IdGenerator).getId('ng-menu-', true));\n\n  /** Whether the menu should wrap its items. */\n  readonly wrap = input<boolean>(true);\n\n  /** The delay in seconds before the typeahead buffer is cleared. */\n  readonly typeaheadDelay = input<number>(0.5); // Picked arbitrarily.\n\n  /** A reference to the parent menu item or menu trigger. */\n  readonly parent = signal<MenuTrigger<V> | MenuItem<V> | undefined>(undefined);\n\n  /** The menu ui pattern instance. */\n  readonly _pattern: MenuPattern<V>;\n\n  /**\n   * The menu items as a writable signal.\n   *\n   * TODO(wagnermaciel): This would normally be a computed, but using a computed causes a bug where\n   * sometimes the items array is empty. The bug can be reproduced by switching this to use a\n   * computed and then quickly opening and closing menus in the dev app.\n   */\n  readonly items = () => this._items().map(i => i._pattern);\n\n  /** Whether the menu is visible. */\n  isVisible = computed(() => this._pattern.isVisible());\n\n  /** A callback function triggered when a menu item is selected. */\n  onSelect = output<V>();\n\n  constructor() {\n    this._pattern = new MenuPattern({\n      ...this,\n      parent: computed(() => this.parent()?._pattern),\n      multi: () => false,\n      softDisabled: () => true,\n      focusMode: () => 'roving',\n      orientation: () => 'vertical',\n      selectionMode: () => 'explicit',\n      activeItem: signal(undefined),\n      element: computed(() => this._elementRef.nativeElement),\n      onSelect: (value: V) => this.onSelect.emit(value),\n    });\n\n    afterRenderEffect(() => {\n      const parent = this.parent();\n      if (parent instanceof MenuItem && parent.parent instanceof MenuBar) {\n        this._deferredContentAware?.contentVisible.set(true);\n      } else {\n        this._deferredContentAware?.contentVisible.set(\n          this._pattern.isVisible() || !!this.parent()?.hasBeenFocused(),\n        );\n      }\n    });\n\n    // TODO(wagnermaciel): This is a redundancy needed for if the user uses display: none to hide\n    // submenus. In those cases, the ui pattern is calling focus() before the ui has a chance to\n    // update the display property. The result is focus() being called on an element that is not\n    // focusable. This simply retries focusing the element after render.\n    afterRenderEffect(() => {\n      if (this._pattern.isVisible()) {\n        const activeItem = untracked(() => this._pattern.inputs.activeItem());\n        this._pattern.listBehavior.goto(activeItem!);\n      }\n    });\n\n    afterRenderEffect(() => {\n      if (!this._pattern.hasBeenFocused()) {\n        this._pattern.setDefaultState();\n      }\n    });\n  }\n\n  // TODO(wagnermaciel): Author close, closeAll, and open methods for each directive.\n\n  /** Closes the menu. */\n  close(opts?: {refocus?: boolean}) {\n    this._pattern.inputs.parent()?.close(opts);\n  }\n\n  /** Closes all parent menus. */\n  closeAll(opts?: {refocus?: boolean}) {\n    const root = this._pattern.root();\n\n    if (root instanceof MenuTriggerPattern) {\n      root.close(opts);\n    }\n\n    if (root instanceof MenuPattern || root instanceof MenuBarPattern) {\n      root.inputs.activeItem()?.close(opts);\n    }\n  }\n}\n\n/**\n * A menu bar of menu items.\n *\n * Like the menu, a menubar is used to offer a list of menu item choices to users. However, a\n * menubar is used to display a persistent, top-level,\n * always-visible set of menu item choices.\n */\n@Directive({\n  selector: '[ngMenuBar]',\n  exportAs: 'ngMenuBar',\n  host: {\n    'role': 'menubar',\n    'class': 'ng-menu-bar',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(mouseover)': '_pattern.onMouseOver($event)',\n    '(click)': '_pattern.onClick($event)',\n    '(focusin)': '_pattern.onFocusIn()',\n    '(focusout)': '_pattern.onFocusOut($event)',\n  },\n})\nexport class MenuBar<V> {\n  /** The menu items contained in the menubar. */\n  readonly _allItems = contentChildren<MenuItem<V>>(MenuItem, {descendants: true});\n\n  readonly _items: SignalLike<MenuItem<V>[]> = () =>\n    this._allItems().filter(i => i.parent === this);\n\n  /** A reference to the menu element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the menubar element. */\n  readonly element: HTMLElement = this._elementRef.nativeElement;\n\n  /** The directionality (LTR / RTL) context for the application (or a subtree of it). */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** The value of the menu. */\n  readonly value = model<V[]>([]);\n\n  /** Whether the menu should wrap its items. */\n  readonly wrap = input<boolean>(true);\n\n  /** The delay in seconds before the typeahead buffer is cleared. */\n  readonly typeaheadDelay = input<number>(0.5);\n\n  /** The menu ui pattern instance. */\n  readonly _pattern: MenuBarPattern<V>;\n\n  /** The menu items as a writable signal. */\n  readonly items = signal<MenuItemPattern<V>[]>([]);\n\n  /** A callback function triggered when a menu item is selected. */\n  onSelect = output<V>();\n\n  constructor() {\n    this._pattern = new MenuBarPattern({\n      ...this,\n      multi: () => false,\n      softDisabled: () => true,\n      focusMode: () => 'roving',\n      orientation: () => 'horizontal',\n      selectionMode: () => 'explicit',\n      onSelect: (value: V) => this.onSelect.emit(value),\n      activeItem: signal(undefined),\n      element: computed(() => this._elementRef.nativeElement),\n    });\n\n    afterRenderEffect(() => {\n      this.items.set(this._items().map(i => i._pattern));\n    });\n\n    afterRenderEffect(() => {\n      if (!this._pattern.hasBeenFocused()) {\n        this._pattern.setDefaultState();\n      }\n    });\n  }\n}\n\n/**\n * An item in a Menu.\n *\n * Menu items can be used in menus and menubars to represent a choice or action a user can take.\n */\n@Directive({\n  selector: '[ngMenuItem]',\n  exportAs: 'ngMenuItem',\n  host: {\n    'role': 'menuitem',\n    'class': 'ng-menu-item',\n    '(focusin)': 'onFocusIn()',\n    '[attr.tabindex]': '_pattern.tabIndex()',\n    '[attr.data-active]': '_pattern.isActive()',\n    '[attr.aria-haspopup]': '_pattern.hasPopup()',\n    '[attr.aria-expanded]': '_pattern.expanded()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n    '[attr.aria-controls]': '_pattern.submenu()?.id()',\n  },\n})\nexport class MenuItem<V> {\n  /** A reference to the menu item element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** A reference to the menu element. */\n  readonly element: HTMLElement = this._elementRef.nativeElement;\n\n  /** The unique ID of the menu item. */\n  readonly id = input<string>(inject(_IdGenerator).getId('ng-menu-item-', true));\n\n  /** The value of the menu item. */\n  readonly value = input.required<V>();\n\n  /** Whether the menu item is disabled. */\n  readonly disabled = input<boolean>(false);\n\n  // TODO(wagnermaciel): Discuss whether all inputs should be models.\n\n  /** The search term associated with the menu item. */\n  readonly searchTerm = model<string>('');\n\n  /** A reference to the parent menu. */\n  private readonly _menu = inject<Menu<V>>(Menu, {optional: true});\n\n  /** A reference to the parent menu bar. */\n  private readonly _menuBar = inject<MenuBar<V>>(MenuBar, {optional: true});\n\n  /** A reference to the parent menu or menubar. */\n  readonly parent = this._menu ?? this._menuBar;\n\n  /** The submenu associated with the menu item. */\n  readonly submenu = input<Menu<V> | undefined>(undefined);\n\n  /** Whether the menu item has been focused. */\n  readonly hasBeenFocused = signal(false);\n\n  /** The menu item ui pattern instance. */\n  readonly _pattern: MenuItemPattern<V> = new MenuItemPattern<V>({\n    id: this.id,\n    value: this.value,\n    element: computed(() => this._elementRef.nativeElement),\n    disabled: this.disabled,\n    searchTerm: this.searchTerm,\n    parent: computed(() => this.parent?._pattern),\n    submenu: computed(() => this.submenu()?._pattern),\n  });\n\n  constructor() {\n    effect(() => this.submenu()?.parent.set(this));\n  }\n\n  /** Marks the menu item as having been focused. */\n  onFocusIn() {\n    this.hasBeenFocused.set(true);\n  }\n}\n\n/** Defers the rendering of the menu content. */\n@Directive({\n  selector: 'ng-template[ngMenuContent]',\n  exportAs: 'ngMenuContent',\n  hostDirectives: [DeferredContent],\n})\nexport class MenuContent {}\n"],"names":["MenuTrigger","_elementRef","inject","ElementRef","textDirection","Directionality","valueSignal","element","nativeElement","menu","input","undefined","hasBeenFocused","signal","_pattern","MenuTriggerPattern","computed","constructor","effect","parent","set","onFocusIn","deps","target","i0","ɵɵFactoryTarget","Directive","isStandalone","selector","inputs","classPropertyName","publicName","isSignal","isRequired","transformFunction","host","listeners","properties","classAttribute","exportAs","ngImport","decorators","args","Menu","_deferredContentAware","DeferredContentAware","optional","_allItems","contentChildren","MenuItem","descendants","_items","filter","i","ngDevMode","debugName","id","_IdGenerator","getId","wrap","typeaheadDelay","items","map","isVisible","onSelect","output","MenuPattern","multi","softDisabled","focusMode","orientation","selectionMode","activeItem","value","emit","afterRenderEffect","MenuBar","contentVisible","untracked","listBehavior","goto","setDefaultState","close","opts","closeAll","root","MenuBarPattern","ɵdir","ɵɵngDeclareDirective","minVersion","version","type","hostDirectives","directive","i1","model","required","disabled","searchTerm","_menu","_menuBar","submenu","MenuItemPattern","outputs","attributes","MenuContent","DeferredContent"],"mappings":"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"}