{"version":3,"file":"deferred-content.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/deferred-content/deferred-content.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  afterRenderEffect,\n  Directive,\n  inject,\n  TemplateRef,\n  signal,\n  ViewContainerRef,\n  model,\n} from '@angular/core';\n\n/**\n * A container directive controls the visibility of its content.\n */\n@Directive()\nexport class DeferredContentAware {\n  readonly contentVisible = signal(false);\n  readonly preserveContent = model(false);\n}\n\n/**\n * DeferredContent loads/unloads the content based on the visibility.\n * The visibilty signal is sent from a parent directive implements\n * DeferredContentAware.\n *\n * Use this directive as a host directive. For example:\n *\n * ```ts\n *   @Directive({\n *     selector: 'ng-template[AccordionContent]',\n *     hostDirectives: [DeferredContent],\n *   })\n *   class AccordionContent {}\n * ```\n */\n@Directive()\nexport class DeferredContent {\n  private readonly _deferredContentAware = inject(DeferredContentAware, {optional: true});\n  private readonly _templateRef = inject(TemplateRef);\n  private readonly _viewContainerRef = inject(ViewContainerRef);\n  private _isRendered = false;\n\n  readonly deferredContentAware = signal(this._deferredContentAware);\n\n  constructor() {\n    afterRenderEffect(() => {\n      if (this.deferredContentAware()?.contentVisible()) {\n        if (this._isRendered) return;\n        this._viewContainerRef.clear();\n        this._viewContainerRef.createEmbeddedView(this._templateRef);\n        this._isRendered = true;\n      } else if (!this.deferredContentAware()?.preserveContent()) {\n        this._viewContainerRef.clear();\n        this._isRendered = false;\n      }\n    });\n  }\n}\n"],"names":["contentVisible","signal","ngDevMode","debugName","deferredContentAware","_isRendered","_viewContainerRef","clear","createEmbeddedView","_templateRef"],"mappings":";;;;EAuBWA,cAAA,GAAAC,MAAA,CAAA,KAAA,EAAA,IAAAC,SAAA,GAAA,CAAA;IAAAC,SAAA,EAAA;AAAA,GAAA,CAAA,GAAA,EAAA,CAAA,CAAA;;;AAIX,GAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBA+BM,CAAA,MAAA;MAAW,IAAAC,IAAAA,CAAAA,oBAA8B,IAAAJ,cAAmB,EAAA,EAAA;QACrD,IAAA,IAAA,CAAkBK,WAAA,EACvB;QACF,IAAA,CAAAC,iBAAA,CAAAC,KAAA,EAAA;AAEJ,QAAA,IAAA,CAAAD,iBAAA,CAAAE,kBAAA,CAAA,IAAA,CAAAC,YAAA,CAAA;;;8BArBQ,CAAAF,KAAA,EAAA;AAAA,QAAA,IAAA,CAAAF,WAAA,GAAA,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}