{"version":3,"file":"accordion.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/aria/accordion/accordion.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  Directive,\n  input,\n  ElementRef,\n  inject,\n  contentChildren,\n  afterRenderEffect,\n  signal,\n  model,\n  booleanAttribute,\n  computed,\n  WritableSignal,\n} from '@angular/core';\nimport {_IdGenerator} from '@angular/cdk/a11y';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {\n  DeferredContent,\n  DeferredContentAware,\n  AccordionGroupPattern,\n  AccordionPanelPattern,\n  AccordionTriggerPattern,\n} from '@angular/aria/private';\n\n/**\n * Represents the content panel of an accordion item. It is controlled by an\n * associated `AccordionTrigger`.\n */\n@Directive({\n  selector: '[ngAccordionPanel]',\n  exportAs: 'ngAccordionPanel',\n  hostDirectives: [\n    {\n      directive: DeferredContentAware,\n      inputs: ['preserveContent'],\n    },\n  ],\n  host: {\n    'class': 'ng-accordion-panel',\n    'role': 'region',\n    '[attr.id]': '_pattern.id()',\n    '[attr.aria-labelledby]': '_pattern.accordionTrigger()?.id()',\n    '[attr.inert]': '_pattern.hidden() ? true : null',\n  },\n})\nexport class AccordionPanel {\n  /** The DeferredContentAware host directive. */\n  private readonly _deferredContentAware = inject(DeferredContentAware);\n\n  /** A global unique identifier for the panel. */\n  private readonly _id = inject(_IdGenerator).getId('accordion-trigger-');\n\n  /** A local unique identifier for the panel, used to match with its trigger's value. */\n  value = input.required<string>();\n\n  /** The parent accordion trigger pattern that controls this panel. This is set by AccordionGroup. */\n  readonly accordionTrigger: WritableSignal<AccordionTriggerPattern | undefined> =\n    signal(undefined);\n\n  /** The UI pattern instance for this panel. */\n  readonly _pattern: AccordionPanelPattern = new AccordionPanelPattern({\n    id: () => this._id,\n    value: this.value,\n    accordionTrigger: () => this.accordionTrigger(),\n  });\n\n  constructor() {\n    // Connect the panel's hidden state to the DeferredContentAware's visibility.\n    afterRenderEffect(() => {\n      this._deferredContentAware.contentVisible.set(!this._pattern.hidden());\n    });\n  }\n}\n\n/**\n * Represents the trigger button for an accordion item. It controls the expansion\n * state of an associated `AccordionPanel`.\n */\n@Directive({\n  selector: '[ngAccordionTrigger]',\n  exportAs: 'ngAccordionTrigger',\n  host: {\n    'class': 'ng-accordion-trigger',\n    '[attr.data-active]': '_pattern.active()',\n    'role': 'button',\n    '[id]': '_pattern.id()',\n    '[attr.aria-expanded]': '_pattern.expanded()',\n    '[attr.aria-controls]': '_pattern.controls()',\n    '[attr.aria-disabled]': '_pattern.disabled()',\n    '[attr.disabled]': 'hardDisabled() ? true : null',\n    '[attr.tabindex]': '_pattern.tabindex()',\n    '(keydown)': '_pattern.onKeydown($event)',\n    '(pointerdown)': '_pattern.onPointerdown($event)',\n    '(focusin)': '_pattern.onFocus($event)',\n  },\n})\nexport class AccordionTrigger {\n  /** A global unique identifier for the trigger. */\n  private readonly _id = inject(_IdGenerator).getId('ng-accordion-trigger-');\n\n  /** A reference to the trigger element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** The parent AccordionGroup. */\n  private readonly _accordionGroup = inject(AccordionGroup);\n\n  /** A local unique identifier for the trigger, used to match with its panel's value. */\n  value = input.required<string>();\n\n  /** Whether the trigger is disabled. */\n  disabled = input(false, {transform: booleanAttribute});\n\n  /**\n   * Whether this trigger is completely inaccessible.\n   *\n   * TODO(ok7sai): Consider move this to UI patterns.\n   */\n  readonly hardDisabled = computed(() => this._pattern.disabled() && this._pattern.tabindex() < 0);\n\n  /** The accordion panel pattern controlled by this trigger. This is set by AccordionGroup. */\n  readonly accordionPanel: WritableSignal<AccordionPanelPattern | undefined> = signal(undefined);\n\n  /** The UI pattern instance for this trigger. */\n  readonly _pattern: AccordionTriggerPattern = new AccordionTriggerPattern({\n    id: () => this._id,\n    value: this.value,\n    disabled: this.disabled,\n    element: () => this._elementRef.nativeElement,\n    accordionGroup: computed(() => this._accordionGroup._pattern),\n    accordionPanel: this.accordionPanel,\n  });\n}\n\n/**\n * Container for a group of accordion items. It manages the overall state and\n * interactions of the accordion, such as keyboard navigation and expansion mode.\n */\n@Directive({\n  selector: '[ngAccordionGroup]',\n  exportAs: 'ngAccordionGroup',\n  host: {\n    'class': 'ng-accordion-group',\n  },\n})\nexport class AccordionGroup {\n  /** A reference to the group element. */\n  private readonly _elementRef = inject(ElementRef);\n\n  /** The AccordionTriggers nested inside this group. */\n  protected readonly _triggers = contentChildren(AccordionTrigger, {descendants: true});\n\n  /** The AccordionPanels nested inside this group. */\n  protected readonly _panels = contentChildren(AccordionPanel, {descendants: true});\n\n  /** The text direction (ltr or rtl). */\n  readonly textDirection = inject(Directionality).valueSignal;\n\n  /** Whether the entire accordion group is disabled. */\n  disabled = input(false, {transform: booleanAttribute});\n\n  /** Whether multiple accordion items can be expanded simultaneously. */\n  multiExpandable = input(true, {transform: booleanAttribute});\n\n  /** The values of the current selected/expanded accordions. */\n  value = model<string[]>([]);\n\n  /** Whether disabled items should be skipped during keyboard navigation. */\n  skipDisabled = input(true, {transform: booleanAttribute});\n\n  /** Whether keyboard navigation should wrap around from the last item to the first, and vice-versa. */\n  wrap = input(false, {transform: booleanAttribute});\n\n  /** The UI pattern instance for this accordion group. */\n  readonly _pattern: AccordionGroupPattern = new AccordionGroupPattern({\n    ...this,\n    // TODO(ok7sai): Consider making `activeItem` an internal state in the pattern and call\n    // `setDefaultState` in the CDK.\n    activeItem: signal(undefined),\n    items: computed(() => this._triggers().map(trigger => trigger._pattern)),\n    expandedIds: this.value,\n    // TODO(ok7sai): Investigate whether an accordion should support horizontal mode.\n    orientation: () => 'vertical',\n    element: () => this._elementRef.nativeElement,\n  });\n\n  constructor() {\n    // Effect to link triggers with their corresponding panels and update the group's items.\n    afterRenderEffect(() => {\n      const triggers = this._triggers();\n      const panels = this._panels();\n\n      for (const trigger of triggers) {\n        const panel = panels.find(p => p.value() === trigger.value());\n        trigger.accordionPanel.set(panel?._pattern);\n        if (panel) {\n          panel.accordionTrigger.set(trigger._pattern);\n        }\n      }\n    });\n  }\n}\n\n/**\n * A structural directive that marks the `ng-template` to be used as the content\n * for a `AccordionPanel`. This content can be lazily loaded.\n */\n@Directive({\n  selector: 'ng-template[ngAccordionContent]',\n  hostDirectives: [DeferredContent],\n})\nexport class AccordionContent {}\n"],"names":["AccordionPanel","id","_id","accordionTrigger","constructor","afterRenderEffect","_deferredContentAware","contentVisible","set","_pattern","hidden","ɵdir","i0","ɵɵngDeclareDirective","minVersion","version","type","isStandalone","selector","inputs","value","classPropertyName","publicName","isSignal","isRequired","transformFunction","host","attributes","properties","classAttribute","exportAs","hostDirectives","directive","i1","DeferredContentAware","ngImport","decorators","Directive","args","ctorParameters","input","required","ngDevMode","debugName","disabled","transform","booleanAttribute","hardDisabled","computed","tabindex","element","_elementRef","nativeElement","accordionGroup","_accordionGroup","ɵfac","ɵɵngDeclareFactory","AccordionTrigger","deps","target","ɵɵFactoryTarget","listeners","skipDisabled","wrap","AccordionGroupPattern","activeItem","signal","undefined","AccordionContent"],"mappings":"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"}