{"version":3,"file":"_combobox-tree-chunk.mjs","sources":["../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tree/tree.ts","../../../../../k8-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tree/combobox-tree.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {SignalLike, WritableSignalLike} from '../behaviors/signal-like/signal-like';\nimport {List, ListInputs, ListItem} from '../behaviors/list/list';\nimport {ExpansionItem, ListExpansion} from '../behaviors/expansion/expansion';\nimport {KeyboardEventManager, PointerEventManager, Modifier} from '../behaviors/event-manager';\n\n/** Represents the required inputs for a tree item. */\nexport interface TreeItemInputs<V>\n  extends Omit<ListItem<V>, 'index'>, Omit<ExpansionItem, 'expandable'> {\n  /** The parent item. */\n  parent: SignalLike<TreeItemPattern<V> | TreePattern<V>>;\n\n  /** Whether this item has children. Children can be lazily loaded. */\n  hasChildren: SignalLike<boolean>;\n\n  /** The children items. */\n  children: SignalLike<TreeItemPattern<V>[]>;\n\n  /** The tree pattern this item belongs to. */\n  tree: SignalLike<TreePattern<V>>;\n}\n\n/**\n * Represents an item in a Tree.\n */\nexport class TreeItemPattern<V> implements ListItem<V>, ExpansionItem {\n  /** A unique identifier for this item. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The value of this item. */\n  readonly value: SignalLike<V> = () => this.inputs.value();\n\n  /** A reference to the item element. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether the item is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The text used by the typeahead search. */\n  readonly searchTerm: SignalLike<string> = () => this.inputs.searchTerm();\n\n  /** The tree pattern this item belongs to. */\n  readonly tree: SignalLike<TreePattern<V>> = () => this.inputs.tree();\n\n  /** The parent item. */\n  readonly parent: SignalLike<TreeItemPattern<V> | TreePattern<V>> = () => this.inputs.parent();\n\n  /** The children items. */\n  readonly children: SignalLike<TreeItemPattern<V>[]> = () => this.inputs.children();\n\n  /** The position of this item among its siblings. */\n  readonly index = computed(() => this.tree().visibleItems().indexOf(this));\n\n  /** Controls expansion for child items. */\n  readonly expansionBehavior: ListExpansion;\n\n  /** Whether the item is expandable. It's expandable if children item exist. */\n  readonly expandable: SignalLike<boolean> = () => this.inputs.hasChildren();\n\n  /** Whether the item is selectable. */\n  readonly selectable: SignalLike<boolean> = () => this.inputs.selectable();\n\n  /** Whether the item is expanded. */\n  readonly expanded: WritableSignalLike<boolean>;\n\n  /** The level of the current item in a tree. */\n  readonly level: SignalLike<number> = computed(() => this.parent().level() + 1);\n\n  /** Whether this item is visible. */\n  readonly visible: SignalLike<boolean> = computed(\n    () => this.parent().expanded() && this.parent().visible(),\n  );\n\n  /** The number of items under the same parent at the same level. */\n  readonly setsize = computed(() => this.parent().children().length);\n\n  /** The position of this item among its siblings (1-based). */\n  readonly posinset = computed(() => this.parent().children().indexOf(this) + 1);\n\n  /** Whether the item is active. */\n  readonly active = computed(() => this.tree().activeItem() === this);\n\n  /** The tab index of the item. */\n  readonly tabIndex = computed(() => this.tree().listBehavior.getItemTabindex(this));\n\n  /** Whether the item is selected. */\n  readonly selected: SignalLike<boolean | undefined> = computed(() => {\n    if (this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().values().includes(this.value());\n  });\n\n  /** The current type of this item. */\n  readonly current: SignalLike<string | undefined> = computed(() => {\n    if (!this.tree().nav()) {\n      return undefined;\n    }\n    if (!this.selectable()) {\n      return undefined;\n    }\n    return this.tree().values().includes(this.value()) ? this.tree().currentType() : undefined;\n  });\n\n  constructor(readonly inputs: TreeItemInputs<V>) {\n    this.expanded = inputs.expanded;\n    this.expansionBehavior = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => true,\n      items: this.children,\n      disabled: computed(() => this.tree()?.disabled() ?? false),\n    });\n  }\n}\n\n/** The selection operations that the tree can perform. */\ninterface SelectOptions {\n  toggle?: boolean;\n  selectOne?: boolean;\n  selectRange?: boolean;\n  anchor?: boolean;\n}\n\n/** Represents the required inputs for a tree. */\nexport interface TreeInputs<V> extends Omit<ListInputs<TreeItemPattern<V>, V>, 'items'> {\n  /** A unique identifier for the tree. */\n  id: SignalLike<string>;\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  allItems: SignalLike<TreeItemPattern<V>[]>;\n\n  /** Whether the tree is in navigation mode. */\n  nav: SignalLike<boolean>;\n\n  /** The aria-current type. */\n  currentType: SignalLike<'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'>;\n}\n\n/** Controls the state and interactions of a tree view. */\nexport class TreePattern<V> implements TreeInputs<V> {\n  /** The list behavior for the tree. */\n  readonly listBehavior: List<TreeItemPattern<V>, V>;\n\n  /** Controls expansion for direct children of the tree root (top-level items). */\n  readonly expansionBehavior: ListExpansion;\n\n  /** The root level is 0. */\n  readonly level = () => 0;\n\n  /** The root is always expanded. */\n  readonly expanded = () => true;\n\n  /** The root is always visible. */\n  readonly visible = () => true;\n\n  /** The tab index of the tree. */\n  readonly tabIndex: SignalLike<-1 | 0> = computed(() => this.listBehavior.tabIndex());\n\n  /** The id of the current active item. */\n  readonly activeDescendant = computed(() => this.listBehavior.activeDescendant());\n\n  /** The direct children of the root (top-level tree items). */\n  readonly children = computed(() =>\n    this.inputs.allItems().filter(item => item.level() === this.level() + 1),\n  );\n\n  /** All currently visible tree items. An item is visible if their parent is expanded. */\n  readonly visibleItems = computed(() => this.inputs.allItems().filter(item => item.visible()));\n\n  /** Whether the tree selection follows focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** Whether the tree direction is RTL. */\n  readonly isRtl = computed(() => this.inputs.textDirection() === 'rtl');\n\n  /** The key for navigating to the previous item. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.isRtl() ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for navigating to the next item. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.isRtl() ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The key for collapsing an item or moving to its parent. */\n  readonly collapseKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowUp';\n    }\n    return this.isRtl() ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key for expanding an item or moving to its first child. */\n  readonly expandKey = computed(() => {\n    if (this.inputs.orientation() === 'horizontal') {\n      return 'ArrowDown';\n    }\n    return this.isRtl() ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** Represents the space key. Does nothing when the user is actively using typeahead. */\n  readonly dynamicSpaceKey = computed(() => (this.listBehavior.isTyping() ? '' : ' '));\n\n  /** Regular expression to match characters for typeahead. */\n  readonly typeaheadRegexp = /^.$/;\n\n  /** The keydown event manager for the tree. */\n  readonly keydown = computed(() => {\n    const manager = new KeyboardEventManager();\n    const list = this.listBehavior;\n\n    manager\n      .on(this.prevKey, () => list.prev({selectOne: this.followFocus()}))\n      .on(this.nextKey, () => list.next({selectOne: this.followFocus()}))\n      .on('Home', () => list.first({selectOne: this.followFocus()}))\n      .on('End', () => list.last({selectOne: this.followFocus()}))\n      .on(this.typeaheadRegexp, e => list.search(e.key, {selectOne: this.followFocus()}))\n      .on(this.expandKey, () => this.expand({selectOne: this.followFocus()}))\n      .on(this.collapseKey, () => this.collapse({selectOne: this.followFocus()}))\n      .on(Modifier.Shift, '*', () => this.expandSiblings());\n\n    if (this.inputs.multi()) {\n      manager\n        // TODO: Tracking the anchor by index can break if the\n        // tree is expanded or collapsed causing the index to change.\n        .on(Modifier.Any, 'Shift', () => list.anchor(this.listBehavior.activeIndex()))\n        .on(Modifier.Shift, this.prevKey, () => list.prev({selectRange: true}))\n        .on(Modifier.Shift, this.nextKey, () => list.next({selectRange: true}))\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'Home', () =>\n          list.first({selectRange: true, anchor: false}),\n        )\n        .on([Modifier.Ctrl | Modifier.Shift, Modifier.Meta | Modifier.Shift], 'End', () =>\n          list.last({selectRange: true, anchor: false}),\n        )\n        .on(Modifier.Shift, 'Enter', () => list.updateSelection({selectRange: true, anchor: false}))\n        .on(Modifier.Shift, this.dynamicSpaceKey, () =>\n          list.updateSelection({selectRange: true, anchor: false}),\n        );\n    }\n\n    if (!this.followFocus() && this.inputs.multi()) {\n      manager\n        .on(this.dynamicSpaceKey, () => list.toggle())\n        .on('Enter', () => list.toggle(), {preventDefault: !this.nav()})\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => list.toggleAll());\n    }\n\n    if (!this.followFocus() && !this.inputs.multi()) {\n      manager.on(this.dynamicSpaceKey, () => list.selectOne());\n      manager.on('Enter', () => list.selectOne(), {preventDefault: !this.nav()});\n    }\n\n    if (this.inputs.multi() && this.followFocus()) {\n      manager\n        .on([Modifier.Ctrl, Modifier.Meta], this.prevKey, () => list.prev())\n        .on([Modifier.Ctrl, Modifier.Meta], this.nextKey, () => list.next())\n        .on([Modifier.Ctrl, Modifier.Meta], this.expandKey, () => this.expand())\n        .on([Modifier.Ctrl, Modifier.Meta], this.collapseKey, () => this.collapse())\n        .on([Modifier.Ctrl, Modifier.Meta], ' ', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Enter', () => list.toggle())\n        .on([Modifier.Ctrl, Modifier.Meta], 'Home', () => list.first())\n        .on([Modifier.Ctrl, Modifier.Meta], 'End', () => list.last())\n        .on([Modifier.Ctrl, Modifier.Meta], 'A', () => {\n          list.toggleAll();\n          list.select(); // Ensure the currect item remains selected.\n        });\n    }\n\n    return manager;\n  });\n\n  /** The pointerdown event manager for the tree. */\n  pointerdown = computed(() => {\n    const manager = new PointerEventManager();\n\n    if (this.multi()) {\n      manager.on(Modifier.Shift, e => this.goto(e, {selectRange: true}));\n    }\n\n    if (!this.multi()) {\n      return manager.on(e => this.goto(e, {selectOne: true}));\n    }\n\n    if (this.multi() && this.followFocus()) {\n      return manager\n        .on(e => this.goto(e, {selectOne: true}))\n        .on(Modifier.Ctrl, e => this.goto(e, {toggle: true}));\n    }\n\n    if (this.multi() && !this.followFocus()) {\n      return manager.on(e => this.goto(e, {toggle: true}));\n    }\n\n    return manager;\n  });\n\n  /** A unique identifier for the tree. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The host native element. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether the tree is in navigation mode. */\n  readonly nav: SignalLike<boolean> = () => this.inputs.nav();\n\n  /** The aria-current type. */\n  readonly currentType: SignalLike<\n    'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false'\n  > = () => this.inputs.currentType();\n\n  /** All items in the tree, in document order (DFS-like, a flattened list). */\n  readonly allItems: SignalLike<TreeItemPattern<V>[]> = () => this.inputs.allItems();\n\n  /** The focus strategy used by the tree. */\n  readonly focusMode: SignalLike<'roving' | 'activedescendant'> = () => this.inputs.focusMode();\n\n  /** Whether the tree is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The currently active item in the tree. */\n  readonly activeItem: WritableSignalLike<TreeItemPattern<V> | undefined>;\n\n  /** Whether disabled items should be focusable. */\n  readonly softDisabled: SignalLike<boolean> = () => this.inputs.softDisabled();\n\n  /** Whether the focus should wrap when navigating past the first or last item. */\n  readonly wrap: SignalLike<boolean> = () => this.inputs.wrap();\n\n  /** The orientation of the tree. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'> = () => this.inputs.orientation();\n\n  /** The text direction of the tree. */\n  readonly textDirection: SignalLike<'ltr' | 'rtl'> = () => this.textDirection();\n\n  /** Whether multiple items can be selected at the same time. */\n  readonly multi: SignalLike<boolean> = computed(() => (this.nav() ? false : this.inputs.multi()));\n\n  /** The selection mode of the tree. */\n  readonly selectionMode: SignalLike<'follow' | 'explicit'> = () => this.inputs.selectionMode();\n\n  /** The delay in milliseconds to wait before clearing the typeahead buffer. */\n  readonly typeaheadDelay: SignalLike<number> = () => this.inputs.typeaheadDelay();\n\n  /** The current selected items of the tree. */\n  readonly values: WritableSignalLike<V[]>;\n\n  constructor(readonly inputs: TreeInputs<V>) {\n    this.activeItem = inputs.activeItem;\n    this.values = inputs.values;\n\n    this.listBehavior = new List({\n      ...inputs,\n      items: this.visibleItems,\n      multi: this.multi,\n    });\n\n    this.expansionBehavior = new ListExpansion({\n      multiExpandable: () => true,\n      items: this.children,\n      disabled: this.disabled,\n    });\n  }\n\n  /**\n   * Sets the tree to it's default initial state.\n   *\n   * Sets the active index of the tree to the first focusable selected tree item if one exists.\n   * Otherwise, sets focus to the first focusable tree item.\n   */\n  setDefaultState() {\n    let firstItem: TreeItemPattern<V> | undefined;\n\n    for (const item of this.allItems()) {\n      if (!item.visible()) continue;\n      if (!this.listBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.activeItem.set(item);\n        return;\n      }\n    }\n\n    if (firstItem !== undefined) {\n      this.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events on the tree. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** Handles pointerdown events on the tree. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Navigates to the given tree item in the tree. */\n  goto(e: PointerEvent, opts?: SelectOptions) {\n    const item = this._getItem(e);\n    if (!item) return;\n\n    this.listBehavior.goto(item, opts);\n    this.toggleExpansion(item);\n  }\n\n  /** Toggles to expand or collapse a tree item. */\n  toggleExpansion(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (!item.expandable()) return;\n    if (item.expanded()) {\n      this.collapse();\n    } else {\n      this.expansionBehavior.open(item);\n    }\n  }\n\n  /** Expands a tree item. */\n  expand(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && !item.expanded()) {\n      this.expansionBehavior.open(item);\n    } else if (\n      item.expanded() &&\n      item.children().some(item => this.listBehavior.isFocusable(item))\n    ) {\n      this.listBehavior.next(opts);\n    }\n  }\n\n  /** Expands all sibling tree items including itself. */\n  expandSiblings(item?: TreeItemPattern<V>) {\n    item ??= this.activeItem();\n    const siblings = item?.parent()?.children();\n    siblings?.forEach(item => this.expansionBehavior.open(item));\n  }\n\n  /** Collapses a tree item. */\n  collapse(opts?: SelectOptions) {\n    const item = this.activeItem();\n    if (!item || !this.listBehavior.isFocusable(item)) return;\n\n    if (item.expandable() && item.expanded()) {\n      this.expansionBehavior.close(item);\n    } else if (item.parent() && item.parent() !== this) {\n      const parentItem = item.parent();\n      if (parentItem instanceof TreeItemPattern && this.listBehavior.isFocusable(parentItem)) {\n        this.listBehavior.goto(parentItem, opts);\n      }\n    }\n  }\n\n  /** Retrieves the TreeItemPattern associated with a DOM event, if any. */\n  protected _getItem(event: Event): TreeItemPattern<V> | undefined {\n    if (!(event.target instanceof HTMLElement)) {\n      return;\n    }\n    const element = event.target.closest('[role=\"treeitem\"]');\n    return this.inputs.allItems().find(i => i.element() === element);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {computed} from '@angular/core';\nimport {TreeInputs, TreePattern, TreeItemPattern} from './tree';\nimport {SignalLike} from '../behaviors/signal-like/signal-like';\nimport {ComboboxPattern, ComboboxTreeControls} from '../combobox/combobox';\n\nexport type ComboboxTreeInputs<V> = TreeInputs<V> & {\n  /** The combobox controlling the tree. */\n  combobox: SignalLike<ComboboxPattern<TreeItemPattern<V>, V> | undefined>;\n};\n\nexport class ComboboxTreePattern<V>\n  extends TreePattern<V>\n  implements ComboboxTreeControls<TreeItemPattern<V>, V>\n{\n  /** Whether the currently focused item is collapsible. */\n  isItemCollapsible = () => this.inputs.activeItem()?.parent() instanceof TreeItemPattern;\n\n  /** The ARIA role for the tree. */\n  role = () => 'tree' as const;\n\n  /* The id of the active (focused) item in the tree. */\n  activeId = computed(() => this.listBehavior.activeDescendant());\n\n  /** Returns the currently active (focused) item in the tree. */\n  getActiveItem = () => this.inputs.activeItem();\n\n  /** The list of items in the tree. */\n  items = computed(() => this.inputs.allItems());\n\n  /** The tab index for the tree. Always -1 because the combobox handles focus. */\n  override tabIndex: SignalLike<-1 | 0> = () => -1;\n\n  constructor(override readonly inputs: ComboboxTreeInputs<V>) {\n    if (inputs.combobox()) {\n      inputs.multi = () => false;\n      inputs.focusMode = () => 'activedescendant';\n      inputs.element = inputs.combobox()!.inputs.inputEl;\n    }\n\n    super(inputs);\n  }\n\n  /** Noop. The combobox handles keydown events. */\n  override onKeydown(_: KeyboardEvent): void {}\n\n  /** Noop. The combobox handles pointerdown events. */\n  override onPointerdown(_: PointerEvent): void {}\n\n  /** Noop. The combobox controls the open state. */\n  override setDefaultState(): void {}\n\n  /** Navigates to the specified item in the tree. */\n  focus = (item: TreeItemPattern<V>) => this.listBehavior.goto(item);\n\n  /** Navigates to the next focusable item in the tree. */\n  next = () => this.listBehavior.next();\n\n  /** Navigates to the previous focusable item in the tree. */\n  prev = () => this.listBehavior.prev();\n\n  /** Navigates to the last focusable item in the tree. */\n  last = () => this.listBehavior.last();\n\n  /** Navigates to the first focusable item in the tree. */\n  first = () => this.listBehavior.first();\n\n  /** Unfocuses the currently focused item in the tree. */\n  unfocus = () => this.listBehavior.unfocus();\n\n  // TODO: handle non-selectable parent nodes.\n  /** Selects the specified item in the tree or the current active item if not provided. */\n  select = (item?: TreeItemPattern<V>) => this.listBehavior.select(item);\n\n  /** Toggles the selection state of the given item in the tree or the current active item if not provided. */\n  toggle = (item?: TreeItemPattern<V>) => this.listBehavior.toggle(item);\n\n  /** Clears the selection in the tree. */\n  clearSelection = () => this.listBehavior.deselectAll();\n\n  /** Retrieves the TreeItemPattern associated with a pointer event. */\n  getItem = (e: PointerEvent) => this._getItem(e);\n\n  /** Retrieves the currently selected items in the tree */\n  getSelectedItems = () => this.inputs.allItems().filter(item => item.selected());\n\n  /** Sets the value of the combobox tree. */\n  setValue = (value: V | undefined) => this.inputs.values.set(value ? [value] : []);\n\n  /** Expands the currently focused item if it is expandable. */\n  expandItem = () => this.expand();\n\n  /** Collapses the currently focused item if it is expandable. */\n  collapseItem = () => this.collapse();\n\n  /** Whether the specified item or the currently active item is expandable. */\n  isItemExpandable(item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) {\n    return item ? item.expandable() : false;\n  }\n\n  /** Expands all of the tree items. */\n  expandAll = () => this.items().forEach(item => this.expansionBehavior.open(item));\n\n  /** Collapses all of the tree items. */\n  collapseAll = () => this.items().forEach(item => item.expansionBehavior.close(item));\n\n  /** Whether the currently active item is selectable. */\n  isItemSelectable = (item: TreeItemPattern<V> | undefined = this.inputs.activeItem()) => {\n    return item ? item.selectable() : false;\n  };\n}\n"],"names":["TreeItemPattern","inputs","id","value","element","disabled","searchTerm","tree","parent","children","index","computed","visibleItems","indexOf","expansionBehavior","expandable","hasChildren","selectable","expanded","level","visible","setsize","length","posinset","active","activeItem","tabIndex","listBehavior","getItemTabindex","selected","nav","undefined","values","includes","current","currentType","constructor","ListExpansion","multiExpandable","items","TreePattern","activeDescendant","allItems","filter","item","followFocus","selectionMode","isRtl","textDirection","prevKey","orientation","nextKey","collapseKey","expandKey","dynamicSpaceKey","isTyping","typeaheadRegexp","keydown","manager","KeyboardEventManager","list","on","prev","selectOne","next","first","last","e","search","key","expand","collapse","Modifier","Shift","expandSiblings","multi","Any","anchor","activeIndex","selectRange","Ctrl","Meta","updateSelection","toggle","preventDefault","toggleAll","select","pointerdown","PointerEventManager","goto","focusMode","softDisabled","wrap","typeaheadDelay","List","setDefaultState","firstItem","isFocusable","set","onKeydown","event","handle","onPointerdown","opts","_getItem","toggleExpansion","open","some","siblings","forEach","close","parentItem","target","HTMLElement","closest","find","i","ComboboxTreePattern","isItemCollapsible","role","activeId","getActiveItem","combobox","inputEl","_","focus","unfocus","clearSelection","deselectAll","getItem","getSelectedItems","setValue","expandItem","collapseItem","isItemExpandable","expandAll","collapseAll","isItemSelectable"],"mappings":"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"}